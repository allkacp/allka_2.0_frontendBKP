import{c as W,r as l,j as e,z as ae,am as te,C as h,y as H,a2 as w,a8 as I,T as re,h as le,i as J,a5 as _,k as L,f as m,P as C,aw as G,b7 as ie,b8 as ne,bj as oe,bo as de,a1 as ce,F as me,af as z,ag as E,l as xe,bp as pe,aE as he,aF as ge,aG as ue,aH as be,aI as je,aX as ve,aJ as fe,aK as Ne,ai as ye,Z as we,B as F,bq as g}from"./index-D2dOrPZ8.js";import{A as Ce,a as ke,b as Te,c as Ae}from"./accordion-C2wU0TCh.js";import{u as Se}from"./specialty-context-B5jJAh8-.js";import{u as Oe}from"./sidebar-context-DQOyQsLi.js";import{P as Pe}from"./page-header-DpITyWPC.js";import{R as $e}from"./receipt-D46BrlE0.js";import{P as U}from"./percent-DPygJ3Pl.js";import{S as De}from"./square-pen-Bi43ABVd.js";const Ie=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],_e=W("badge-dollar-sign",Ie);const ze=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Ee=W("scale",ze),Fe=[{id:"1",name:"Comissão Agência",type:"commission",value:15,valueType:"percentage",appliesTo:["Iniciante","Júnior"],description:"Comissão padrão para níveis iniciantes",isActive:!0,applyOn:"final_value"},{id:"2",name:"Comissão Nômade",type:"commission",value:5,valueType:"percentage",appliesTo:["Nível 1","Nível 2"],description:"Comissão para nômades sobre valor do especialista",isActive:!0,applyOn:"specialist_value"},{id:"3",name:"Taxa de uso da plataforma",type:"fee",value:10,valueType:"percentage",appliesTo:["Iniciante"],description:"Taxa para manutenção e uso da plataforma",isActive:!0},{id:"4",name:"Taxa fixa por projeto",type:"fee",value:50,valueType:"fixed",appliesTo:["Iniciante"],description:"Taxa fixa cobrada por projeto iniciado",isActive:!0},{id:"5",name:"Taxa de processamento",type:"fee",value:1.1,valueType:"fixed",appliesTo:["Iniciante","Júnior","Pleno","Sênior"],description:"Taxa fixa de processamento por venda",isActive:!0},{id:"6",name:"Margem Padrão",type:"margin",value:30,valueType:"percentage",appliesTo:["Iniciante","Júnior","Pleno","Sênior"],description:"Margem de lucro padrão aplicada a todos os produtos",isActive:!0,productCategories:["all"]},{id:"7",name:"Margem Design Premium",type:"margin",value:40,valueType:"percentage",appliesTo:["Pleno","Sênior"],description:"Margem diferenciada para produtos de design premium",isActive:!0,productCategories:["design"]}];function Me(){const[u,o]=l.useState(Fe);return{pricingComponents:u,addComponent:r=>{console.log("[v0] Adding component:",r),o(n=>[...n,r])},updateComponent:(r,n)=>{console.log("[v0] Updating component:",r,n),o(d=>d.map(T=>T.id===r?n:T))},deleteComponent:r=>{console.log("[v0] Deleting component:",r),o(n=>n.filter(d=>d.id!==r))},getActiveComponents:()=>u.filter(r=>r.isActive),getComponentsByType:r=>u.filter(n=>n.type===r)}}const ts=()=>{const{sidebarWidth:u}=Oe(),{pricingComponents:o,addComponent:M,updateComponent:k,deleteComponent:V}=Me(),{specialties:B}=Se(),[v,r]=l.useState("rates"),[n,d]=l.useState(!1),[T,f]=l.useState(!1),[c,A]=l.useState(null),[b,S]=l.useState(null),[x,j]=l.useState(null),[Ve,Be]=l.useState(!1),[Re,qe]=l.useState(null),[He,Je]=l.useState(!1),[Le,Ge]=l.useState({isOpen:!1,specialty:null}),[Ue,We]=l.useState({name:"",iniciante:"",junior:"",pleno:"",senior:"",aiEnabled:!1,aiFixedValue:""}),[a,i]=l.useState({name:"",value:0,valueType:"percentage",appliesTo:[],description:"",isActive:!0,applyOn:"final_value",productCategories:["all"]}),[N,O]=l.useState({isOpen:!1,id:"",name:""}),X=["Iniciante","Júnior","Pleno","Sênior"],R=["Bronze","Prata","Ouro","Platina","Diamante"],q=["Nível 1","Nível 2","Nível 3","Nível 4","Nível 5"],Z=c==="commission"?x==="partners"?R:x==="nomades"?q:[]:X,y=(s,t)=>{if(s){S(s);const $=R.some(D=>s.appliesTo.includes(D)),se=q.some(D=>s.appliesTo.includes(D));j($?"partners":se?"nomades":null),A(s.type),i({name:s.name,value:s.value,valueType:s.valueType,appliesTo:s.appliesTo,description:s.description,isActive:s.isActive,applyOn:s.applyOn||"final_value",productCategories:s.productCategories||["all"]}),f(!1),d(!0)}else{if(!t){f(!0);return}A(t),S(null),j(null),i({name:"",value:0,valueType:"percentage",appliesTo:[],description:"",isActive:!0,applyOn:"final_value",productCategories:["all"]}),f(!1),d(!0)}},K=()=>{if(!a.name||a.value===0){g({title:"Campos obrigatórios",description:"Preencha o nome e o valor",variant:"destructive"});return}if(a.appliesTo.length===0){g({title:"Nível obrigatório",description:"Selecione pelo menos um nível",variant:"destructive"});return}const s=c||(v==="commissions"?"commission":v==="fees"?"fee":"tax"),t={id:b?.id||Date.now().toString(),name:a.name,type:s,value:a.value,valueType:a.valueType,appliesTo:a.appliesTo,description:a.description,isActive:a.isActive,...s==="commission"&&{applyOn:a.applyOn},...s==="margin"&&{productCategories:a.productCategories}};b?(k(b.id,t),g({title:"Componente atualizado",description:`${a.name} foi atualizado com sucesso`})):(M(t),g({title:"Componente criado",description:`${a.name} foi criado com sucesso`})),d(!1),f(!1),A(null),S(null),j(null),i({name:"",value:0,valueType:"percentage",appliesTo:[],description:"",isActive:!0,applyOn:"final_value",productCategories:["all"]})},Q=(s,t)=>{V(s),g({title:"Componente removido",description:`${t} foi removido com sucesso`}),O({isOpen:!1,id:"",name:""})},Y=s=>{k(s.id,{...s,isActive:!s.isActive}),g({title:s.isActive?"Componente desativado":"Componente ativado",description:`${s.name} foi ${s.isActive?"desativado":"ativado"}`})},ee=s=>{y(s)},p=s=>o.filter(t=>t.type===s),P=s=>e.jsxs(h,{className:`p-3 hover:shadow-md transition-all border-l-4 bg-white ${s.type==="commission"?"border-l-green-500":s.type==="fee"?"border-l-blue-500":s.type==="margin"?"border-l-orange-500":"border-l-purple-500"} ${s.isActive?"":"opacity-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-0.5 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 items-end shrink-0",children:[e.jsx(ye,{checked:s.isActive,onCheckedChange:()=>Y(s),className:"scale-75"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>ee(s),className:"h-7 w-7 p-0 hover:bg-green-100",children:e.jsx(De,{className:"h-3.5 w-3.5 text-green-600"})}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>O({isOpen:!0,id:s.id,name:s.name}),className:"h-7 w-7 p-0 hover:bg-red-100",children:e.jsx(we,{className:"h-3.5 w-3.5 text-red-600"})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.appliesTo.slice(0,2).map(t=>e.jsx(F,{variant:"secondary",className:"text-xs px-1.5 py-0",children:t},t)),s.appliesTo.length>2&&e.jsxs(F,{variant:"secondary",className:"text-xs px-1.5 py-0",children:["+",s.appliesTo.length-2]})]}),e.jsx(F,{className:`text-xs font-semibold ${s.type==="commission"?"bg-green-500 text-white":s.type==="fee"?"bg-blue-500 text-white":"bg-purple-500 text-white"}`,children:s.valueType==="percentage"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-3 w-3 mr-0.5"}),s.value,"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-3 w-3 mr-0.5"}),"R$ ",s.value.toFixed(2)]})})]})]},s.id);return e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx(Pe,{title:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Precificação"}),description:"Gerencie comissões, taxas, impostos e custos"}),e.jsx(Ce,{type:"single",collapsible:!0,className:"mb-1",children:e.jsxs(ke,{value:"stats",className:"border-none",children:[e.jsx(Te,{className:"bg-blue-50 hover:bg-blue-100 rounded-lg px-4 py-3 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"Estatísticas e Métricas"})]})}),e.jsxs(Ae,{className:"pt-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 border-l-4 border-blue-500 rounded-md shadow-sm mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600 shrink-0"}),e.jsxs("p",{className:"text-blue-800 text-xs",children:[e.jsx("strong",{children:"Importante:"})," Todas as alterações afetam automaticamente o cálculo de preços. Componentes inativos não serão aplicados."]})]})}),e.jsxs("div",{className:"grid gap-2 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(h,{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-900",children:"Comissões Ativas"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:p("commission").filter(s=>s.isActive).length})]}),e.jsxs(h,{className:"p-3 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(w,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-900",children:"Taxas Ativas"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:p("fee").filter(s=>s.isActive).length})]}),e.jsxs(h,{className:"p-3 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($e,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-purple-900",children:"Impostos Ativos"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:p("tax").filter(s=>s.isActive).length})]}),e.jsxs(h,{className:"p-3 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(I,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-xs font-medium text-orange-900",children:"Total Componentes"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:o.length})]})]})]})]})}),e.jsxs(re,{value:v,onValueChange:r,className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsxs(le,{className:"w-max grid grid-cols-2 gap-1 bg-transparent p-0 h-auto",children:[e.jsxs(J,{value:"rates",className:"px-4 py-2 text-xs font-medium rounded-lg border border-transparent data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:border-blue-300 hover:bg-slate-100",children:[e.jsx(_,{className:"h-4 w-4 mr-1.5 inline"}),"Taxas e Comissões"]}),e.jsxs(J,{value:"specialties",className:"px-4 py-2 text-xs font-medium rounded-lg border border-transparent data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:border-blue-300 hover:bg-slate-100",children:[e.jsx(I,{className:"h-4 w-4 mr-1.5 inline"}),"Especialidades"]})]})}),e.jsx(L,{value:"rates",className:"space-y-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100",children:e.jsx(H,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Comissões"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[p("commission").length," itens"]})]})]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>y(void 0,"commission"),className:"text-green-600 border-green-300 hover:bg-green-50 h-8 text-xs",children:[e.jsx(C,{className:"h-3.5 w-3.5 mr-1"})," Adicionar Comissão"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:o.filter(s=>s.type==="commission").map(s=>P(s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:e.jsx(w,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Taxas"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[p("fee").length," itens"]})]})]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>y(void 0,"fee"),className:"text-blue-600 border-blue-300 hover:bg-blue-50 h-8 text-xs",children:[e.jsx(C,{className:"h-3.5 w-3.5 mr-1"})," Adicionar Taxa"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:o.filter(s=>s.type==="fee").map(s=>P(s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100",children:e.jsx(Ee,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Impostos"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[p("tax").length," itens"]})]})]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>y(void 0,"tax"),className:"text-purple-600 border-purple-300 hover:bg-purple-50 h-8 text-xs",children:[e.jsx(C,{className:"h-3.5 w-3.5 mr-1"})," Adicionar Imposto"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:o.filter(s=>s.type==="tax").map(s=>P(s))})]})]})}),e.jsxs(L,{value:"specialties",className:"space-y-3",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-md p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-blue-600 shrink-0"}),e.jsxs("p",{className:"text-blue-800 text-xs",children:[e.jsx("strong",{children:"Visualização de Especialidades:"})," Esta aba exibe as especialidades cadastradas em"," ",e.jsx("a",{href:"/admin/especialidades",className:"underline font-semibold hover:text-blue-900",children:"Gestão de Especialidades"}),". Para adicionar, editar ou remover, acesse a página de gestão."]})]})}),e.jsxs(h,{className:"p-4 bg-white shadow-md",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Custo por Hora das Especialidades"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Valores de referência utilizados no cálculo de preços dos produtos"})]}),e.jsx(m,{asChild:!0,variant:"outline",size:"sm",className:"gap-2 bg-transparent border-green-300 text-green-600 hover:bg-green-50 h-8 text-xs shrink-0",children:e.jsxs("a",{href:"/admin/especialidades",children:[e.jsx(_e,{className:"h-3.5 w-3.5"}),"Gerenciar"]})})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-xs",children:"Especialidade"}),e.jsxs("th",{className:"text-center p-3 font-semibold text-xs",children:["Iniciante",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal opacity-90",children:"R$/h"})]}),e.jsxs("th",{className:"text-center p-3 font-semibold text-xs",children:["Júnior",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal opacity-90",children:"R$/h"})]}),e.jsxs("th",{className:"text-center p-3 font-semibold text-xs",children:["Pleno",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal opacity-90",children:"R$/h"})]}),e.jsxs("th",{className:"text-center p-3 font-semibold text-xs",children:["Sênior",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal opacity-90",children:"R$/h"})]}),e.jsxs("th",{className:"text-center p-3 font-semibold text-xs",children:["Nômades",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal opacity-90",children:"Ativos"})]})]})}),e.jsx("tbody",{children:B.map((s,t)=>e.jsxs("tr",{className:`border-b hover:bg-blue-50 transition-colors ${t%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("td",{className:"p-3 font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(I,{className:"h-3.5 w-3.5 text-blue-600 shrink-0"}),e.jsx("span",{className:"text-xs",children:s.name})]}),e.jsxs("td",{className:"p-3 text-center text-gray-700 font-semibold text-xs",children:["R$ ",s.rates.iniciante.toFixed(2)]}),e.jsxs("td",{className:"p-3 text-center text-gray-700 font-semibold text-xs",children:["R$ ",s.rates.junior.toFixed(2)]}),e.jsxs("td",{className:"p-3 text-center text-gray-700 font-semibold text-xs",children:["R$ ",s.rates.pleno.toFixed(2)]}),e.jsxs("td",{className:"p-3 text-center text-gray-700 font-semibold text-xs",children:["R$ ",s.rates.senior.toFixed(2)]}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:"bg-green-50 text-green-700 border-green-200 rounded-lg px-2 py-0.5 font-semibold text-xs",children:s.activeNomades})})]},s.id))})]})}),e.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg shadow-inner",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(_,{className:"h-4 w-4"}),"Como funciona o cálculo de preços"]}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1.5",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 font-bold mt-0.5 shrink-0",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Custo Base:"})," Valor hora da especialidade × Horas estimadas da etapa"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 font-bold mt-0.5 shrink-0",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Comissões:"})," Aplicadas automaticamente conforme nível da especialidade"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 font-bold mt-0.5 shrink-0",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Taxas e Impostos:"})," Adicionados ao subtotal para compor o preço final"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 font-bold mt-0.5 shrink-0",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Atualização Automática:"})," Alterações aqui recalculam os preços de todos os produtos"]})]})]})]})]})]})]}),e.jsx(ie,{open:n,onOpenChange:d,children:e.jsx(ne,{side:"right",hideOverlay:!0,className:"p-0 border-l-0 shadow-2xl max-w-none w-full",style:{width:`calc(100vw - ${u}px)`,minWidth:"850px"},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"relative px-6 py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:[e.jsxs(oe,{className:"text-xl font-bold text-white",children:[b?"Editar":"Adicionar"," ",c==="commission"?"Comissão":c==="fee"?"Taxa":"Imposto"]}),e.jsx("p",{className:"text-xs text-blue-100 mt-1",children:"Preencha as informações do componente de precificação"}),e.jsx(de,{className:"absolute right-4 top-4 rounded-full bg-white/10 hover:bg-white/20 p-1.5 transition-colors",children:e.jsx(ce,{className:"h-4 w-4 text-white"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(me,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),"Informações Básicas"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx(z,{htmlFor:"name",className:"text-xs font-medium",children:"Nome *"}),e.jsx(E,{id:"name",value:a.name,onChange:s=>i({...a,name:s.target.value}),placeholder:"Ex: Comissão padrão",className:"mt-1 h-9 text-sm"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx(z,{htmlFor:"value",className:"text-xs font-medium",children:"Valor *"}),e.jsxs("div",{className:"relative mt-1",children:[a.valueType==="percentage"?e.jsx(U,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400"}):e.jsx(w,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400"}),e.jsx(E,{id:"value",type:"number",value:a.value,onChange:s=>i({...a,value:Number.parseFloat(s.target.value)}),placeholder:"15",className:"pl-9 h-9 text-sm"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(z,{htmlFor:"description",className:"text-xs font-medium",children:"Descrição"}),e.jsx(E,{id:"description",value:a.description,onChange:s=>i({...a,description:s.target.value}),placeholder:"Descreva o propósito desta taxa...",className:"mt-1 h-9 text-sm"})]})]})]}),c==="commission"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center",children:e.jsx(xe,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),"Tipo de Empresa"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Selecione o tipo de empresa para mostrar os níveis corretos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>j("partners"),className:`p-3 rounded-lg border-2 transition-all ${x==="partners"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Agências Partners"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Bronze, Prata, Ouro, Platina, Diamante"})]})}),e.jsx("button",{type:"button",onClick:()=>j("nomades"),className:`p-3 rounded-lg border-2 transition-all ${x==="nomades"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Nômades"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Nível 1, 2, 3, 4, 5"})]})})]})]}),c==="commission"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 dark:bg-amber-900 flex items-center justify-center",children:e.jsx(_,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"})}),"Base de Aplicacao"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Selecione sobre qual valor a comissao deve ser calculada"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[e.jsxs("button",{type:"button",onClick:()=>i({...a,applyOn:"final_value"}),className:`p-3 rounded-lg border-2 transition-all text-left ${a.applyOn==="final_value"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:"Valor Final"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Preco com margem, taxas e impostos"})]}),e.jsxs("button",{type:"button",onClick:()=>i({...a,applyOn:"value_without_fees_taxes"}),className:`p-3 rounded-lg border-2 transition-all text-left ${a.applyOn==="value_without_fees_taxes"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:"Valor sem Taxas e Impostos"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Preco base com margem apenas"})]}),e.jsxs("button",{type:"button",onClick:()=>i({...a,applyOn:"value_without_taxes"}),className:`p-3 rounded-lg border-2 transition-all text-left ${a.applyOn==="value_without_taxes"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:"Valor sem Impostos"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Preco com margem e taxas, sem impostos"})]}),e.jsxs("button",{type:"button",onClick:()=>i({...a,applyOn:"specialist_value"}),className:`p-3 rounded-lg border-2 transition-all text-left ${a.applyOn==="specialist_value"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:"Valor do Especialista"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Valor que o especialista recebe"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center",children:e.jsx(pe,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"})}),"Aplicável aos Níveis"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Selecione os níveis onde este componente será aplicado"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2.5",children:Z.map(s=>e.jsxs("label",{className:`flex items-center gap-2 p-2.5 rounded-lg border-2 cursor-pointer transition-all ${a.appliesTo.includes(s)?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":c==="commission"&&!x?"border-gray-200 dark:border-gray-700 opacity-50 cursor-not-allowed":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:a.appliesTo.includes(s),onChange:t=>{t.target.checked?i({...a,appliesTo:[...a.appliesTo,s]}):i({...a,appliesTo:a.appliesTo.filter($=>$!==s)})},disabled:c==="commission"&&!x,className:"w-3.5 h-3.5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-xs font-medium capitalize",children:s})]},s))}),c==="commission"&&!x&&e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2.5 flex items-center gap-1.5",children:[e.jsx(G,{className:"w-3.5 h-3.5"}),"Selecione o tipo de empresa primeiro"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-0.5",children:"Status Ativo"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ativar este componente imediatamente após criação"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:a.isActive,onChange:s=>i({...a,isActive:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})})]})}),e.jsxs("div",{className:"border-t bg-white dark:bg-gray-800 px-6 py-3 flex justify-end gap-2.5 shadow-lg",children:[e.jsx(m,{variant:"outline",onClick:()=>d(!1),className:"px-5 h-9 text-sm",children:"Cancelar"}),e.jsxs(m,{onClick:K,className:"px-5 h-9 text-sm bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg",children:[e.jsx(C,{className:"w-3.5 h-3.5 mr-1.5"}),b?"Atualizar":"Adicionar"]})]})]})})}),e.jsx(he,{open:N.isOpen,onOpenChange:s=>!s&&O({isOpen:!1,id:"",name:""}),children:e.jsxs(ge,{children:[e.jsxs(ue,{children:[e.jsx(be,{children:"Confirmar Exclusão"}),e.jsxs(je,{children:['Tem certeza que deseja excluir "',N.name,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(ve,{children:[e.jsx(fe,{children:"Cancelar"}),e.jsx(Ne,{onClick:()=>Q(N.id,N.name),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})};export{ts as default};
