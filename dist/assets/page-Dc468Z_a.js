import{r as d,j as e,f as o,P as S,T,h as A,i as h,k as f,C as p,a as j,d as g,S as E,e as v,Z as z,g as b,B as r,U as N,l as B,a6 as M,a2 as U,q as G}from"./index-D2dOrPZ8.js";import{P as O}from"./permission-profile-slide-panel-B1G40H5b.js";import{P as V}from"./page-header-DpITyWPC.js";import{S as q}from"./square-pen-Bi43ABVd.js";import"./sidebar-context-DQOyQsLi.js";const F=[{id:1,name:"Super Admin",description:"Acesso total ao sistema",userCount:2,permissions:{users:{view:!0,create:!0,edit:!0,delete:!0},companies:{view:!0,create:!0,edit:!0,delete:!0},projects:{view:!0,create:!0,edit:!0,delete:!0},nomades:{view:!0,create:!0,edit:!0,delete:!0},financial:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0}}},{id:2,name:"Gerente de Operações",description:"Gestão de projetos e nômades",userCount:5,permissions:{users:{view:!0,create:!1,edit:!0,delete:!1},companies:{view:!0,create:!1,edit:!0,delete:!1},projects:{view:!0,create:!0,edit:!0,delete:!1},nomades:{view:!0,create:!0,edit:!0,delete:!1},financial:{view:!0,create:!1,edit:!1,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1}}},{id:3,name:"Analista Financeiro",description:"Acesso a relatórios financeiros",userCount:3,permissions:{users:{view:!0,create:!1,edit:!1,delete:!1},companies:{view:!0,create:!1,edit:!1,delete:!1},projects:{view:!0,create:!1,edit:!1,delete:!1},nomades:{view:!0,create:!1,edit:!1,delete:!1},financial:{view:!0,create:!0,edit:!0,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1}}}],i=[{key:"users",label:"Usuários",icon:N},{key:"companies",label:"Empresas",icon:B},{key:"projects",label:"Projetos",icon:M},{key:"nomades",label:"Nômades",icon:N},{key:"financial",label:"Financeiro",icon:U},{key:"settings",label:"Configurações",icon:G}],H=[{key:"view",label:"Visualizar"},{key:"create",label:"Criar"},{key:"edit",label:"Editar"},{key:"delete",label:"Excluir"}];function J(){const[m,l]=d.useState(F),[y,x]=d.useState(null),[w,n]=d.useState(!1),P=s=>{if(s.id)l(a=>a.map(t=>t.id===s.id?s:t));else{const a={...s,id:Date.now(),userCount:0};l(t=>[...t,a])}x(null),n(!1)},k=s=>{l(a=>a.filter(t=>t.id!==s))},u=s=>{x(s||null),n(!0)};return e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{title:e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Gestão de Permissões"}),description:"Configure perfis de acesso e permissões granulares",actions:e.jsxs(o,{onClick:()=>u(),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white h-9",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Novo Perfil"]})}),e.jsxs(T,{defaultValue:"profiles",className:"space-y-6",children:[e.jsxs(A,{children:[e.jsx(h,{value:"profiles",children:"Perfis de Acesso"}),e.jsx(h,{value:"matrix",children:"Matriz de Permissões"})]}),e.jsx(f,{value:"profiles",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsxs(p,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(j,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx(E,{className:"h-4 w-4 text-purple-600"}),s.name]}),e.jsx(v,{className:"text-xs mt-1",children:s.description})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>u(s),className:"h-8 w-8 hover:bg-blue-50 hover:text-blue-600",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>k(s.id),className:"h-8 w-8 hover:bg-red-50 hover:text-red-600",children:e.jsx(z,{className:"h-4 w-4"})})]})]})}),e.jsxs(b,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Usuários com este perfil"}),e.jsx(r,{variant:"secondary",className:"text-xs",children:s.userCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Módulos com Acesso:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.filter(a=>s.permissions[a.key]?.view).map(a=>e.jsx(r,{variant:"secondary",className:"text-xs",children:a.label},a.key))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Permissões Totais:"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:H.map(a=>{const t=i.filter(c=>s.permissions[c.key]?.[a.key]).length;return e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsx("p",{className:"text-base font-bold text-purple-600",children:t}),e.jsx("p",{className:"text-xs text-gray-600",children:a.label})]},a.key)})})]})]})]},s.id))})}),e.jsx(f,{value:"matrix",className:"space-y-6",children:e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsx(g,{className:"text-base",children:"Matriz de Permissões por Perfil"}),e.jsx(v,{className:"text-xs",children:"Visão geral de todas as permissões configuradas"})]}),e.jsx(b,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2 font-medium text-xs",children:"Perfil"}),i.map(s=>e.jsx("th",{className:"text-center p-2 font-medium text-xs",children:s.label},s.key))]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 font-medium text-xs",children:s.name}),i.map(a=>{const t=s.permissions[a.key],c=t?.view||t?.create||t?.edit||t?.delete,C=t?.view&&t?.create&&t?.edit&&t?.delete;return e.jsx("td",{className:"p-2 text-center",children:C?e.jsx(r,{className:"bg-green-500 text-xs",children:"Total"}):c?e.jsx(r,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200 text-xs",children:"Parcial"}):e.jsx(r,{variant:"outline",className:"bg-gray-50 text-gray-500 text-xs",children:"Nenhum"})},a.key)})]},s.id))})]})})})]})})]}),e.jsx(O,{open:w,onClose:()=>n(!1),profile:y,onSave:P})]})}export{J as default};
