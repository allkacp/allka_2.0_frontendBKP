import{c as Q,M as Bs,r as o,j as e,f as d,P as S,z as Ws,C as P,g as D,bk as de,bl as Ce,ao as ke,bm as p,y as Ks,aU as Gs,ag as u,B as m,af as i,E as b,H as y,I as w,J as C,K as x,a1 as M,a as Xs,d as Zs,e as Js,ai as U,aA as Ys,aB as Ye,aC as es,az as ss,aD as as,a5 as ts,ak as ea,D as K,v as G,w as X,x as Z,ab as sa,ae as J,ah as me,aL as Ie,a2 as aa,aT as ta,b1 as la,ap as ra,F as ls,aQ as ia,b7 as na,b8 as ca,T as oa,h as da,i as q,k as F,aR as v,Z as Te,bn as ma}from"./index-D2dOrPZ8.js";import{A as Ae,a as Se,b as Pe,c as De}from"./accordion-C2wU0TCh.js";import{C as xa}from"./confirmation-dialog-Bk9N8cdM.js";import{u as ua}from"./product-context-C-bR3Wyg.js";import{u as ha}from"./specialty-context-B5jJAh8-.js";import{P as pa}from"./page-header-DpITyWPC.js";import{G as ga}from"./grid-3x3-DSkwZCAM.js";import{P as ja}from"./pencil-CsIdgWsW.js";import{S as xe}from"./square-pen-Bi43ABVd.js";import{I as fa}from"./image-C6z-v_3M.js";import"./triangle-alert-Cjhkzg0C.js";const va=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],rs=Q("file-question-mark",va);const Na=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],is=Q("layers",Na);const ba=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],ya=Q("layout-list",ba);const wa=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Ca=Q("link",wa);const ka=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Ia=Q("power",ka);const Ta=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Aa=Q("sliders-horizontal",Ta),Me={QUALIFICATION_FEE:.15,TAXES:.05,OPERATIONAL_FEE:.03};function Za(){const{products:k,addProduct:qe,updateProduct:Fe,deleteProduct:Sa}=ua(),{specialties:ue}=ha(),{toast:Y}=Bs(),[E,Ee]=o.useState(""),[ee,Oe]=o.useState("all"),[se,Ve]=o.useState("all"),[_,Le]=o.useState("all"),[Re,ns]=o.useState("name"),[he,ze]=o.useState("grid"),[pe,cs]=o.useState(!1),[g,$]=o.useState(null),[os,O]=o.useState(!1),[Pa,ds]=o.useState(!1),[ms,ae]=o.useState(!1),[xs,te]=o.useState(!1),[us,ge]=o.useState(!1),[f,Ue]=o.useState(null),[H,Qe]=o.useState(null),[Da,_e]=o.useState(null),[r,$e]=o.useState(null),[hs,le]=o.useState(!1),[Ma,ps]=o.useState(!1),[qa,Fa]=o.useState([]),[Ea,gs]=o.useState(!1),[He,js]=o.useState(""),[fs,vs]=o.useState(""),[re,je]=o.useState(""),[Be,fe]=o.useState(""),[Ns,ie]=o.useState(!1),[I,B]=o.useState([]),[N,V]=o.useState([]),[ne,ve]=o.useState([]),[Oa,Va]=o.useState(!1),[La,Ra]=o.useState(null),[T,L]=o.useState([]),[A,R]=o.useState([]),[j,Ne]=o.useState({product:null,newStatus:!1}),[a,c]=o.useState({productId:"",name:"",category:"",subcategories:[],tags:[],recurrence:"",price:"",deliveryDays:"",isActive:!0,productImage:null,productImagePreview:"",presentation:"",deliveryVideoUrl:"",benefits:"",information:"",descriptionAttention:"",summaryDescription:"",includedItems:[],notIncludedItems:[],complementaryProducts:[],requestAttention:"",oneTimeContract:"",monthlyContract:"",previousContracts:"",status:"Ativo",associatedTaskModels:[],description:"",mainImage:"",videoUrl:"",deadline:"",questionnaire:[],tasks:[],excludedItems:[]}),bs=["Social Media","Blog","Vídeo","E-mail Marketing","SEO","Copywriting"],ce=k.filter(s=>{const t=s.name.toLowerCase().includes(E.toLowerCase())||s.id.toLowerCase().includes(E.toLowerCase())||s.description&&s.description.toLowerCase().includes(E.toLowerCase()),l=ee==="all"||s.tasks.some(W=>W.steps.some(Hs=>Hs.area===ee)),n=se==="all"||s.category===se,h=_==="all"||_==="active"&&s.isActive||_==="inactive"&&!s.isActive;return t&&l&&n&&h}).sort((s,t)=>{switch(Re){case"name":return s.name.localeCompare(t.name);case"price-asc":return(s.finalPrice||0)-(t.finalPrice||0);case"price-desc":return(t.finalPrice||0)-(s.finalPrice||0);case"id":return s.id.localeCompare(t.id);default:return 0}}),ys=Array.from(new Set(k.flatMap(s=>s.tasks.flatMap(t=>t.steps.map(l=>l.area))))).filter(Boolean),ws=Array.from(new Set(k.map(s=>s.category))),We=s=>s.tasks.reduce((t,l)=>t+l.steps.reduce((n,h)=>n+h.estimatedHours,0),0),Cs=s=>s.length===0?"bg-gray-100 text-gray-800":s.length===1?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800",ks=s=>{$(s),c({name:s.name||"",presentation:s.presentation||"",benefits:s.benefits||"",information:s.information||"",description:s.description||"",category:s.category||"",subcategories:s.subcategories||[],price:s.finalPrice?.toString()||"0",deliveryDays:s.deliveryDays?.toString()||"0",productImage:null,productImagePreview:s.productImagePreview||"",deliveryVideoUrl:s.deliveryVideoUrl||"",tags:s.tags||[],productId:s.id,recurrence:s.recurrence||"",complementaryProducts:s.complementaryProducts||[],requestAttention:s.requestAttention||"",oneTimeContract:s.oneTimeContract||"",monthlyContract:s.monthlyContract||"",previousContracts:s.previousContracts||"",status:s.isActive?"Ativo":"Inativo",associatedTaskModels:s.associatedTaskModels||[],questionnaire:s.questionnaire?.questions||[],tasks:s.tasks||[],includedItems:s.includedItems||[],notIncludedItems:s.notIncludedItems||[]}),B(s.additionalImages||[]),V(s.questions||[]),L(s.variations||[]),R(s.addOns||[]),ve(s.tasks||[]),O(!0)},Is=s=>{$(s),ds(!0)},Ke=()=>(a.tasks||[]).reduce((t,l)=>t+(l.automaticValue||0),0),Ts=()=>{if(console.log("[v0] Creating new product:",a),!a.name.trim()){alert("Por favor, preencha o nome do produto");return}if(!a.category.trim()){alert("Por favor, selecione uma categoria");return}const t={id:`PROD-${Date.now().toString().slice(-6)}`,name:a.name,description:a.summaryDescription||a.benefits,category:a.category,isActive:a.isActive,tasks:ne,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),totalTasksCost:0,qualificationFee:0,subtotal:0,taxes:0,operationalFee:0,partnerCommission:0,finalPrice:Number.parseFloat(a.price)||Ke(),variations:T,addOns:A,price:Number.parseFloat(a.price)||0,deliveryDays:Number.parseInt(a.deliveryDays)||0,productImagePreview:a.productImagePreview,deliveryVideoUrl:a.deliveryVideoUrl,presentation:a.presentation,benefits:a.benefits,information:a.information,descriptionAttention:a.descriptionAttention,summaryDescription:a.summaryDescription,includedItems:a.includedItems,notIncludedItems:a.notIncludedItems,complementaryProducts:a.complementaryProducts,requestAttention:a.requestAttention,oneTimeContract:a.oneTimeContract,monthlyContract:a.monthlyContract,previousContracts:a.previousContracts,status:a.status,associatedTaskModels:a.associatedTaskModels,recurrence:a.recurrence,subcategories:a.subcategories,tags:a.tags,questions:N,additionalImages:I,tasks:ne,questionnaire:{title:"Questionário do Produto",description:"Respostas do cliente para configurar o produto.",questions:N}};qe(t),be(),O(!1)},be=()=>{c({productId:"",name:"",category:"",subcategories:[],tags:[],recurrence:"",price:"",deliveryDays:"",isActive:!0,productImage:null,productImagePreview:"",presentation:"",deliveryVideoUrl:"",benefits:"",information:"",descriptionAttention:"",summaryDescription:"",includedItems:[],notIncludedItems:[],complementaryProducts:[],requestAttention:"",oneTimeContract:"",monthlyContract:"",previousContracts:"",status:"Ativo",associatedTaskModels:[],description:"",mainImage:"",videoUrl:"",deadline:"",questionnaire:[],tasks:[],excludedItems:[]}),B([]),V([]),je(""),L([]),R([]),ve([])},Ge=()=>{console.log("[v0] Opening product creation sheet"),be(),$(null),O(!0)},As=s=>{const t=s.target.files?.[0];t&&c({...a,productImage:t,productImagePreview:URL.createObjectURL(t)})},Ss=s=>{const t=s.target.files;if(t){const l=Array.from(t).map(n=>URL.createObjectURL(n));B([...I,...l])}},Ps=s=>{B(I.filter((t,l)=>l!==s))},Ds=s=>{s.key==="Enter"&&re.trim()&&(s.preventDefault(),a.tags.includes(re.trim())||c({...a,tags:[...a.tags,re.trim()]}),je(""))},Ms=s=>{c({...a,tags:a.tags.filter(t=>t!==s)})},Xe=s=>{c({...a,subcategories:a.subcategories.includes(s)?a.subcategories.filter(t=>t!==s):[...a.subcategories,s]})},qs=()=>{ie(!0)},Fs=()=>{if(Be==="123"){ie(!1),fe("");const s=document.querySelector('input[value*="R$"]');s&&(s.removeAttribute("readOnly"),s.classList.remove("bg-green-50","dark:bg-green-950/20"),s.classList.add("bg-white","dark:bg-background"),s.focus())}else alert("Senha incorreta!"),fe("")},Es=()=>{const s={id:`q-${Date.now()}`,question:"",type:"text",required:!1,aiAssisted:!1,allowsAttachment:!1,options:[]};V([...N,s])},z=(s,t)=>{V(N.map(l=>l.id===s?{...l,...t}:l))},Os=s=>{V(N.filter(t=>t.id!==s))},Vs=()=>{const s={id:`var-${Date.now()}`,label:"",quantity:1,priceModifier:0};L([...T,s])},ye=(s,t)=>{L(T.map(l=>l.id===s?{...l,...t}:l))},Ls=s=>{L(T.filter(t=>t.id!==s))},Rs=()=>{const s={id:`addon-${Date.now()}`,name:"",price:0,category:"extra"};R([...A,s])},we=(s,t)=>{R(A.map(l=>l.id===s?{...l,...t}:l))},zs=s=>{R(A.filter(t=>t.id!==s))},Ze=()=>{g?(Fe(g.id,{...g,...a,price:Number.parseFloat(a.price),deliveryDays:Number.parseInt(a.deliveryDays),additionalImages:I,questions:N,variations:T,addOns:A,tasks:ne,name:a.name,presentation:a.presentation,benefits:a.benefits,information:a.information,description:a.description,category:a.category,subcategories:a.subcategories,productImagePreview:a.productImagePreview,deliveryVideoUrl:a.deliveryVideoUrl,tags:a.tags,recurrence:a.recurrence,complementaryProducts:a.complementaryProducts,requestAttention:a.requestAttention,oneTimeContract:a.oneTimeContract,monthlyContract:a.monthlyContract,previousContracts:a.previousContracts,status:a.status,associatedTaskModels:a.associatedTaskModels,isActive:a.isActive,questionnaire:{title:"Questionário do Produto",description:"Respostas do cliente para configurar o produto.",questions:N},excludedItems:a.excludedItems,updatedAt:new Date().toISOString()}),Y({title:"Sucesso",description:"Produto atualizado com sucesso!"})):(Ts(),Y({title:"Sucesso",description:"Produto criado com sucesso!"})),O(!1),Je()},Je=()=>{$(null),c({productId:"",name:"",category:"",subcategories:[],tags:[],recurrence:"",price:"",deliveryDays:"",isActive:!0,productImage:null,productImagePreview:"",presentation:"",deliveryVideoUrl:"",benefits:"",information:"",descriptionAttention:"",summaryDescription:"",includedItems:[],notIncludedItems:[],complementaryProducts:[],requestAttention:"",oneTimeContract:"",monthlyContract:"",previousContracts:"",status:"Ativo",associatedTaskModels:[],description:"",mainImage:"",videoUrl:"",deadline:"",questionnaire:[],tasks:[],excludedItems:[]}),B([]),V([]),L([]),R([]),ve([])},Us=()=>{if(console.log("[v0] Saving draft:",a),!a.name.trim()){alert("Por favor, preencha pelo menos o nome do produto");return}const t={id:`PROD-${Date.now().toString().slice(-6)}`,name:a.name,description:a.summaryDescription||a.benefits||"Rascunho",category:a.category||"Sem categoria",isActive:!1,tasks:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),totalTasksCost:0,qualificationFee:0,subtotal:0,taxes:0,operationalFee:0,partnerCommission:0,finalPrice:Number.parseFloat(a.price)||0,price:Number.parseFloat(a.price)||0,deliveryDays:Number.parseInt(a.deliveryDays)||0,productImagePreview:a.productImagePreview,deliveryVideoUrl:a.deliveryVideoUrl,presentation:a.presentation,benefits:a.benefits,information:a.information,descriptionAttention:a.descriptionAttention,summaryDescription:a.summaryDescription,includedItems:a.includedItems,notIncludedItems:a.notIncludedItems,complementaryProducts:a.complementaryProducts,requestAttention:a.requestAttention,oneTimeContract:a.oneTimeContract,monthlyContract:a.monthlyContract,previousContracts:a.previousContracts,status:"Inativo",associatedTaskModels:a.associatedTaskModels,recurrence:a.recurrence,subcategories:a.subcategories,tags:a.tags,questions:N,additionalImages:I,variations:T,addOns:A,tasks:ne,questionnaire:{title:"Rascunho Questionário",description:"Questionário para configurar o produto.",questions:N}};qe(t),be(),O(!1)},Qs=()=>{if(console.log("[v0] Scheduling product launch:",{product:a,activationDate:He,deactivationDate:fs}),!He){alert("Por favor, defina a data de ativação");return}Ze(),gs(!1),js(""),vs("")},_s=(s,t)=>{console.log("[v0] Toggle clicked:",{productId:s.id,productName:s.name,currentStatus:s.isActive,newStatus:t}),Ne({product:s,newStatus:t})},$s=async()=>{if(j.product){console.log("[v0] Confirming toggle:",{productId:j.product.id,productName:j.product.name,newStatus:j.newStatus});try{await Fe(j.product.id,{...j.product,isActive:j.newStatus,updatedAt:new Date().toISOString()}),console.log("[v0] Toggle success:",{productId:j.product.id,newStatus:j.newStatus}),Y({title:"Sucesso",description:`Produto ${j.newStatus?"ativado":"desativado"} com sucesso`})}catch(s){console.error("[v0] Toggle error:",s),Y({title:"Erro",description:"Erro ao atualizar status do produto",variant:"destructive"})}finally{Ne({product:null,newStatus:!1})}}},oe=[ee!=="all",se!=="all",_!=="all",E!==""].filter(Boolean).length;return e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx(pa,{title:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Produtos"}),description:"Gerencie seu catálogo de produtos e serviços",actions:e.jsxs(d,{onClick:Ge,size:"sm",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0",children:[e.jsx(S,{className:"h-3.5 w-3.5 mr-1.5"}),"Novo Produto"]})}),e.jsx(Ae,{type:"single",collapsible:!0,className:"mb-1",children:e.jsxs(Se,{value:"stats",className:"border rounded-lg bg-blue-50 border-blue-200",children:[e.jsx(Pe,{className:"text-sm font-semibold hover:no-underline px-4 py-3 hover:bg-blue-100 rounded-t-lg transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-900",children:"Estatísticas de Produtos"})]})}),e.jsx(De,{className:"pt-2 px-4 pb-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:[e.jsx(P,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0",children:e.jsx(D,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-90",children:"Total de Produtos"}),e.jsx("p",{className:"text-2xl font-bold mt-0.5",children:k.length})]}),e.jsx("div",{className:"h-9 w-9 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(de,{className:"h-5 w-5"})})]})})}),e.jsx(P,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0",children:e.jsx(D,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-90",children:"Total de Tarefas"}),e.jsx("p",{className:"text-2xl font-bold mt-0.5",children:k.reduce((s,t)=>s+(t.tasks||[]).length,0)})]}),e.jsx("div",{className:"h-9 w-9 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(Ce,{className:"h-5 w-5"})})]})})}),e.jsx(P,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0",children:e.jsx(D,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-90",children:"Horas Estimadas"}),e.jsxs("p",{className:"text-2xl font-bold mt-0.5",children:[k.reduce((s,t)=>s+We(t),0),"h"]})]}),e.jsx("div",{className:"h-9 w-9 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(ke,{className:"h-5 w-5"})})]})})}),e.jsx(P,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white border-0",children:e.jsx(D,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-90",children:"Receita Total"}),e.jsx("p",{className:"text-2xl font-bold mt-0.5",children:p(k.reduce((s,t)=>s+(t.finalPrice||0),0))})]}),e.jsx("div",{className:"h-9 w-9 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(Ks,{className:"h-5 w-5"})})]})})})]})})]})}),e.jsx(P,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"Buscar produtos...",value:E,onChange:s=>Ee(s.target.value),className:"pl-10 h-9"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(d,{variant:pe?"default":"outline",onClick:()=>cs(!pe),size:"sm",className:"gap-2 flex-1 sm:flex-initial",children:[e.jsx(Aa,{className:"h-3.5 w-3.5"}),"Filtros",oe>0&&e.jsx(m,{variant:"secondary",className:"ml-1 h-4 w-4 p-0 flex items-center justify-center text-xs",children:oe})]}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(d,{variant:he==="grid"?"default":"ghost",size:"sm",onClick:()=>ze("grid"),className:"rounded-r-none h-8 px-3",children:e.jsx(ga,{className:"h-3.5 w-3.5"})}),e.jsx(d,{variant:he==="list"?"default":"ghost",size:"sm",onClick:()=>ze("list"),className:"rounded-l-none h-8 px-3",children:e.jsx(ya,{className:"h-3.5 w-3.5"})})]})]})]}),pe&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-2 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Categoria"}),e.jsxs(b,{value:se,onValueChange:Ve,children:[e.jsx(y,{className:"h-8 text-xs",children:e.jsx(w,{placeholder:"Todas"})}),e.jsxs(C,{children:[e.jsx(x,{value:"all",children:"Todas as Categorias"}),ws.map(s=>e.jsx(x,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Área"}),e.jsxs(b,{value:ee,onValueChange:Oe,children:[e.jsx(y,{className:"h-8 text-xs",children:e.jsx(w,{placeholder:"Todas"})}),e.jsxs(C,{children:[e.jsx(x,{value:"all",children:"Todas as Áreas"}),ys.map(s=>e.jsx(x,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Status"}),e.jsxs(b,{value:_,onValueChange:Le,children:[e.jsx(y,{className:"h-8 text-xs",children:e.jsx(w,{placeholder:"Todos"})}),e.jsxs(C,{children:[e.jsx(x,{value:"all",children:"Todos os Status"}),e.jsx(x,{value:"active",children:"Ativos"}),e.jsx(x,{value:"inactive",children:"Inativos"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Ordenar por"}),e.jsxs(b,{value:Re,onValueChange:ns,children:[e.jsx(y,{className:"h-8 text-xs",children:e.jsx(w,{})}),e.jsxs(C,{children:[e.jsx(x,{value:"name",children:"Nome (A-Z)"}),e.jsx(x,{value:"id",children:"ID"}),e.jsx(x,{value:"price-asc",children:"Preço (Menor)"}),e.jsx(x,{value:"price-desc",children:"Preço (Maior)"})]})]})]}),oe>0&&e.jsx("div",{className:"sm:col-span-2 xl:col-span-4 flex justify-end",children:e.jsxs(d,{variant:"outline",onClick:()=>{Ee(""),Oe("all"),Ve("all"),Le("all")},size:"sm",className:"gap-2 h-8",children:[e.jsx(M,{className:"h-3.5 w-3.5"}),"Limpar Filtros"]})})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-1",children:e.jsxs("span",{children:[ce.length," ",ce.length===1?"produto encontrado":"produtos encontrados"]})})]})})}),ce.length===0?e.jsx(P,{children:e.jsxs(D,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(de,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"text-muted-foreground text-center mb-6 max-w-md",children:E||oe>0?"Tente ajustar os filtros ou busca para encontrar o que procura.":"Comece criando seu primeiro produto para gerenciar seu catálogo."}),e.jsxs(d,{onClick:Ge,className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Criar Primeiro Produto"]})]})}):e.jsx("div",{className:he==="grid"?"grid grid-cols-1 xl:grid-cols-2 gap-4":"space-y-4",children:ce.map(s=>e.jsxs(P,{className:"group hover:shadow-md transition-all",children:[e.jsx(Xs,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0",children:e.jsx(de,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Zs,{className:"text-lg truncate",children:s.name}),e.jsx(Js,{className:"line-clamp-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(m,{variant:"outline",className:"font-normal",children:s.category}),e.jsx(m,{variant:s.isActive?"default":"secondary",className:"font-normal",children:s.isActive?"Ativo":"Inativo"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:p(s.finalPrice||0)})]})]}),e.jsx("div",{className:"flex flex-col gap-2 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full transition-all ${s.isActive?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-slate-50 text-slate-500 border border-slate-200"}`,children:[e.jsx(Ia,{className:`h-3.5 w-3.5 ${s.isActive?"text-emerald-600":"text-slate-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:s.isActive?"Ativo":"Inativo"})]}),e.jsx(U,{checked:s.isActive,onCheckedChange:t=>_s(s,t),className:"data-[state=checked]:bg-emerald-500"})]}),e.jsx(Ys,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(Ye,{children:[e.jsx(es,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>Is(s),className:"h-8 w-8 hover:bg-blue-50 hover:text-blue-600",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsx(as,{children:e.jsx("p",{children:"Ver detalhes"})})]}),e.jsxs(Ye,{children:[e.jsx(es,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>ks(s),className:"h-8 w-8 hover:bg-amber-50 hover:text-amber-600",children:e.jsx(ja,{className:"h-4 w-4"})})}),e.jsx(as,{children:e.jsx("p",{children:"Editar produto"})})]})]})})]})})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.tasks.length," tarefas"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:[We(s),"h"]})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>{$(s),ge(!0)},className:"ml-auto h-8 text-xs gap-1",children:[e.jsx(ts,{className:"h-3 w-3"}),"Ver Cálculo"]})]}),e.jsx(Ae,{type:"single",collapsible:!0,children:e.jsxs(Se,{value:"tasks",className:"border-0",children:[e.jsx(Pe,{className:"py-2 hover:no-underline",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(is,{className:"h-4 w-4"}),"Tarefas e Etapas (",s.tasks.length,")"]})}),e.jsx(De,{className:"pb-0",children:e.jsx("div",{className:"space-y-2 pt-2",children:(s.tasks||[]).map((t,l)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-muted/30",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 text-xs font-bold",children:l+1}),e.jsx("h4",{className:"font-semibold",children:t.name}),t.canRunInParallel&&e.jsx(m,{variant:"outline",className:"text-xs",children:"Paralela"}),e.jsx(m,{className:"text-xs bg-green-100 text-green-800",children:p(t.calculatedCost)})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-8",children:t.description})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{Ue(t),ae(!0)},children:e.jsx(ss,{className:"h-4 w-4"})})]}),t.dependencies.length>0&&e.jsx("div",{className:"flex items-center gap-4 text-sm ml-8",children:e.jsxs(m,{className:`text-xs ${Cs(t.dependencies)}`,children:["Depende de ",t.dependencies.length," tarefa(s)"]})}),e.jsxs("div",{className:"ml-8 space-y-2",children:[e.jsxs("div",{className:"text-xs font-medium text-muted-foreground",children:["Etapas (",(t.steps||[]).length,"):"]}),e.jsx("div",{className:"space-y-2",children:(t.steps||[]).map(n=>{const h=ue.find(W=>W.id===n.specialty);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("span",{className:"text-xs font-semibold text-muted-foreground",children:[n.order,"."]}),e.jsx("span",{className:"text-sm",children:n.name}),h&&e.jsx(m,{variant:"outline",className:"text-xs",children:h.name}),n.experienceLevel&&e.jsx(m,{variant:"secondary",className:"text-xs",children:n.experienceLevel})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.estimatedHours,"h"]}),e.jsx("span",{className:"text-xs font-semibold text-green-600",children:p(n.calculatedCost)})]})]},n.id)})})]}),t.questionnaire&&e.jsx("div",{className:"ml-8 pt-2 border-t",children:e.jsxs(d,{variant:"outline",size:"sm",className:"text-xs bg-transparent",onClick:()=>{Qe(t.questionnaire),te(!0)},children:[e.jsx(rs,{className:"h-3 w-3 mr-1"}),"Ver Questionário (",t.questionnaire.questions.length," perguntas)",e.jsx(ea,{className:"h-3 w-3 ml-1"})]})})]},t.id))})})]})})]})]},s.id))}),e.jsx(xa,{open:j.product!==null,onClose:()=>Ne({product:null,newStatus:!1}),onConfirm:$s,title:j.newStatus?"Ativar Produto":"Desativar Produto",message:j.newStatus?`Tem certeza que deseja ativar o produto "${j.product?.name}"? Ele ficará visível para os clientes.`:`Tem certeza que deseja desativar o produto "${j.product?.name}"? Ele não ficará mais visível para os clientes.`,confirmText:j.newStatus?"Ativar":"Desativar",destructive:!j.newStatus}),e.jsx(K,{open:Ns,onOpenChange:ie,children:e.jsxs(G,{className:"max-w-lg",children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(sa,{className:"h-5 w-5"}),"Editar Preço Manualmente"]}),e.jsx(J,{children:"Digite a senha de administrador para editar o preço do produto"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Senha"}),e.jsx(u,{type:"password",placeholder:"Digite a senha",value:Be,onChange:s=>fe(s.target.value)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"O preço é calculado automaticamente com base nas tarefas, especialidades e custos. Apenas administradores podem editá-lo manualmente."})]}),e.jsxs(me,{children:[e.jsx(d,{variant:"outline",onClick:()=>ie(!1),children:"Cancelar"}),e.jsx(d,{onClick:Fs,children:"Confirmar"})]})]})}),e.jsx(K,{open:us,onOpenChange:ge,children:e.jsxs(G,{className:"max-w-3xl max-h-[90vh]",children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5"}),"Cálculo Detalhado de Preço"]}),e.jsx(J,{children:"Breakdown completo dos custos e margens do produto"})]}),g&&e.jsx(Ie,{className:"max-h-[70vh]",children:e.jsxs("div",{className:"space-y-6 pr-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:g.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Custos por Tarefa e Etapa"}),(g.tasks||[]).map((s,t)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 text-xs font-bold flex-shrink-0",children:s.order||t+1}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx("span",{className:"font-semibold text-green-600",children:p(s.calculatedCost)})]}),e.jsx("div",{className:"ml-8 space-y-2",children:(s.steps||[]).map(l=>{const n=ue.find(W=>W.id===l.specialty),h=n&&l.experienceLevel?n.rates[l.experienceLevel]:0;return e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[l.order,"."]}),e.jsx("span",{children:l.name}),n&&e.jsx(m,{variant:"outline",className:"text-xs",children:n.name}),l.experienceLevel&&e.jsx(m,{variant:"secondary",className:"text-xs",children:l.experienceLevel})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.estimatedHours,"h × ",p(h)," ="," ",p(l.calculatedCost)]})]},l.id)})})]},s.id))]}),e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Breakdown de Preço"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsx("span",{className:"text-sm",children:"Custo Total das Tarefas (Nômades)"}),e.jsx("span",{className:"font-semibold",children:p(g.totalTasksCost)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-950 rounded border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"Taxa de Qualificação"}),e.jsxs(m,{variant:"outline",className:"text-xs",children:[(Me.QUALIFICATION_FEE*100).toFixed(0),"% sobre custos"]})]}),e.jsx("span",{className:"font-semibold",children:p(g.qualificationFee)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-950 rounded border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Subtotal"}),e.jsx("span",{className:"font-bold text-lg",children:p(g.subtotal)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"Impostos"}),e.jsxs(m,{variant:"outline",className:"text-xs",children:[(Me.TAXES*100).toFixed(0),"%"]})]}),e.jsx("span",{className:"font-semibold",children:p(g.taxes)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"Taxa Operacional"}),e.jsxs(m,{variant:"outline",className:"text-xs",children:[(Me.OPERATIONAL_FEE*100).toFixed(0),"%"]})]}),e.jsx("span",{className:"font-semibold",children:p(g.operationalFee)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-100 dark:bg-green-950 rounded-lg border-2 border-green-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-base font-bold",children:"Preço Final"})]}),e.jsx("span",{className:"font-bold text-2xl text-green-600",children:p(g.finalPrice)})]})]})]})]})}),e.jsxs(me,{children:[e.jsx(d,{variant:"outline",onClick:()=>ge(!1),children:"Fechar"}),e.jsxs(d,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Editar Tarefa"]})]})]})}),e.jsx(K,{open:ms,onOpenChange:ae,children:e.jsxs(G,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Detalhes da Tarefa"]}),e.jsx(J,{children:"Informações completas sobre a tarefa"})]}),f&&e.jsx(Ie,{className:"max-h-[70vh]",children:e.jsxs("div",{className:"space-y-6 pr-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:f.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),e.jsxs(m,{className:"mt-2 bg-green-100 text-green-800",children:["Custo Total: ",p(f.calculatedCost)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"Execução Paralela"}),e.jsx("p",{className:"font-medium",children:f.canRunInParallel?"Sim":"Não"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"Total de Horas"}),e.jsxs("p",{className:"font-medium",children:[f.steps.reduce((s,t)=>s+t.estimatedHours,0),"h"]})]})]}),f.dependencies.length>0&&e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Dependências"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Esta tarefa depende da conclusão de ",f.dependencies.length," tarefa(s) anterior(es)"]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold mb-3 block",children:"Etapas da Tarefa"}),e.jsx("div",{className:"space-y-3",children:f.steps.map(s=>{const t=ue.find(n=>n.id===s.specialty),l=t&&s.experienceLevel?t.rates[s.experienceLevel]:0;return e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-700 font-bold text-sm flex-shrink-0",children:s.order}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[t&&e.jsx(m,{variant:"outline",className:"text-xs",children:t.name}),s.experienceLevel&&e.jsx(m,{variant:"secondary",className:"text-xs",children:s.experienceLevel}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.estimatedHours,"h"]})]}),e.jsxs("span",{className:"text-xs font-semibold text-green-600",children:[s.estimatedHours,"h × ",p(l)," ="," ",p(s.calculatedCost)]})]})]})]},s.id)})})]}),f.questionnaire&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Questionário Associado"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>{Qe(f.questionnaire),te(!0)},children:["Ver Completo",e.jsx(ta,{className:"h-4 w-4 ml-1"})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium",children:f.questionnaire.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.questionnaire.description}),e.jsxs(m,{variant:"secondary",className:"mt-2",children:[f.questionnaire.questions.length," perguntas"]})]})]})]})}),e.jsxs(me,{children:[e.jsx(d,{variant:"outline",onClick:()=>ae(!1),children:"Fechar"}),e.jsxs(d,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Editar Tarefa"]})]})]})}),e.jsx(K,{open:xs,onOpenChange:te,children:e.jsxs(G,{className:"max-w-3xl max-h-[90vh]",children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-5 w-5"}),"Questionário para Cliente/Agência"]}),e.jsx(J,{children:"Questionário que será respondido antes do início da tarefa"})]}),H&&e.jsx(Ie,{className:"max-h-[70vh]",children:e.jsxs("div",{className:"space-y-6 pr-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:H.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:H.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(i,{className:"text-sm font-semibold",children:["Perguntas (",H.questions.length,")"]}),H.questions.map((s,t)=>e.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-purple-100 text-purple-700 text-sm font-bold flex-shrink-0",children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"font-medium",children:s.question}),s.required&&e.jsx(m,{variant:"destructive",className:"text-xs",children:"Obrigatória"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(m,{variant:"outline",className:"text-xs",children:[s.type==="text"&&"Texto curto",s.type==="multiline"&&"Texto longo",s.type==="select"&&"Seleção única",s.type==="multiselect"&&"Múltipla escolha",s.type==="file"&&"Upload de arquivo"]}),s.aiAssisted&&e.jsxs(m,{className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),"IA Assistida"]})]}),s.options&&s.options.length>0&&e.jsxs("div",{className:"mt-3 pl-4 border-l-2 border-muted",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Opções:"}),e.jsx("div",{className:"space-y-1",children:s.options.map((l,n)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ra,{className:"h-3 w-3 text-muted-foreground"}),l]},n))})]})]})]})},s.id))]})]})}),e.jsxs(me,{children:[e.jsx(d,{variant:"outline",onClick:()=>te(!1),children:"Fechar"}),e.jsxs(d,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Editar Questionário"]})]})]})}),e.jsx(K,{open:hs,onOpenChange:le,children:e.jsxs(G,{className:"max-w-lg p-0 gap-0",children:[e.jsxs(X,{className:"px-6 py-4 border-b bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30",children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 shadow-lg",children:e.jsx(ls,{className:"h-4 w-4 text-white"})}),"Como deseja importar o modelo?"]}),e.jsx(J,{children:"Escolha se deseja vincular ao modelo original ou criar uma cópia independente"})]}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("button",{onClick:()=>{if(_e("linked"),le(!1),r){const s={id:Date.now().toString(),name:r.name,description:r.description,templateId:r.id,isLinkedToTemplate:!0,order:(a.tasks||[]).length+1,canRunInParallel:!1,steps:r.steps||[],code:r.code||`LINKED-${r.id}`,specialty:r.specialty||"",executionTime:r.executionTime||0,executionDeadline:r.executionDeadline||0,deliveryDeadline:r.deliveryDeadline||0,adjustmentDeadline:r.adjustmentDeadline||0,approvalDeadline:r.approvalDeadline||0,automaticValue:r.automaticValue||0,attentionText:r.attentionText||"",pop:r.pop||"",complementaryFiles:r.complementaryFiles||[],verificationItems:r.verificationItems||[],keepNextStepWithNomadLeader:r.keepNextStepWithNomadLeader||!1,delegateToLeader:r.delegateToLeader||!1,liberateAfterSend:r.liberateAfterSend||!1,requireFinalFiles:r.requireFinalFiles||!1,isInternalStep:r.isInternalStep||!1,concludeOnRejection:r.concludeOnRejection||!1,hideFromClient:r.hideFromClient||!1,hasVariations:r.hasVariations||!1,noConditions:r.noConditions||!1,showAccess:r.showAccess||!1,hideInProducts:r.hideInProducts||!1,dontCountDeadline:r.dontCountDeadline||!1,dontCountValue:r.dontCountValue||!1,hasAdditionals:r.hasAdditionals||!1,calculatedCost:r.calculatedCost||0,dependencies:r.dependencies||[]};c({...a,tasks:[...a.tasks||[],s]}),$e(null)}},className:"w-full p-4 rounded-lg border-2 border-blue-200 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-950/30 transition-all group text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:e.jsx(Ca,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Vincular ao Modelo Original"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"As alterações feitas no modelo original serão refletidas automaticamente neste produto"})]})]})}),e.jsx("button",{onClick:()=>{if(_e("copy"),le(!1),r){const s={id:Date.now().toString(),name:`${r.name} (Cópia)`,description:r.description,templateId:null,isLinkedToTemplate:!1,order:(a.tasks||[]).length+1,canRunInParallel:r.canRunInParallel||!1,steps:r.steps||[],code:`COPY-${Date.now().toString().slice(-6)}`,specialty:r.specialty||"",executionTime:r.executionTime||0,executionDeadline:r.executionDeadline||0,deliveryDeadline:r.deliveryDeadline||0,adjustmentDeadline:r.adjustmentDeadline||0,approvalDeadline:r.approvalDeadline||0,automaticValue:r.automaticValue||0,attentionText:r.attentionText||"",pop:r.pop||"",complementaryFiles:r.complementaryFiles||[],verificationItems:r.verificationItems||[],keepNextStepWithNomadLeader:r.keepNextStepWithNomadLeader||!1,delegateToLeader:r.delegateToLeader||!1,liberateAfterSend:r.liberateAfterSend||!1,requireFinalFiles:r.requireFinalFiles||!1,isInternalStep:r.isInternalStep||!1,concludeOnRejection:r.concludeOnRejection||!1,hideFromClient:r.hideFromClient||!1,hasVariations:r.hasVariations||!1,noConditions:r.noConditions||!1,showAccess:r.showAccess||!1,hideInProducts:r.hideInProducts||!1,dontCountDeadline:r.dontCountDeadline||!1,dontCountValue:r.dontCountValue||!1,hasAdditionals:r.hasAdditionals||!1,calculatedCost:r.calculatedCost||0,dependencies:r.dependencies||[]};c({...a,tasks:[...a.tasks||[],s]}),$e(null)}},className:"w-full p-4 rounded-lg border-2 border-purple-200 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-950/30 transition-all group text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30 group-hover:bg-purple-200 dark:group-hover:bg-purple-900/50 transition-colors",children:e.jsx(ia,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Criar Cópia Independente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Criar uma cópia que pode ser editada livremente sem afetar o modelo original"})]})]})})]}),e.jsx("div",{className:"flex justify-end px-6 py-4 border-t",children:e.jsx(d,{variant:"ghost",onClick:()=>le(!1),children:"Cancelar"})})]})}),e.jsx(na,{open:os,onOpenChange:O,children:e.jsxs(ca,{side:"right",className:"w-full sm:max-w-4xl p-0 left-[240px] flex flex-col",children:[e.jsx("div",{className:"px-6 py-3 border-b bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30 flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-blue-500 shadow-md",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-base font-bold",children:[g?"Editar Produto":"Criar Novo Produto"," "]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Preencha as informações abaixo"})]})]})})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-6",children:e.jsxs(oa,{defaultValue:"info",className:"space-y-3",children:[e.jsxs(da,{className:"w-full justify-start bg-muted/50 p-1",children:[e.jsx(q,{value:"info",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Informações"}),e.jsx(q,{value:"apresentacao",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Apresentação"}),e.jsx(q,{value:"descricao",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Descrição"}),e.jsx(q,{value:"solicitar",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Solicitação"}),e.jsx(q,{value:"tarefas",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Tarefas"}),e.jsx(q,{value:"customizacao",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Opções"}),e.jsx(q,{value:"questionario",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white text-xs",children:"Questionário"})]}),e.jsxs(F,{value:"info",className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"ID do Produto"}),e.jsx(u,{value:a.productId||g?.id||`PROD-${Date.now().toString().slice(-6)}`,readOnly:!0,className:"text-xs bg-muted"})]}),e.jsxs("div",{className:"col-span-2 space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsxs(i,{className:"text-xs font-semibold",children:["Nome do Produto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{placeholder:"Ex: Pauta de Conteúdo com 20 temas",value:a.name,onChange:s=>c({...a,name:s.target.value}),className:"text-xs"})]})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Imagens do Produto"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[e.jsx("div",{className:"relative w-full aspect-square rounded-lg border-2 border-dashed border-blue-300 flex items-center justify-center bg-blue-50 dark:bg-blue-950/30 overflow-hidden hover:border-blue-500 transition-colors",children:a.productImagePreview||g?.productImagePreview?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a.productImagePreview||g?.productImagePreview||"/placeholder.svg",alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(m,{className:"absolute top-1 left-1 text-xs",children:"Principal"})]}):e.jsxs("label",{className:"cursor-pointer w-full h-full flex items-center justify-center",children:[e.jsx(fa,{className:"h-8 w-8 text-blue-400"}),e.jsx("input",{type:"file",accept:"image/*",onChange:As,className:"hidden"})]})}),I.map((s,t)=>e.jsxs("div",{className:"relative w-full aspect-square rounded-lg border overflow-hidden group",children:[e.jsx("img",{src:s||"/placeholder.svg",alt:`Adicional ${t+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>Ps(t),className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"h-3 w-3"})})]},t)),I.length<5&&e.jsxs("label",{className:"w-full aspect-square rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:border-gray-400 transition-colors",children:[e.jsx(S,{className:"h-6 w-6 text-gray-400"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Ss,className:"hidden"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Adicione até 6 imagens. A primeira será a principal."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsxs(i,{className:"text-xs font-semibold",children:["Categoria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(b,{value:a.category,onValueChange:s=>c({...a,category:s}),children:[e.jsx(y,{className:"text-xs h-8",children:e.jsx(w,{placeholder:"Selecione"})}),e.jsxs(C,{children:[e.jsx(x,{value:"Mídias e Conteúdo",children:"Mídias e Conteúdo"}),e.jsx(x,{value:"Design",children:"Design"}),e.jsx(x,{value:"Desenvolvimento",children:"Desenvolvimento"}),e.jsx(x,{value:"Marketing",children:"Marketing"})]})]})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Recorrência"}),e.jsxs(b,{value:a.recurrence,onValueChange:s=>c({...a,recurrence:s}),children:[e.jsx(y,{className:"text-xs h-8",children:e.jsx(w,{placeholder:"Selecione"})}),e.jsxs(C,{children:[e.jsx(x,{value:"Avulso",children:"Avulso"}),e.jsx(x,{value:"Mensal",children:"Mensal"}),e.jsx(x,{value:"Avulso e Mensal",children:"Avulso e Mensal"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsxs(i,{className:"text-xs font-semibold",children:["Preço (Calculado) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{placeholder:"R$ 0,00",value:a.price||p(Ke()),readOnly:!0,className:"text-xs h-8 bg-green-50 dark:bg-green-950/20 font-semibold"}),e.jsx(d,{size:"sm",variant:"outline",onClick:qs,className:"h-8 px-2 bg-transparent",title:`Editar preço
manual`,children:e.jsx(xe,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsxs(i,{className:"text-xs font-semibold",children:["Dias de Entrega ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{type:"number",placeholder:"Ex: 5",value:a.deliveryDays,onChange:s=>c({...a,deliveryDays:s.target.value}),className:"text-xs h-8",min:"0"})]})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.tags.map(s=>e.jsxs(m,{variant:"outline",className:"text-xs font-normal cursor-pointer group",children:[s,e.jsx("button",{onClick:()=>Ms(s),className:"ml-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"h-3 w-3"})})]},s)),e.jsx(u,{value:re,onChange:s=>je(s.target.value),onKeyDown:Ds,placeholder:"Adicionar tag...",className:"h-7 w-auto text-xs border-dashed flex-grow"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pressione Enter para adicionar tags."})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Subcategorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.subcategories.map(s=>e.jsxs(m,{variant:"secondary",className:"text-xs font-normal cursor-pointer group",children:[s,e.jsx("button",{onClick:()=>Xe(s),className:"ml-2 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"h-3 w-3"})})]},s))}),e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:bs.filter(s=>!a.subcategories.includes(s)).map(s=>e.jsx(d,{variant:"outline",size:"sm",onClick:()=>Xe(s),className:"text-xs h-7",children:s},s))})]})]}),e.jsxs(F,{value:"apresentacao",className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsxs(i,{className:"text-xs font-semibold",children:["Vídeo de Apresentação (URL)",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{placeholder:"Ex: https://www.youtube.com/watch?v=...",value:a.deliveryVideoUrl,onChange:s=>c({...a,deliveryVideoUrl:s.target.value}),className:"text-xs"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Texto de Apresentação"}),e.jsx(v,{placeholder:"Descreva o que o produto faz e seus principais benefícios.",value:a.presentation,onChange:s=>c({...a,presentation:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Benefícios Chave"}),e.jsx(v,{placeholder:"Liste os principais benefícios do produto para o cliente.",value:a.benefits,onChange:s=>c({...a,benefits:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Informações Adicionais"}),e.jsx(v,{placeholder:"Informações técnicas ou de uso que não se encaixam em outras seções.",value:a.information,onChange:s=>c({...a,information:s.target.value}),className:"text-xs min-h-[100px]"})]})]}),e.jsxs(F,{value:"descricao",className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsxs(i,{className:"text-xs font-semibold",children:["Descrição Detalhada",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{placeholder:"Uma descrição completa do produto, incluindo escopo, objetivos e o que o cliente receberá.",value:a.description,onChange:s=>c({...a,description:s.target.value}),className:"text-xs min-h-[150px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Atenção na Descrição"}),e.jsx(v,{placeholder:"Qualquer informação importante que o cliente deve saber antes de comprar.",value:a.descriptionAttention,onChange:s=>c({...a,descriptionAttention:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Resumo da Descrição"}),e.jsx(v,{placeholder:"Um resumo conciso para listagens rápidas ou prévias.",value:a.summaryDescription,onChange:s=>c({...a,summaryDescription:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Itens Inclusos"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.includedItems.map((s,t)=>e.jsxs(m,{variant:"outline",className:"text-xs font-normal cursor-pointer group",children:[s,e.jsx("button",{onClick:()=>c({...a,includedItems:a.includedItems.filter((l,n)=>n!==t)}),className:"ml-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"h-3 w-3"})})]},t)),e.jsx(u,{placeholder:"Adicionar item incluso...",onKeyDown:s=>{s.key==="Enter"&&s.currentTarget.value.trim()&&(s.preventDefault(),c({...a,includedItems:[...a.includedItems,s.currentTarget.value.trim()]}),s.currentTarget.value="")},className:"h-7 w-auto text-xs border-dashed flex-grow"})]})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Itens Não Inclusos"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.notIncludedItems.map((s,t)=>e.jsxs(m,{variant:"outline",className:"text-xs font-normal cursor-pointer group",children:[s,e.jsx("button",{onClick:()=>c({...a,notIncludedItems:a.notIncludedItems.filter((l,n)=>n!==t)}),className:"ml-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"h-3 w-3"})})]},t)),e.jsx(u,{placeholder:"Adicionar item não incluso...",onKeyDown:s=>{s.key==="Enter"&&s.currentTarget.value.trim()&&(s.preventDefault(),c({...a,notIncludedItems:[...a.notIncludedItems,s.currentTarget.value.trim()]}),s.currentTarget.value="")},className:"h-7 w-auto text-xs border-dashed flex-grow"})]})]})]}),e.jsxs(F,{value:"solicitar",className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"O que solicitar para o cliente?"}),e.jsx(v,{placeholder:"Ex: Arquivo com o logo em vetor, Briefing detalhado, etc.",value:a.requestAttention,onChange:s=>c({...a,requestAttention:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Contrato de Pagamento Único"}),e.jsx(v,{placeholder:"Termos específicos para pagamentos únicos.",value:a.oneTimeContract,onChange:s=>c({...a,oneTimeContract:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Contrato Mensal"}),e.jsx(v,{placeholder:"Termos específicos para contratos mensais.",value:a.monthlyContract,onChange:s=>c({...a,monthlyContract:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Contratos Anteriores"}),e.jsx(v,{placeholder:"Informações sobre contratos prévios que este produto pode substituir ou complementar.",value:a.previousContracts,onChange:s=>c({...a,previousContracts:s.target.value}),className:"text-xs min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Itens Excluídos"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.excludedItems.map((s,t)=>e.jsxs(m,{variant:"outline",className:"text-xs font-normal cursor-pointer group",children:[s,e.jsx("button",{onClick:()=>c({...a,excludedItems:a.excludedItems.filter((l,n)=>n!==t)}),className:"ml-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"h-3 w-3"})})]},t)),e.jsx(u,{placeholder:"Adicionar item excluído...",onKeyDown:s=>{s.key==="Enter"&&s.currentTarget.value.trim()&&(s.preventDefault(),c({...a,excludedItems:[...a.excludedItems,s.currentTarget.value.trim()]}),s.currentTarget.value="")},className:"h-7 w-auto text-xs border-dashed flex-grow"})]})]})]}),e.jsxs(F,{value:"tarefas",className:"space-y-3 mt-3",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>ps(!0),className:"gap-1 text-xs",children:[e.jsx(ls,{className:"h-3.5 w-3.5"}),"Importar Tarefa de Modelo"]})}),e.jsx(Ae,{type:"multiple",className:"space-y-2",children:a.tasks.map((s,t)=>e.jsxs(Se,{value:s.id,className:"border rounded-lg px-4 py-2",children:[e.jsx(Pe,{className:"text-sm font-semibold hover:no-underline",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),s.name,e.jsx(m,{className:"text-xs bg-green-100 text-green-800",children:p(s.calculatedCost)})]})}),e.jsx(De,{children:e.jsxs("div",{className:"pt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(i,{className:"text-xs font-medium",children:"Nome da Tarefa"}),e.jsx(u,{value:s.name,onChange:l=>c({...a,tasks:a.tasks.map((n,h)=>h===t?{...n,name:l.target.value}:n)}),className:"text-xs h-8"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Ordem"}),e.jsx(u,{type:"number",value:s.order,onChange:l=>c({...a,tasks:a.tasks.map((n,h)=>h===t?{...n,order:Number.parseInt(l.target.value)}:n)}),className:"text-xs h-8 w-20"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Descrição"}),e.jsx(v,{value:s.description,onChange:l=>c({...a,tasks:a.tasks.map((n,h)=>h===t?{...n,description:l.target.value}:n)}),className:"text-xs min-h-[80px]"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{checked:s.canRunInParallel,onCheckedChange:l=>c({...a,tasks:a.tasks.map((n,h)=>h===t?{...n,canRunInParallel:l}:n)})}),e.jsx(i,{className:"text-xs font-medium",children:"Pode rodar em paralelo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{checked:s.isLinkedToTemplate||!1,onCheckedChange:l=>c({...a,tasks:a.tasks.map((n,h)=>h===t?{...n,isLinkedToTemplate:l}:n)})}),e.jsx(i,{className:"text-xs font-medium",children:"Vinculado a Modelo"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{variant:"outline",size:"sm",onClick:()=>{Ue(s),ae(!0)},className:"text-xs",children:"Gerenciar Etapas e Questionário"})}),e.jsx(d,{variant:"destructive",size:"sm",onClick:()=>c({...a,tasks:a.tasks.filter((l,n)=>n!==t)}),className:"text-xs",children:"Remover Tarefa"})]})})]},s.id))}),e.jsxs(d,{variant:"outline",className:"w-full h-9 text-xs gap-1 bg-transparent",onClick:()=>{c({...a,tasks:[...a.tasks,{id:Date.now().toString(),name:`Nova Tarefa ${a.tasks.length+1}`,description:"",specialty:"",executionTime:0,executionDeadline:0,deliveryDeadline:0,adjustmentDeadline:0,approvalDeadline:0,automaticValue:0,order:a.tasks.length+1,canRunInParallel:!1,steps:[],calculatedCost:0,dependencies:[],code:"",attentionText:"",pop:"",complementaryFiles:[],verificationItems:[],keepNextStepWithNomadLeader:!1,delegateToLeader:!1,liberateAfterSend:!1,requireFinalFiles:!1,isInternalStep:!1,concludeOnRejection:!1,hideFromClient:!1,hasVariations:!1,noConditions:!1,showAccess:!1,hideInProducts:!1,dontCountDeadline:!1,dontCountValue:!1,hasAdditionals:!1}]})},children:[e.jsx(S,{className:"h-3.5 w-3.5"}),"Adicionar Nova Tarefa"]})]}),e.jsxs(F,{value:"customizacao",className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Variações do Produto"}),T.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-4 gap-3 p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1.5 col-span-2",children:[e.jsx(i,{className:"text-xs font-medium",children:"Opção de Variação"}),e.jsx(u,{value:s.label,onChange:l=>ye(s.id,{label:l.target.value}),className:"text-xs h-8"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Quantidade"}),e.jsx(u,{type:"number",value:s.quantity,onChange:l=>ye(s.id,{quantity:Number.parseInt(l.target.value)||0}),className:"text-xs h-8",min:"0"})]}),e.jsx("div",{className:"space-y-1.5 flex flex-col justify-end",children:e.jsx(u,{type:"number",value:s.priceModifier,onChange:l=>ye(s.id,{priceModifier:Number.parseFloat(l.target.value)||0}),className:"text-xs h-8",placeholder:"+/- Preço"})}),e.jsx("button",{onClick:()=>Ls(s.id),className:"text-red-500 self-center justify-self-end",children:e.jsx(Te,{className:"h-4 w-4"})})]},s.id)),e.jsxs(d,{variant:"outline",size:"sm",onClick:Vs,className:"text-xs gap-1 bg-transparent",children:[e.jsx(S,{className:"h-3 w-3"}),"Adicionar Variação"]})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Add-ons"}),A.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-4 gap-3 p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1.5 col-span-2",children:[e.jsx(i,{className:"text-xs font-medium",children:"Nome do Add-on"}),e.jsx(u,{value:s.name,onChange:l=>we(s.id,{name:l.target.value}),className:"text-xs h-8"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Preço"}),e.jsx(u,{type:"number",value:s.price,onChange:l=>we(s.id,{price:Number.parseFloat(l.target.value)||0}),className:"text-xs h-8"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Categoria"}),e.jsxs(b,{value:s.category,onValueChange:l=>we(s.id,{category:l}),children:[e.jsx(y,{className:"text-xs h-8",children:e.jsx(w,{placeholder:"Selecione"})}),e.jsxs(C,{children:[e.jsx(x,{value:"creative_type",children:"Tipo Criativo"}),e.jsx(x,{value:"extra",children:"Extra"})]})]})]}),e.jsx("button",{onClick:()=>zs(s.id),className:"text-red-500 self-center justify-self-end",children:e.jsx(Te,{className:"h-4 w-4"})})]},s.id)),e.jsxs(d,{variant:"outline",size:"sm",onClick:Rs,className:"text-xs gap-1 bg-transparent",children:[e.jsx(S,{className:"h-3 w-3"}),"Adicionar Add-on"]})]})]}),e.jsxs(F,{value:"questionario",className:"space-y-3 mt-3",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Configure o Questionário"}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-medium",children:"Título do Questionário"}),e.jsx(u,{value:a.questionnaire.title,onChange:s=>c({...a,questionnaire:{...a.questionnaire,title:s.target.value}}),className:"text-xs h-8"})]}),e.jsxs("div",{className:"space-y-1.5 bg-card p-3 rounded-lg border",children:[e.jsx(i,{className:"text-xs font-medium",children:"Descrição do Questionário"}),e.jsx(v,{value:a.questionnaire.description,onChange:s=>c({...a,questionnaire:{...a.questionnaire,description:s.target.value}}),className:"text-xs min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Perguntas"}),N.map((s,t)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-purple-100 text-purple-700 text-sm font-bold flex-shrink-0",children:t+1}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(i,{className:"text-xs font-medium",children:"Pergunta"}),e.jsx(u,{value:s.question,onChange:l=>z(s.id,{question:l.target.value}),className:"text-xs h-8"})]})]}),e.jsx("button",{onClick:()=>Os(s.id),className:"text-red-500",children:e.jsx(Te,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Tipo de Resposta"}),e.jsxs(b,{value:s.type,onValueChange:l=>z(s.id,{type:l}),children:[e.jsx(y,{className:"text-xs h-8",children:e.jsx(w,{})}),e.jsxs(C,{children:[e.jsx(x,{value:"text",children:"Texto Curto"}),e.jsx(x,{value:"multiline",children:"Texto Longo"}),e.jsx(x,{value:"select",children:"Seleção Única"}),e.jsx(x,{value:"multiselect",children:"Múltipla Escolha"}),e.jsx(x,{value:"file",children:"Upload de Arquivo"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(i,{className:"text-xs font-medium",children:"Opções (para seleção)"}),e.jsx(u,{value:s.options?.join(", "),onChange:l=>z(s.id,{options:l.target.value.split(",").map(n=>n.trim()).filter(n=>n)}),placeholder:"Opção1, Opção2, ...",className:"text-xs h-8 disabled:opacity-50 disabled:cursor-not-allowed",disabled:s.type!=="select"&&s.type!=="multiselect"})]}),e.jsx("div",{className:"space-y-1.5 flex items-end",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{checked:s.required,onCheckedChange:l=>z(s.id,{required:l})}),e.jsx(i,{className:"text-xs font-medium",children:"Obrigatória"})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{checked:s.aiAssisted,onCheckedChange:l=>z(s.id,{aiAssisted:l})}),e.jsx(i,{className:"text-xs font-medium",children:"IA Assistida"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{checked:s.allowsAttachment,onCheckedChange:l=>z(s.id,{allowsAttachment:l})}),e.jsx(i,{className:"text-xs font-medium",children:"Permite Anexo"})]})]})]},s.id)),e.jsxs(d,{variant:"outline",size:"sm",onClick:Es,className:"text-xs gap-1 bg-transparent",children:[e.jsx(S,{className:"h-3 w-3"}),"Adicionar Pergunta"]})]})]})]})})}),e.jsxs(ma,{className:"flex-shrink-0 px-6 py-3 border-t",children:[e.jsx(d,{variant:"outline",onClick:Je,children:"Cancelar"}),e.jsx(d,{variant:"secondary",onClick:Us,children:"Salvar Rascunho"}),e.jsx(d,{onClick:Qs,children:"Agendar Lançamento"}),e.jsx(d,{onClick:Ze,className:"bg-gradient-to-r from-blue-500 to-purple-600",children:"Salvar Produto"})]})]})})]})}export{Za as default};
