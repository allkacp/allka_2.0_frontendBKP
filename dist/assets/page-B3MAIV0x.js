import{r as o,M as $,j as e,C as c,Y as F,U as C,a2 as w,y,D as A,ax as z,f as m,P as B,v as L,w as H,x as M,ae as O,af as n,ag as d,E as U,H as q,I as G,J,K as f,B as N,ap as K,bp as X,m as Y,ai as Z,Z as Q}from"./index-D2dOrPZ8.js";import{C as W}from"./confirmation-dialog-Bk9N8cdM.js";import{P as _}from"./page-header-DpITyWPC.js";import{C as D}from"./circle-x-D0uMI9ez.js";import{P as ee}from"./pencil-CsIdgWsW.js";import"./triangle-alert-Cjhkzg0C.js";function ne(){const[S,j]=o.useState(!1),[x,g]=o.useState(null),{toast:h}=$(),[s,r]=o.useState({name:"",commissionType:"fixed-first",commissionValue:0,minReferrals:1,maxReferrals:10,startDate:"",endDate:""}),[i,v]=o.useState({campaign:null,newStatus:!1}),R=a=>{g(a),r({name:a.name,commissionType:a.commissionType,commissionValue:a.commissionValue,minReferrals:a.minReferrals,maxReferrals:a.maxReferrals,startDate:a.startDate,endDate:a.endDate}),j(!0)},T=a=>{u(l.filter(t=>t.id!==a))},E=(a,t)=>{v({campaign:a,newStatus:t})},V=async()=>{if(i.campaign)try{u(a=>a.map(t=>t.id===i.campaign?.id?{...t,status:i.newStatus?"active":"paused"}:t)),h({title:"Sucesso",description:`Campanha ${i.newStatus?"ativada":"desativada"} com sucesso`})}catch{h({title:"Erro",description:"Erro ao atualizar status da campanha",variant:"destructive"})}finally{v({campaign:null,newStatus:!1})}},b=()=>{j(!1),g(null),r({name:"",commissionType:"fixed-first",commissionValue:0,minReferrals:1,maxReferrals:10,startDate:"",endDate:""})},P=()=>{if(x)u(l.map(a=>a.id===x.id?{...a,...s}:a)),h({title:"Sucesso",description:"Campanha atualizada com sucesso"});else{const a={id:String(l.length+1),...s,activeReferrals:0,totalEarned:0,status:"active"};u([...l,a]),h({title:"Sucesso",description:"Campanha criada com sucesso"})}b()},p=a=>a==="active",k=a=>({"fixed-first":"Valor fixo na primeira compra","per-referral":"Comissão por indicação ativa",percentage:"Porcentagem sobre vendas"})[a]||a,I=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),[l,u]=o.useState([{id:"1",name:"Programa de Indicação Básico",commissionType:"fixed-first",commissionValue:100,minReferrals:1,maxReferrals:10,activeReferrals:45,totalEarned:4500,status:"active",startDate:"2024-01-01",endDate:"2024-12-31"},{id:"2",name:"Indicação Premium",commissionType:"per-referral",commissionValue:50,minReferrals:1,maxReferrals:50,activeReferrals:123,totalEarned:6150,status:"active",startDate:"2024-01-01",endDate:"2024-12-31"},{id:"3",name:"Campanha de Verão",commissionType:"percentage",commissionValue:10,minReferrals:5,maxReferrals:100,activeReferrals:67,totalEarned:8900,status:"ended",startDate:"2023-12-01",endDate:"2024-03-31"}]);return e.jsxs("div",{className:"min-h-screen p-6 bg-slate-200 px-0 py-0",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(_,{title:"Campanhas de Indicação",description:"Configure e gerencie programas de indicação e comissões"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(c,{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(F,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-100 font-medium",children:"Campanhas Ativas"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.filter(a=>a.status==="active").length})]})]})}),e.jsx(c,{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(C,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-100 font-medium",children:"Indicações Ativas"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.reduce((a,t)=>a+t.activeReferrals,0)})]})]})}),e.jsx(c,{className:"p-4 bg-gradient-to-br from-violet-500 to-violet-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(w,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Total Pago"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["R$ ",l.reduce((a,t)=>a+t.totalEarned,0).toLocaleString()]})]})]})}),e.jsx(c,{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(y,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-100 font-medium",children:"Taxa de Conversão"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"42%"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Campanhas Cadastradas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gerencie todas as campanhas de indicação"})]}),e.jsxs(A,{open:S,onOpenChange:j,children:[e.jsx(z,{asChild:!0,children:e.jsxs(m,{className:"gap-2",onClick:()=>g(null),children:[e.jsx(B,{className:"h-4 w-4"}),"Nova Campanha"]})}),e.jsxs(L,{className:"max-w-2xl",children:[e.jsxs(H,{children:[e.jsx(M,{children:x?"Editar Campanha":"Criar Nova Campanha"}),e.jsx(O,{children:"Configure os parâmetros da campanha de indicação"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Nome da Campanha"}),e.jsx(d,{id:"name",placeholder:"Ex: Programa de Indicação Premium",value:s.name,onChange:a=>r({...s,name:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"commissionType",children:"Tipo de Comissão"}),e.jsxs(U,{value:s.commissionType,onValueChange:a=>r({...s,commissionType:a}),children:[e.jsx(q,{children:e.jsx(G,{placeholder:"Selecione"})}),e.jsxs(J,{children:[e.jsx(f,{value:"fixed-first",children:"Valor fixo na primeira compra"}),e.jsx(f,{value:"per-referral",children:"Comissão por indicação ativa"}),e.jsx(f,{value:"percentage",children:"Porcentagem sobre vendas"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"commissionValue",children:"Valor da Comissão"}),e.jsx(d,{id:"commissionValue",type:"number",placeholder:"Ex: 100",value:s.commissionValue,onChange:a=>r({...s,commissionValue:Number(a.target.value)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"minReferrals",children:"Mínimo de Indicações"}),e.jsx(d,{id:"minReferrals",type:"number",placeholder:"Ex: 1",value:s.minReferrals,onChange:a=>r({...s,minReferrals:Number(a.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"maxReferrals",children:"Máximo de Indicações"}),e.jsx(d,{id:"maxReferrals",type:"number",placeholder:"Ex: 50",value:s.maxReferrals,onChange:a=>r({...s,maxReferrals:Number(a.target.value)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"startDate",children:"Data de Início"}),e.jsx(d,{id:"startDate",type:"date",value:s.startDate,onChange:a=>r({...s,startDate:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"endDate",children:"Data de Término"}),e.jsx(d,{id:"endDate",type:"date",value:s.endDate,onChange:a=>r({...s,endDate:a.target.value})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:b,children:"Cancelar"}),e.jsx(m,{onClick:P,children:x?"Salvar Edição":"Criar Campanha"})]})]})]})]}),e.jsx("div",{className:"space-y-3",children:l.map(a=>e.jsx(c,{className:`p-4 hover:shadow-md transition-all border-l-4 ${a.status==="active"?"border-l-emerald-500":a.status==="ended"?"border-l-gray-400":"border-l-amber-500"} ${a.status!=="active"?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),a.status==="active"?e.jsxs(N,{variant:"outline",className:"text-xs font-medium bg-emerald-50 text-emerald-700 border-emerald-200",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Ativa"]}):a.status==="ended"?e.jsxs(N,{variant:"outline",className:"text-xs font-medium bg-gray-50 text-gray-600 border-gray-300",children:[e.jsx(D,{className:"h-3 w-3 mr-1"}),"Encerrada"]}):e.jsxs(N,{variant:"outline",className:"text-xs font-medium bg-amber-50 text-amber-600 border-amber-200",children:[e.jsx(D,{className:"h-3 w-3 mr-1"}),"Pausada"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(X,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:k(a.commissionType)})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(w,{className:"h-4 w-4 text-violet-500"}),e.jsx("span",{children:a.commissionType==="percentage"?`${a.commissionValue}%`:`R$ ${a.commissionValue}`})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(C,{className:"h-4 w-4 text-emerald-500"}),e.jsxs("span",{children:[a.activeReferrals," indicações ativas"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(y,{className:"h-4 w-4 text-amber-500"}),e.jsxs("span",{children:["R$ ",a.totalEarned.toLocaleString()," pagos"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Y,{className:"h-4 w-4 text-rose-500"}),e.jsxs("span",{children:["Válida até ",I(a.endDate)]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{checked:p(a.status),onCheckedChange:t=>E(a,t),className:p(a.status)?"data-[state=checked]:bg-emerald-500":"",disabled:a.status==="ended"}),e.jsx("span",{className:`text-xs font-medium ${p(a.status)?"text-emerald-600":"text-gray-500"}`,children:p(a.status)?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>R(a),className:"h-8",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>T(a.id),className:"text-red-600 h-8",children:e.jsx(Q,{className:"h-4 w-4"})})]})]})]})},a.id))})]}),e.jsx(W,{open:i.campaign!==null,onClose:()=>v({campaign:null,newStatus:!1}),onConfirm:V,title:i.newStatus?"Ativar Campanha":"Desativar Campanha",message:i.newStatus?`Tem certeza que deseja ativar a campanha "${i.campaign?.name}"? Ela ficará disponível para novos indicados.`:`Tem certeza que deseja desativar a campanha "${i.campaign?.name}"? Novas indicações não serão aceitas.`,confirmText:i.newStatus?"Ativar":"Desativar",destructive:!i.newStatus})]})}export{ne as default};
