import{r as m,M as U,bu as p,U as j,y as N,a2 as g,j as e,C as r,D as k,ax as L,f as o,P as V,v as A,w as $,x as R,ae as M,af as l,ag as d,E as f,H as C,I as w,J as y,K as c,B as x,ap as O,ao as z,m as B,ai as I,Z as H}from"./index-D2dOrPZ8.js";import{C as q}from"./confirmation-dialog-Bk9N8cdM.js";import{P as G}from"./page-header-DpITyWPC.js";import{P as W}from"./percent-DPygJ3Pl.js";import{C as J}from"./circle-x-D0uMI9ez.js";import{P as K}from"./pencil-CsIdgWsW.js";import"./triangle-alert-Cjhkzg0C.js";function te(){const[S,h]=m.useState(!1),[X,T]=m.useState(null),{toast:v}=U(),[t,u]=m.useState({coupon:null,newStatus:!1}),[i,b]=m.useState([{id:"1",code:"WELCOME20",discountType:"percentage",discountValue:20,validFrom:"2024-01-01",validUntil:"2024-12-31",usageLimit:1e3,usedCount:234,applicableProducts:["Todos os produtos"],status:"active"},{id:"2",code:"FIRST50",discountType:"fixed",discountValue:50,validFrom:"2024-01-01",validUntil:"2024-06-30",usageLimit:500,usedCount:456,applicableProducts:["Primeira compra"],status:"active"},{id:"3",code:"SUMMER2023",discountType:"percentage",discountValue:15,validFrom:"2023-06-01",validUntil:"2023-09-30",usageLimit:2e3,usedCount:1847,applicableProducts:["Todos os produtos"],status:"expired"}]);i.filter(s=>s.status==="active").length,p,i.reduce((s,a)=>s+a.usedCount,0),j,N,g;const D=s=>{T(s),h(!0)},F=s=>{b(i.filter(a=>a.id!==s))},P=(s,a)=>{u({coupon:s,newStatus:a})},E=async()=>{if(t.coupon)try{b(s=>s.map(a=>a.id===t.coupon?.id?{...a,status:t.newStatus?"active":"disabled"}:a)),v({title:"Sucesso",description:`Cupom ${t.newStatus?"ativado":"desativado"} com sucesso`})}catch{v({title:"Erro",description:"Erro ao atualizar status do cupom",variant:"destructive"})}finally{u({coupon:null,newStatus:!1})}},n=s=>s==="active";return e.jsxs("div",{className:"min-h-screen p-6 px-0 py-0 bg-slate-200",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(G,{title:"Promoções e Cupons",description:"Gerencie cupons de desconto e promoções da plataforma"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(r,{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(p,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-100 font-medium",children:"Cupons Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(s=>s.status==="active").length})]})]})}),e.jsx(r,{className:"p-4 bg-gradient-to-br from-violet-500 to-violet-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(j,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Total de Usos"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:i.reduce((s,a)=>s+a.usedCount,0)})]})]})}),e.jsx(r,{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(N,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-100 font-medium",children:"Taxa de Conversão"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"68%"})]})]})}),e.jsx(r,{className:"p-4 bg-gradient-to-br from-rose-500 to-rose-600 border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(g,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-rose-100 font-medium",children:"Desconto Médio"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"R$ 45"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cupons Cadastrados"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gerencie todos os cupons de desconto"})]}),e.jsxs(k,{open:S,onOpenChange:h,children:[e.jsx(L,{asChild:!0,children:e.jsxs(o,{className:"gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Novo Cupom"]})}),e.jsxs(A,{className:"max-w-2xl",children:[e.jsxs($,{children:[e.jsx(R,{children:"Criar Novo Cupom"}),e.jsx(M,{children:"Preencha os dados do cupom de desconto"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"code",children:"Código do Cupom"}),e.jsx(d,{id:"code",placeholder:"Ex: WELCOME20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"discountType",children:"Tipo de Desconto"}),e.jsxs(f,{children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Selecione"})}),e.jsxs(y,{children:[e.jsx(c,{value:"percentage",children:"Porcentagem"}),e.jsx(c,{value:"fixed",children:"Valor Fixo"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"discountValue",children:"Valor do Desconto"}),e.jsx(d,{id:"discountValue",type:"number",placeholder:"Ex: 20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"usageLimit",children:"Limite de Uso"}),e.jsx(d,{id:"usageLimit",type:"number",placeholder:"Ex: 1000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"validFrom",children:"Válido De"}),e.jsx(d,{id:"validFrom",type:"date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"validUntil",children:"Válido Até"}),e.jsx(d,{id:"validUntil",type:"date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"products",children:"Produtos Aplicáveis"}),e.jsxs(f,{children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Selecione os produtos"})}),e.jsxs(y,{children:[e.jsx(c,{value:"all",children:"Todos os produtos"}),e.jsx(c,{value:"first",children:"Primeira compra"}),e.jsx(c,{value:"specific",children:"Produtos específicos"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(o,{children:"Criar Cupom"})]})]})]})]}),e.jsx("div",{className:"space-y-3",children:i.map(s=>e.jsx(r,{className:`p-4 hover:shadow-md transition-all border-l-4 ${s.status==="active"?"border-l-emerald-500":s.status==="expired"?"border-l-gray-400":"border-l-rose-500"} ${s.status!=="active"?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:s.code}),e.jsx(x,{variant:"outline",className:"text-xs font-medium bg-emerald-50 text-emerald-700 border-emerald-200",children:s.discountType==="percentage"?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),s.discountValue,"% OFF"]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-3 w-3 mr-1"}),"R$ ",s.discountValue," OFF"]})}),s.status==="active"?e.jsxs(x,{variant:"outline",className:"text-xs font-medium bg-blue-50 text-blue-700 border-blue-200",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Ativo"]}):s.status==="expired"?e.jsxs(x,{variant:"outline",className:"text-xs font-medium bg-gray-50 text-gray-600 border-gray-300",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Expirado"]}):e.jsxs(x,{variant:"outline",className:"text-xs font-medium bg-rose-50 text-rose-600 border-rose-200",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Desativado"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(B,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{children:[new Date(s.validFrom).toLocaleDateString("pt-BR")," -"," ",new Date(s.validUntil).toLocaleDateString("pt-BR")]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(j,{className:"h-4 w-4 text-violet-500"}),e.jsxs("span",{children:[s.usedCount," / ",s.usageLimit," usos"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(p,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{children:s.applicableProducts.join(", ")})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{checked:n(s.status),onCheckedChange:a=>P(s,a),className:n(s.status)?"data-[state=checked]:bg-emerald-500":""}),e.jsx("span",{className:`text-xs font-medium ${n(s.status)?"text-emerald-600":"text-gray-500"}`,children:n(s.status)?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>D(s),className:"h-8",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>F(s.id),className:"text-red-600 h-8",children:e.jsx(H,{className:"h-4 w-4"})})]})]})]})},s.id))})]}),e.jsx(q,{open:t.coupon!==null,onClose:()=>u({coupon:null,newStatus:!1}),onConfirm:E,title:t.newStatus?"Ativar Cupom":"Desativar Cupom",message:t.newStatus?`Tem certeza que deseja ativar o cupom "${t.coupon?.code}"? Ele ficará disponível para uso.`:`Tem certeza que deseja desativar o cupom "${t.coupon?.code}"? Ele não poderá mais ser utilizado.`,confirmText:t.newStatus?"Ativar":"Desativar",destructive:!t.newStatus})]})}export{te as default};
