import{bf as T,L as ze,j as e,bl as ge,aj as le,f as g,a1 as ie,B as u,N as w,an as Z,m as ue,p as be,aL as Oe,C as b,a as L,d as q,g as v,ap as B,b9 as Ze,R as ea,F as ne,aw as ve,ao as Ne,r as h,ag as ee,o as aa,b3 as Ce,bX as je,a2 as fe,U as sa,aT as ce,M as ta,y as ra,O as la,Q as ia,q as na,V as oa,bL as da,P as ca,D as ke,v as Se,w as Ae,x as Pe,af as G,E as me,H as xe,I as pe,J as he,K as F,ah as De,ad as ma,az as xa}from"./index-D2dOrPZ8.js";import{D as pa}from"./data-table-BARJs-tp.js";import{P as ha}from"./project-create-slide-panel-COmkpcow.js";import{C as ga}from"./confirmation-dialog-Bk9N8cdM.js";import{P as ua}from"./page-header-DpITyWPC.js";import{P as Fe}from"./progress-BnPXSgzQ.js";import{S as Re}from"./square-pen-Bi43ABVd.js";import{D as re}from"./download--rFCaPFG.js";import{F as ba}from"./funnel-D8IEwOH8.js";import"./table-DSYZvwhV.js";import"./skeleton-D4sfmQAY.js";import"./sidebar-context-DQOyQsLi.js";import"./product-context-C-bR3Wyg.js";import"./specialty-context-B5jJAh8-.js";import"./video-BSGHFI8a.js";import"./megaphone-DX3qK3BU.js";import"./grid-3x3-DSkwZCAM.js";import"./key-DrOyWj5p.js";import"./triangle-alert-Cjhkzg0C.js";const Ee={high:"text-red-600 bg-red-50",medium:"text-yellow-600 bg-yellow-50",low:"text-blue-600 bg-blue-50"},Te={high:"Alta",medium:"MÃ©dia",low:"Baixa"},ja={pending:"text-gray-600 bg-gray-100",in_progress:"text-blue-600 bg-blue-100",completed:"text-green-600 bg-green-100"},fa={pending:"Pendente",in_progress:"Em Progresso",completed:"ConcluÃ­da"};function va({open:N,onClose:j,task:i}){const[m,d]=T.useState({}),[f,_]=T.useState("delivery"),{sidebarCollapsed:c}=ze(),y=r=>r?new Date(r).toLocaleDateString("pt-BR"):"-",t=r=>{d(C=>({...C,[r]:!C[r]}))},n=r=>{switch(r){case"approved":return"bg-green-500 text-white hover:bg-green-600";case"pending":return"bg-yellow-500 text-white hover:bg-yellow-600";case"rejected":return"bg-red-500 text-white hover:bg-red-600";default:return"bg-blue-500 text-white hover:bg-blue-600"}},k=r=>{switch(r){case"approved":return"APROVADO";case"pending":return"PENDENTE";case"rejected":return"REJEITADO";default:return"ARQUIVO"}},S=c?"left-16":"left-64";return i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed ${S} top-0 right-0 bottom-0 bg-black/70 backdrop-blur-sm transition-all duration-200 z-[80] ${N?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:j}),e.jsxs("div",{className:w("fixed top-0 right-0 h-full bg-white dark:bg-slate-900 shadow-2xl flex flex-col border-l border-gray-200 dark:border-gray-800","transition-transform duration-500 ease-in-out z-[90]",S,N?"translate-x-0":"translate-x-full"),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-blue-50/50 via-purple-50/30 to-pink-50/50 dark:from-blue-950/20 dark:via-purple-950/10 dark:to-pink-950/20",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(ge,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white truncate",children:i.title}),i.status==="completed"&&e.jsx("div",{className:"flex gap-0.5 shrink-0",children:[...Array(5)].map((r,C)=>e.jsx(le,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},C))})]}),i.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:i.description})]})]}),e.jsx(g,{variant:"ghost",size:"icon",onClick:j,className:"shrink-0 hover:bg-white/50 dark:hover:bg-gray-800",children:e.jsx(ie,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Status:"}),e.jsx(u,{className:w("font-semibold text-xs",ja[i.status]),children:fa[i.status]})]}),e.jsx(Z,{orientation:"vertical",className:"h-4"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ue,{className:"w-3.5 h-3.5 text-gray-500"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"Prazo:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:y(i.dueDate)})]}),e.jsx(Z,{orientation:"vertical",className:"h-4"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(be,{className:"w-3.5 h-3.5 text-gray-500"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"LÃ­der:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:i.assignee})]}),e.jsx(Z,{orientation:"vertical",className:"h-4"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Prioridade:"}),e.jsx(u,{className:w("text-xs font-semibold",Ee[i.priority]),children:Te[i.priority]})]})]})}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsxs("button",{onClick:()=>_("general"),className:w("flex-1 px-4 py-3 text-sm font-semibold transition-all relative",f==="general"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:["Dados Gerais",f==="general"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]}),e.jsxs("button",{onClick:()=>_("delivery"),className:w("flex-1 px-4 py-3 text-sm font-semibold transition-all relative",f==="delivery"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:["Etapas de Entrega",f==="delivery"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]}),e.jsxs("button",{onClick:()=>_("history"),className:w("flex-1 px-4 py-3 text-sm font-semibold transition-all relative",f==="history"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:["HistÃ³rico",f==="history"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]})]}),e.jsxs(Oe,{className:"flex-1",children:[f==="general"&&e.jsx("div",{className:"p-5",children:e.jsxs(b,{className:"border-l-4 border-l-blue-500 shadow-sm",children:[e.jsx(L,{className:"pb-3",children:e.jsx(q,{className:"text-sm",children:"InformaÃ§Ãµes da Tarefa"})}),e.jsxs(v,{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Prioridade"}),e.jsx(u,{className:Ee[i.priority],children:Te[i.priority]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"ResponsÃ¡vel"}),e.jsx("p",{className:"text-sm font-medium",children:i.assignee})]})]}),i.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"DescriÃ§Ã£o"}),e.jsx("p",{className:"text-sm text-gray-700",children:i.description})]})]})]})}),f==="delivery"&&e.jsx("div",{className:"p-5 space-y-3",children:i.items&&i.items.length>0?e.jsx("div",{className:"space-y-3",children:i.items.map((r,C)=>e.jsxs(b,{className:"overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("button",{onClick:()=>t(r.id),className:"w-full text-left p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:["NÂº ",C+1,". ",r.title]}),r.completed&&e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5 text-green-600"}),e.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((E,I)=>e.jsx(le,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},I))})]})]}),m[r.id]?e.jsx(Ze,{className:"w-5 h-5 text-gray-400"}):e.jsx(ea,{className:"w-5 h-5 text-gray-400"})]})}),m[r.id]&&e.jsxs("div",{className:"border-t bg-gray-50 dark:bg-gray-800 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Status"}),e.jsx(u,{className:r.completed?"bg-gray-900 text-white":"bg-yellow-500 text-white",children:r.completed?"CONCLUÃDA":"APROVAÃ‡ÃƒO PENDENTE"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Prazo de Entrega"}),e.jsx("p",{className:"text-sm font-semibold",children:y(i.dueDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Prazo de AprovaÃ§Ã£o"}),e.jsx("p",{className:"text-sm font-semibold",children:y(i.dueDate)})]})]}),e.jsx(Z,{}),r.deliverable&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Itens entregues para aprovaÃ§Ã£o da etapa"}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 text-xs font-semibold text-gray-600 dark:text-gray-300",children:"ITEM"}),e.jsx("th",{className:"text-left p-3 text-xs font-semibold text-gray-600 dark:text-gray-300",children:"TIPO"}),e.jsx("th",{className:"text-left p-3 text-xs font-semibold text-gray-600 dark:text-gray-300",children:"QUALIFICAÃ‡ÃƒO"}),e.jsx("th",{className:"text-left p-3 text-xs font-semibold text-gray-600 dark:text-gray-300",children:"AGÃŠNCIA"}),e.jsx("th",{className:"text-left p-3 text-xs font-semibold text-gray-600 dark:text-gray-300",children:"CLIENTE"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium",children:r.deliverable})]})}),e.jsx("td",{className:"p-3",children:e.jsx(u,{className:"bg-blue-500 text-white hover:bg-blue-600",children:"ARQUIVO"})}),e.jsx("td",{className:"p-3",children:e.jsx(u,{className:n(r.completed?"approved":"pending"),children:k(r.completed?"approved":"pending")})}),e.jsx("td",{className:"p-3",children:e.jsx(u,{className:n(r.completed?"approved":"pending"),children:k(r.completed?"approved":"pending")})}),e.jsx("td",{className:"p-3",children:e.jsx(u,{className:n("pending"),children:"PENDENTE"})})]})})]})})]})]})]},r.id))}):e.jsxs(b,{className:"p-8 text-center border-2 border-dashed",children:[e.jsx(ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Nenhuma etapa cadastrada"})]})}),f==="history"&&e.jsx("div",{className:"p-5",children:e.jsxs(b,{className:"p-8 text-center border-2 border-dashed",children:[e.jsx(Ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"HistÃ³rico em desenvolvimento"})]})})]})]})]}):null}const Be=[{id:"boleto",type:"boleto",label:"Boleto BancÃ¡rio",description:"Boleto enviado automaticamente por email",icon:e.jsx(ne,{className:"h-5 w-5"}),color:"bg-blue-50 border-blue-200 text-blue-700"},{id:"cartao",type:"cartao",label:"CartÃ£o de CrÃ©dito",description:"Aviso de cobranÃ§a por email",icon:e.jsx(aa,{className:"h-5 w-5"}),color:"bg-purple-50 border-purple-200 text-purple-700"},{id:"pix",type:"pix",label:"PIX",description:"Aviso de pagamento por email",icon:e.jsx(Ce,{className:"h-5 w-5"}),color:"bg-green-50 border-green-200 text-green-700"},{id:"transferencia",type:"transferencia",label:"TransferÃªncia BancÃ¡ria",description:"Dados bancÃ¡rios e aviso por email",icon:e.jsx(Ce,{className:"h-5 w-5"}),color:"bg-orange-50 border-orange-200 text-orange-700"}];function Na({projectId:N,projectName:j}){const[i,m]=h.useState(null),[d,f]=h.useState({}),_=t=>{m(i===t?null:t),d[t]||f(n=>({...n,[t]:{email:"",sendAutomatically:!1,frequency:"monthly",sendDay:1}}))},c=(t,n,k)=>{f(S=>({...S,[t]:{...S[t],[n]:k}}))},y=t=>{const n=d[t];if(!n?.email){alert("Por favor, preencha o email");return}console.log(`ConfiguraÃ§Ã£o salva para ${t}:`,n),alert("ConfiguraÃ§Ã£o de pagamento salva com sucesso!")};return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:"Formas de Pagamento"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione uma forma de pagamento para configurar o envio automÃ¡tico de cobranÃ§as"})]}),e.jsx("div",{className:"grid gap-3",children:Be.map(t=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>_(t.id),className:w("w-full p-4 border-2 rounded-lg transition-all text-left","hover:shadow-md hover:border-opacity-60",i===t.id?t.color:"bg-white border-gray-200"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:t.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.label}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]})]}),d[t.id]?.email&&e.jsxs(u,{className:"bg-green-100 text-green-800 gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"Configurado"]})]})}),i===t.id&&e.jsx(b,{className:"mt-2 border-2 border-gray-200",children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Email para NotificaÃ§Ãµes"}),e.jsx(ee,{type:"email",placeholder:"seu@email.com",value:d[t.id]?.email||"",onChange:n=>c(t.id,"email",n.target.value),className:"bg-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Email onde as cobranÃ§as serÃ£o enviadas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"FrequÃªncia de Envio"}),e.jsxs("select",{value:d[t.id]?.frequency||"monthly",onChange:n=>c(t.id,"frequency",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm",children:[e.jsx("option",{value:"monthly",children:"Mensal"}),e.jsx("option",{value:"quarterly",children:"Trimestral"}),e.jsx("option",{value:"yearly",children:"Anual"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Dia do MÃªs para Envio"}),e.jsx(ee,{type:"number",min:"1",max:"28",value:d[t.id]?.sendDay||1,onChange:n=>c(t.id,"sendDay",parseInt(n.target.value)),className:"bg-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dia entre 1 e 28 (para garantir compatibilidade com todos os meses)"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:d[t.id]?.sendAutomatically||!1,onChange:n=>c(t.id,"sendAutomatically",n.target.checked),className:"w-4 h-4 rounded border-gray-300"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Envio AutomÃ¡tico Habilitado"}),e.jsx("p",{className:"text-xs text-gray-600",children:t.type==="boleto"?"Boleto serÃ¡ emitido e enviado automaticamente por email":t.type==="cartao"?"Aviso de cobranÃ§a serÃ¡ enviado automaticamente por email":"Aviso de pagamento serÃ¡ enviado automaticamente por email"})]})]}),e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-amber-800",children:[t.type==="boleto"&&e.jsx("p",{children:"O boleto serÃ¡ gerado automaticamente e enviado para o email especificado de acordo com a frequÃªncia configurada."}),t.type==="cartao"&&e.jsx("p",{children:"Um aviso de cobranÃ§a serÃ¡ enviado antes da data limite para que o cliente possa se preparar."}),t.type==="pix"&&e.jsx("p",{children:"O cÃ³digo PIX e instruÃ§Ãµes de pagamento serÃ£o enviados por email na frequÃªncia especificada."}),t.type==="transferencia"&&e.jsx("p",{children:"Os dados bancÃ¡rios para transferÃªncia serÃ£o incluÃ­dos no email de cobranÃ§a."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:()=>y(t.id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Salvar ConfiguraÃ§Ã£o"}),e.jsx(g,{onClick:()=>m(null),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})})]},t.id))}),e.jsxs(b,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[e.jsx(L,{children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-blue-600"}),"Resumo de ConfiguraÃ§Ãµes"]})}),e.jsx(v,{className:"space-y-2 text-sm",children:Object.keys(d).filter(t=>d[t]?.email).length===0?e.jsx("p",{className:"text-gray-600",children:"Nenhuma forma de pagamento configurada ainda"}):e.jsx("div",{className:"space-y-1",children:Object.keys(d).map(t=>{const n=d[t];if(!n?.email)return null;const k=Be.find(S=>S.id===t);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k?.label}),e.jsxs("p",{className:"text-xs text-gray-600",children:[n.email," â€¢ ",n.frequency==="monthly"?"Mensal":n.frequency==="quarterly"?"Trimestral":"Anual"]})]}),n.sendAutomatically&&e.jsx(u,{className:"bg-green-100 text-green-800",children:"Ativo"})]},t)})})})]})]})}const ya={planning:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",on_hold:"bg-yellow-100 text-yellow-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},wa={planning:"Planejamento",active:"Ativo",on_hold:"Em Espera",completed:"ConcluÃ­do",cancelled:"Cancelado"},Ca={high:"text-red-600 bg-red-50",medium:"text-yellow-600 bg-yellow-50",low:"text-blue-600 bg-blue-50"},ka={high:"Alta",medium:"MÃ©dia",low:"Baixa"},_e={pending:"text-gray-600 bg-gray-100",in_progress:"text-blue-600 bg-blue-100",completed:"text-green-600 bg-green-100"},Me={pending:"Pendente",in_progress:"Em Progresso",completed:"ConcluÃ­da"};function Sa({open:N,onClose:j,onEdit:i,project:m,tasks:d=[],files:f=[]}){const{sidebarCollapsed:_}=ze(),[c,y]=T.useState("overview"),[t,n]=T.useState(null),[k,S]=T.useState("all"),[r,C]=T.useState("all"),[E,I]=T.useState({}),[M,J]=T.useState({}),z=s=>s?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s):"-",P=s=>s?new Date(s).toLocaleDateString("pt-BR"):"-",O=s=>s.includes("pdf")?"ðŸ“„":s.includes("image")?"ðŸ–¼ï¸":s.includes("doc")?"ðŸ“":"ðŸ“Ž",A=T.useMemo(()=>{const s={};return d.forEach(l=>{l.items&&l.items.forEach(x=>{x.completed&&x.deliverable&&(s[l.id]||(s[l.id]=[]),s[l.id].push({taskTitle:l.title,itemTitle:x.title,fileName:x.deliverable,approvedAt:x.approvedAt}))})}),s},[d]),R=s=>{n(s)},K=()=>{n(null)},V=_?"left-16":"left-64",ae=()=>[{id:"prod1",name:"Desenvolvimento de Landing Page",tasks:d.filter(l=>l.priority==="high")},{id:"prod2",name:"Sistema de GestÃ£o",tasks:d.filter(l=>l.priority==="medium")},{id:"prod3",name:"App Mobile",tasks:d.filter(l=>l.priority==="low")}].filter(l=>l.tasks.length>0),oe=s=>s.length===0?0:s.filter(x=>x.status==="completed").length/s.length*100,$=s=>!s.items||s.items.length===0?s.status==="completed"?100:0:s.items.filter(x=>x.completed).length/s.items.length*100,Q=s=>s.completed?e.jsx(u,{className:"bg-green-500 text-white text-xs px-2 py-0.5",children:"Finalizada"}):e.jsx(u,{className:"bg-blue-500 text-white text-xs px-2 py-0.5",children:"Em ExecuÃ§Ã£o"}),se=s=>{I(l=>({...l,[s]:!l[s]}))},D=s=>{J(l=>({...l,[s]:!l[s]}))};return m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w("fixed top-0 right-0 bottom-0 bg-black/60 backdrop-blur-sm transition-all duration-300 z-40",N&&!t?"opacity-100":"opacity-0 pointer-events-none",V),onClick:j}),e.jsxs("div",{className:w("fixed top-0 right-0 h-full bg-white dark:bg-slate-900 shadow-2xl flex flex-col border-l border-gray-200 dark:border-gray-800 z-50","transition-transform duration-500 ease-in-out",V,N?"translate-x-0":"translate-x-full"),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-blue-50/50 via-purple-50/30 to-pink-50/50 dark:from-blue-950/20 dark:via-purple-950/10 dark:to-pink-950/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(je,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m.name}),e.jsx(u,{className:ya[m.status],children:wa[m.status]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(g,{variant:"outline",size:"sm",onClick:i,className:"flex items-center gap-2 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 bg-transparent",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Editar"})]}),e.jsx(g,{variant:"ghost",size:"icon",onClick:j,className:"shrink-0 hover:bg-white/50 dark:hover:bg-gray-800",children:e.jsx(ie,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsxs("button",{onClick:()=>y("overview"),className:w("flex-1 px-3 py-3 text-sm font-semibold transition-all relative",c==="overview"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"VisÃ£o Geral"]}),c==="overview"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]}),e.jsxs("button",{onClick:()=>y("tasks"),className:w("flex-1 px-3 py-3 text-sm font-semibold transition-all relative",c==="tasks"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Tarefas ",d.length>0&&`(${d.length})`]}),c==="tasks"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]}),e.jsxs("button",{onClick:()=>y("approved"),className:w("flex-1 px-3 py-3 text-sm font-semibold transition-all relative",c==="approved"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Aprovados"]}),c==="approved"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]}),e.jsxs("button",{onClick:()=>y("files"),className:w("flex-1 px-3 py-3 text-sm font-semibold transition-all relative",c==="files"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Arquivos"]}),c==="files"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]}),e.jsxs("button",{onClick:()=>y("payments"),className:w("flex-1 px-3 py-3 text-sm font-semibold transition-all relative",c==="payments"?"text-blue-600 dark:text-blue-400 bg-white dark:bg-slate-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Pagamentos"]}),c==="payments"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600"})]})]}),e.jsx(Oe,{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-5",children:[c==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"border-l-4 border-l-blue-500 shadow-sm",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(be,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Cliente"})]}),e.jsx("p",{className:"font-semibold text-sm",children:m.client?.name}),e.jsx("p",{className:"text-xs text-gray-500",children:m.client?.email})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(sa,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Gerente"})]}),e.jsx("p",{className:"font-semibold text-sm",children:m.manager?.name}),e.jsx("p",{className:"text-xs text-gray-500",children:m.manager?.email})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(fe,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"OrÃ§amento"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:z(m.budget)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ue,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"PerÃ­odo"})]}),e.jsxs("p",{className:"text-xs",children:[P(m.start_date)," - ",P(m.end_date)]})]})]})})}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"dark:bg-gray-800"}),e.jsxs(b,{className:"border-l-4 border-l-indigo-500 shadow-sm",children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-indigo-600"}),e.jsx(q,{className:"text-base",children:"Progresso do Projeto"})]})}),e.jsx(v,{className:"space-y-3",children:ae().map(s=>{const l=oe(s.tasks),x=E[s.id];return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>se(s.id),className:"w-full flex items-center justify-between p-3 bg-gradient-to-r from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`transform transition-transform ${x?"rotate-90":""}`,children:e.jsx(ce,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Fe,{value:l,className:"h-1.5 flex-1 max-w-[200px]"}),e.jsxs("span",{className:"text-xs font-medium text-indigo-600",children:[l.toFixed(0),"%"]})]})]})]}),e.jsxs(u,{variant:"outline",className:"text-xs",children:[s.tasks.filter(p=>p.status==="completed").length,"/",s.tasks.length," tarefas"]})]}),x&&e.jsx("div",{className:"p-3 space-y-2 bg-white",children:s.tasks.map(p=>{const X=$(p),te=M[p.id];return e.jsxs("div",{className:"border rounded-md overflow-hidden",children:[e.jsxs("button",{onClick:()=>D(p.id),className:"w-full flex items-center justify-between p-2.5 bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`transform transition-transform ${te?"rotate-90":""}`,children:e.jsx(ce,{className:"w-3.5 h-3.5 text-gray-600"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:p.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Fe,{value:X,className:"h-1 flex-1 max-w-[150px]"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[X.toFixed(0),"%"]})]})]})]}),e.jsx(u,{className:_e[p.status],children:Me[p.status]})]}),te&&p.items&&p.items.length>0&&e.jsxs("div",{className:"p-2 bg-white space-y-1.5",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase px-2",children:"Etapas"}),p.items.map(U=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[U.completed?e.jsx(B,{className:"w-4 h-4 text-green-500 shrink-0"}):e.jsx(Ne,{className:"w-4 h-4 text-blue-500 shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:U.title})]}),Q(U)]},U.id))]})]},p.id)})})]},s.id)})})]})]})]}),c==="tasks"&&e.jsx("div",{className:"space-y-3",children:d.length>0?e.jsx(e.Fragment,{children:d.map(s=>e.jsx(b,{className:"hover:shadow-md transition-all border-l-4 border-l-blue-400 shadow-sm cursor-pointer",onClick:()=>R(s),children:e.jsx(v,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.title,s.status==="completed"&&e.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((l,x)=>e.jsx(le,{className:"w-3.5 h-3.5 fill-yellow-400 text-yellow-400"},x))}),e.jsx(ce,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(u,{className:`${_e[s.status]} text-4xl px-9 py-7 rounded-lg font-semibold`,children:Me[s.status]}),e.jsx(u,{className:`${Ca[s.priority]} text-4xl px-9 py-7 rounded-lg font-semibold`,children:ka[s.priority]}),e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),s.assignee]}),e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),P(s.dueDate)]})]})]})})})},s.id))}):e.jsx(b,{className:"border-2 border-dashed shadow-sm",children:e.jsxs(v,{className:"p-8 text-center",children:[e.jsx(ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-semibold mb-1",children:"Nenhuma tarefa cadastrada"}),e.jsx("p",{className:"text-xs text-gray-500",children:"As tarefas deste projeto aparecerÃ£o aqui quando forem criadas"})]})})}),c==="approved"&&e.jsx("div",{children:Object.keys(A).length>0?e.jsx(b,{className:"border-l-4 border-l-emerald-500 shadow-sm",children:e.jsxs(v,{className:"p-4",children:[e.jsx("div",{className:"space-y-3 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 mb-2 block",children:"Filtrar por Tarefa (Produto)"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(g,{variant:r==="all"?"default":"outline",size:"sm",onClick:()=>C("all"),className:r==="all"?"bg-emerald-500 hover:bg-emerald-600":"",children:"Todas"}),Object.keys(A).map(s=>{const l=A[s][0]?.taskTitle;return e.jsx(g,{variant:r===s?"default":"outline",size:"sm",onClick:()=>C(s),className:r===s?"bg-emerald-500 hover:bg-emerald-600":"",children:l},s)})]})]})}),e.jsx("div",{className:"space-y-2",children:r==="all"?Object.entries(A).map(([s,l])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-semibold text-emerald-700 bg-emerald-50 px-3 py-1.5 rounded-md mt-2",children:["Produto: ",l[0].taskTitle]}),l.map((x,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(B,{className:"w-5 h-5 text-emerald-600 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:x.fileName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Etapa:"})," ",x.itemTitle,x.approvedAt&&` â€¢ Aprovado em ${P(x.approvedAt)}`]})]})]}),e.jsx(g,{size:"sm",variant:"ghost",className:"shrink-0 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-100",children:e.jsx(re,{className:"w-4 h-4"})})]},p))]},s)):e.jsx(e.Fragment,{children:A[r]&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs font-semibold text-emerald-700 bg-emerald-50 px-3 py-1.5 rounded-md mb-2",children:["Produto: ",A[r][0].taskTitle]}),A[r].map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(B,{className:"w-5 h-5 text-emerald-600 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.fileName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Etapa:"})," ",s.itemTitle,s.approvedAt&&` â€¢ Aprovado em ${P(s.approvedAt)}`]})]})]}),e.jsx(g,{size:"sm",variant:"ghost",className:"shrink-0 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-100",children:e.jsx(re,{className:"w-4 h-4"})})]},l))]})})})]})}):e.jsx(b,{className:"border-2 border-dashed shadow-sm",children:e.jsxs(v,{className:"p-8 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-semibold mb-1",children:"Nenhum arquivo aprovado"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Os arquivos aprovados aparecerÃ£o aqui"})]})})}),c==="files"&&e.jsx("div",{children:f.length>0?e.jsx(b,{className:"border-l-4 border-l-pink-500 shadow-sm",children:e.jsx(v,{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("span",{className:"text-2xl",children:O(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.size," â€¢ ",P(s.uploadedAt)," â€¢ ",s.uploadedBy]})]})]}),e.jsx(g,{size:"sm",variant:"ghost",className:"shrink-0",children:e.jsx(re,{className:"w-4 h-4"})})]},s.id))})})}):e.jsx(b,{className:"border-2 border-dashed shadow-sm",children:e.jsxs(v,{className:"p-8 text-center",children:[e.jsx(ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-semibold mb-1",children:"Nenhum arquivo do projeto"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Os arquivos do projeto aparecerÃ£o aqui"})]})})}),c==="payments"&&e.jsx(Na,{projectId:m.id,projectName:m.name})]})})]}),e.jsx(va,{open:!!t,onClose:K,task:t||void 0})]}):null}const Aa={planning:"Planejamento",active:"Ativo",on_hold:"Em Espera",completed:"ConcluÃ­do",cancelled:"Cancelado"},Pa=[{id:"1",name:"Sistema de GestÃ£o Interno",description:"Desenvolvimento de sistema de gestÃ£o para controle de projetos e equipes",client:{id:"c1",name:"Departamento de TI",email:"ti@empresa.com"},manager:{id:"m1",name:"Carlos Silva",email:"carlos@empresa.com"},status:"active",budget:15e4,start_date:"2024-01-15",end_date:"2024-06-30",created_at:"2024-01-10"},{id:"2",name:"Plataforma de Treinamento Online",description:"CriaÃ§Ã£o de plataforma EAD para capacitaÃ§Ã£o de funcionÃ¡rios",client:{id:"c2",name:"RH",email:"rh@empresa.com"},manager:{id:"m2",name:"Maria Santos",email:"maria@empresa.com"},status:"active",budget:95e3,start_date:"2024-02-01",end_date:"2024-07-15",created_at:"2024-01-25"},{id:"3",name:"App Mobile de Vendas",description:"Desenvolvimento de aplicativo mobile para forÃ§a de vendas",client:{id:"c3",name:"Comercial",email:"vendas@empresa.com"},manager:{id:"m3",name:"JoÃ£o Oliveira",email:"joao@empresa.com"},status:"planning",budget:12e4,start_date:"2024-04-01",end_date:"2024-09-30",created_at:"2024-03-01"},{id:"4",name:"Portal do Cliente",description:"RenovaÃ§Ã£o completa do portal de atendimento ao cliente",client:{id:"c4",name:"Atendimento",email:"atendimento@empresa.com"},manager:{id:"m1",name:"Carlos Silva",email:"carlos@empresa.com"},status:"completed",budget:85e3,start_date:"2023-09-01",end_date:"2024-01-31",created_at:"2023-08-15"},{id:"5",name:"Sistema de RelatÃ³rios BI",description:"ImplementaÃ§Ã£o de dashboards e relatÃ³rios de business intelligence",client:{id:"c5",name:"Diretoria",email:"diretoria@empresa.com"},manager:{id:"m2",name:"Maria Santos",email:"maria@empresa.com"},status:"on_hold",budget:2e5,start_date:"2024-03-01",end_date:"2024-12-31",created_at:"2024-02-15"}],Da={1:[{id:"t1",title:"Definir arquitetura do sistema",description:"Criar documentaÃ§Ã£o da arquitetura e escolher tecnologias",status:"completed",priority:"high",assignee:"Carlos Silva",dueDate:"2024-02-15",items:[{id:"i1-1",title:"Escolher stack de tecnologia",completed:!0,deliverable:"tech_stack.pdf",approvedAt:"2024-02-10"},{id:"i1-2",title:"Desenhar diagrama de arquitetura",completed:!0,deliverable:"architecture_diagram.png",approvedAt:"2024-02-12"},{id:"i1-3",title:"Documentar padrÃµes de cÃ³digo",completed:!0,deliverable:"code_standards.md",approvedAt:"2024-02-14"}],files:[{id:"f1",name:"arquitetura_v2.pdf",size:"3.2 MB",uploadedAt:"2024-02-14"},{id:"f2",name:"diagrama_sistema.png",size:"850 KB",uploadedAt:"2024-02-14"}]},{id:"t2",title:"Desenvolver mÃ³dulo de autenticaÃ§Ã£o",description:"Implementar sistema de login e controle de acesso",status:"completed",priority:"high",assignee:"Ana Paula",dueDate:"2024-03-01",items:[{id:"i2-1",title:"Implementar JWT",completed:!0},{id:"i2-2",title:"Criar tela de login",completed:!0},{id:"i2-3",title:"Sistema de recuperaÃ§Ã£o de senha",completed:!0}],files:[{id:"f3",name:"auth_documentation.pdf",size:"1.5 MB",uploadedAt:"2024-03-01"}]},{id:"t3",title:"Criar interface de gestÃ£o de projetos",description:"Desenvolver telas de CRUD de projetos",status:"in_progress",priority:"medium",assignee:"Roberto Costa",dueDate:"2024-04-10",items:[{id:"i3-1",title:"Listagem de projetos",completed:!0},{id:"i3-2",title:"FormulÃ¡rio de criaÃ§Ã£o",completed:!0},{id:"i3-3",title:"EdiÃ§Ã£o de projetos",completed:!1},{id:"i3-4",title:"VisualizaÃ§Ã£o de detalhes",completed:!1}]},{id:"t4",title:"Implementar dashboard de mÃ©tricas",description:"Criar visualizaÃ§Ãµes de dados e grÃ¡ficos",status:"pending",priority:"medium",assignee:"Maria Santos",dueDate:"2024-05-01",items:[{id:"i4-1",title:"Integrar biblioteca de grÃ¡ficos",completed:!1},{id:"i4-2",title:"Criar cards de mÃ©tricas",completed:!1},{id:"i4-3",title:"GrÃ¡ficos de progresso",completed:!1}]},{id:"t5",title:"Testes de integraÃ§Ã£o",description:"Realizar testes end-to-end do sistema",status:"pending",priority:"low",assignee:"JoÃ£o Oliveira",dueDate:"2024-06-15"}],2:[{id:"t6",title:"Configurar plataforma EAD",description:"Setup inicial da plataforma de aprendizado",status:"completed",priority:"high",assignee:"Maria Santos",dueDate:"2024-02-20",items:[{id:"i6-1",title:"Instalar e configurar LMS",completed:!0},{id:"i6-2",title:"Criar estrutura de cursos",completed:!0}],files:[{id:"f4",name:"manual_plataforma.pdf",size:"5.8 MB",uploadedAt:"2024-02-19"}]},{id:"t7",title:"Criar conteÃºdo de treinamento",description:"Desenvolver mÃ³dulos de treinamento",status:"in_progress",priority:"high",assignee:"Paula Ferreira",dueDate:"2024-04-01",items:[{id:"i7-1",title:"MÃ³dulo 1 - IntroduÃ§Ã£o",completed:!0,deliverable:"modulo1.pdf"},{id:"i7-2",title:"MÃ³dulo 2 - Conceitos",completed:!1},{id:"i7-3",title:"MÃ³dulo 3 - PrÃ¡ticas",completed:!1}]},{id:"t8",title:"Desenvolver sistema de avaliaÃ§Ã£o",description:"Criar quizzes e avaliaÃ§Ãµes",status:"in_progress",priority:"medium",assignee:"Carlos Silva",dueDate:"2024-05-15"},{id:"t9",title:"Integrar com sistema de RH",description:"Sincronizar dados com sistema de RH",status:"pending",priority:"medium",assignee:"Roberto Costa",dueDate:"2024-06-01"}],3:[{id:"t10",title:"Definir requisitos do app",description:"Levantar todas as funcionalidades necessÃ¡rias",status:"pending",priority:"high",assignee:"JoÃ£o Oliveira",dueDate:"2024-04-15"},{id:"t11",title:"Design de interface mobile",description:"Criar protÃ³tipos das telas do app",status:"pending",priority:"high",assignee:"Ana Design",dueDate:"2024-05-01"}]},Fa={1:[{id:"pf1",name:"briefing_projeto.pdf",type:"application/pdf",size:"2.5 MB",uploadedAt:"2024-01-10",uploadedBy:"Carlos Silva",approved:!0,approvedAt:"2024-01-12"},{id:"pf2",name:"requisitos_funcionais.docx",type:"application/doc",size:"1.8 MB",uploadedAt:"2024-01-12",uploadedBy:"Ana Paula",approved:!0,approvedAt:"2024-01-15"},{id:"pf3",name:"proposta_comercial.pdf",type:"application/pdf",size:"950 KB",uploadedAt:"2024-01-15",uploadedBy:"Comercial",approved:!1},{id:"pf4",name:"cronograma.xlsx",type:"application/excel",size:"450 KB",uploadedAt:"2024-01-20",uploadedBy:"Carlos Silva",approved:!0,approvedAt:"2024-01-22"}],2:[{id:"pf5",name:"plano_pedagogico.pdf",type:"application/pdf",size:"4.2 MB",uploadedAt:"2024-01-25",uploadedBy:"Maria Santos",approved:!0,approvedAt:"2024-01-28"},{id:"pf6",name:"conteudo_base.zip",type:"application/zip",size:"15.8 MB",uploadedAt:"2024-02-01",uploadedBy:"Paula Ferreira",approved:!1}],3:[{id:"pf7",name:"wireframes_mobile.fig",type:"application/fig",size:"8.5 MB",uploadedAt:"2024-03-01",uploadedBy:"Ana Design",approved:!1}],4:[{id:"pf8",name:"relatorio_final.pdf",type:"application/pdf",size:"3.7 MB",uploadedAt:"2024-01-31",uploadedBy:"Carlos Silva",approved:!0,approvedAt:"2024-02-01"}],5:[{id:"pf9",name:"especificacao_bi.pdf",type:"application/pdf",size:"2.1 MB",uploadedAt:"2024-02-15",uploadedBy:"Maria Santos",approved:!1}]};function Wa(){const{toast:N}=ta(),[j,i]=h.useState(Pa),[m,d]=h.useState(!1),[f,_]=h.useState(null),[c,y]=h.useState(!1),[t,n]=h.useState(),[k,S]=h.useState({open:!1}),[r,C]=h.useState(!1),[E,I]=h.useState("all"),[M,J]=h.useState("all"),[z,P]=h.useState("all"),[O,A]=h.useState(""),[R,K]=h.useState(""),[V,ae]=h.useState([{id:"1",name:"Projetos Ativos",status:"active"},{id:"2",name:"Alto OrÃ§amento",budgetMin:1e5}]),[oe,$]=h.useState(!1),[Q,se]=h.useState(""),[D,s]=h.useState({id:!0,project:!0,responsible:!0,recurring:!0,status:!0,archived:!0}),[l,x]=h.useState(!1),[p,X]=h.useState({open:!1});h.useEffect(()=>{},[]);const te=()=>{n(void 0),y(!0)},U=a=>{n(a),y(!0)},ye=a=>{X({open:!0,project:a})},Le=async()=>{const a=k.project;if(a)try{i(j.filter(o=>o.id!==a.id)),N({title:"Sucesso",description:"Projeto excluÃ­do com sucesso"})}catch{N({title:"Erro",description:"Falha ao excluir projeto",variant:"destructive"})}finally{S({open:!1})}},qe=a=>{i(t?j.map(o=>o.id===a.id?a:o):[...j,{...a,id:Date.now().toString()}]),N({title:"Sucesso",description:t?"Projeto atualizado com sucesso":"Projeto criado com sucesso"})},Ie=()=>{y(!1),n(void 0)},Ve=()=>{const a=[["Nome","Cliente","Gerente","Status","OrÃ§amento","Data de InÃ­cio"].join(","),...j.map(H=>[H.name,H.client?.name||"-",H.manager?.name||"-",Aa[H.status],H.budget||"-",Xe(H.start_date)].join(","))].join(`
`),o=new Blob([a],{type:"text/csv"}),Y=window.URL.createObjectURL(o),de=document.createElement("a");de.href=Y,de.download=`projetos-${new Date().toISOString().split("T")[0]}.csv`,de.click(),window.URL.revokeObjectURL(Y),N({title:"Sucesso",description:"Projetos exportados com sucesso"})},$e=()=>{if(!Q.trim()){N({title:"Erro",description:"Digite um nome para o filtro",variant:"destructive"});return}const a={id:Date.now().toString(),name:Q,status:E!=="all"?E:void 0,client:M!=="all"?M:void 0,manager:z!=="all"?z:void 0,budgetMin:O?parseFloat(O):void 0,budgetMax:R?parseFloat(R):void 0};ae([...V,a]),se(""),$(!1),N({title:"Sucesso",description:"Filtro salvo com sucesso"})},Ue=a=>{I(a.status||"all"),J(a.client||"all"),P(a.manager||"all"),A(a.budgetMin?.toString()||""),K(a.budgetMax?.toString()||""),N({title:"Filtro Aplicado",description:`Filtro "${a.name}" foi aplicado`})},He=a=>{ae(V.filter(o=>o.id!==a)),N({title:"Sucesso",description:"Filtro removido"})},Ge=()=>{I("all"),J("all"),P("all"),A(""),K("")},W={total:j.length,active:j.filter(a=>a.status==="active").length,completed:j.filter(a=>a.status==="completed").length,planning:j.filter(a=>a.status==="planning").length,totalBudget:j.reduce((a,o)=>a+(o.budget||0),0)},we=j.filter(a=>!(E!=="all"&&a.status!==E||M!=="all"&&a.client?.name!==M||z!=="all"&&a.manager?.name!==z||O&&(a.budget||0)<parseFloat(O)||R&&(a.budget||0)>parseFloat(R))),Je=Array.from(new Set(j.map(a=>a.client?.name).filter(Boolean))),Ke=Array.from(new Set(j.map(a=>a.manager?.name).filter(Boolean))),Qe=a=>a?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a):"-",Xe=a=>a?new Date(a).toLocaleDateString("pt-BR"):"-",We=[{field:"id",headerName:"ID",width:70,renderCell:a=>e.jsx("div",{className:"text-xs font-mono text-gray-600",children:a})},{field:"name",headerName:"PROJETO",width:280,renderCell:(a,o)=>e.jsx("div",{className:"py-1",children:e.jsx("div",{className:"font-medium text-sm text-gray-900",children:a})})},{field:"manager",headerName:"RESPONSÃVEL",width:180,renderCell:a=>e.jsx("span",{className:"text-sm text-gray-700",children:a?.name||"-"})},{field:"budget",headerName:"RECORRENTE",width:110,renderCell:()=>e.jsx(u,{variant:"outline",className:"text-xs px-2 py-0.5",children:"NÃƒO"})},{field:"status",headerName:"STATUS",width:130,renderCell:a=>{const o={active:{label:"ATIVO",color:"bg-green-500 text-white"},planning:{label:"PLANEJAMENTO",color:"bg-blue-500 text-white"},completed:{label:"CONCLUÃDO",color:"bg-gray-500 text-white"},on_hold:{label:"EM ESPERA",color:"bg-yellow-500 text-white"},cancelled:{label:"CANCELADO",color:"bg-red-500 text-white"}},Y=o[a]||o.planning;return e.jsx(u,{className:`${Y.color} text-xs px-2 py-0.5`,children:Y.label})}},{field:"created_at",headerName:"ARQUIVADO",width:110,renderCell:()=>e.jsx(u,{variant:"outline",className:"text-xs px-2 py-0.5",children:"NÃƒO"})}].filter(a=>{const o=a.field.toString();return o==="id"?D.id:o==="name"?D.project:o==="manager"?D.responsible:o==="budget"?D.recurring:o==="status"?D.status:o==="created_at"?D.archived:!0}),Ye=[{label:"Visualizar",icon:e.jsx(xa,{className:"w-4 h-4"}),onClick:ye,variant:"ghost"},{label:"Editar",icon:e.jsx(Re,{className:"w-4 h-4"}),onClick:U,variant:"ghost"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-5",children:[e.jsx(ua,{title:"Projetos",description:`${we.length} registros encontrados.`}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[e.jsxs(b,{className:"border-l-4 border-l-blue-500 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(L,{className:"pb-2 pt-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(je,{className:"w-4 h-4 text-blue-600"})}),e.jsx(q,{className:"text-xs text-gray-600 font-semibold",children:"Total"})]})}),e.jsx(v,{className:"px-4 pb-3",children:e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:W.total})})]}),e.jsxs(b,{className:"border-l-4 border-l-green-500 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(L,{className:"pb-2 pt-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:e.jsx(ra,{className:"w-4 h-4 text-green-600"})}),e.jsx(q,{className:"text-xs text-gray-600 font-semibold",children:"Ativos"})]})}),e.jsx(v,{className:"px-4 pb-3",children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:W.active})})]}),e.jsxs(b,{className:"border-l-4 border-l-blue-400 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(L,{className:"pb-2 pt-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(Ne,{className:"w-4 h-4 text-blue-600"})}),e.jsx(q,{className:"text-xs text-gray-600 font-semibold",children:"Planejando"})]})}),e.jsx(v,{className:"px-4 pb-3",children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:W.planning})})]}),e.jsxs(b,{className:"border-l-4 border-l-gray-400 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(L,{className:"pb-2 pt-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-gray-100 rounded-lg",children:e.jsx(B,{className:"w-4 h-4 text-gray-600"})}),e.jsx(q,{className:"text-xs text-gray-600 font-semibold",children:"ConcluÃ­dos"})]})}),e.jsx(v,{className:"px-4 pb-3",children:e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:W.completed})})]}),e.jsxs(b,{className:"border-l-4 border-l-purple-500 shadow-sm hover:shadow-md transition-shadow col-span-2 sm:col-span-3 lg:col-span-1",children:[e.jsx(L,{className:"pb-2 pt-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:e.jsx(fe,{className:"w-4 h-4 text-purple-600"})}),e.jsx(q,{className:"text-xs text-gray-600 font-semibold",children:"OrÃ§amento"})]})}),e.jsx(v,{className:"px-4 pb-3",children:e.jsx("div",{className:"text-xl font-bold text-purple-600",children:Qe(W.totalBudget)})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 bg-white p-4 rounded-lg border shadow-sm",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(la,{open:l,onOpenChange:x,children:[e.jsx(ia,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(na,{className:"w-4 h-4"}),"Colunas"]})}),e.jsx(oa,{className:"w-64",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Colunas VisÃ­veis"}),e.jsx("div",{className:"space-y-3",children:[{key:"id",label:"ID"},{key:"project",label:"Projeto"},{key:"responsible",label:"ResponsÃ¡vel"},{key:"recurring",label:"Recorrente"},{key:"status",label:"Status"},{key:"archived",label:"Arquivado"}].map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(da,{id:a.key,checked:D[a.key],onCheckedChange:o=>s({...D,[a.key]:o})}),e.jsx("label",{htmlFor:a.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:a.label})]},a.key))})]})})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>C(!0),children:[e.jsx(ba,{className:"w-4 h-4"}),"Filtrar"]}),e.jsxs(g,{variant:"outline",onClick:Ve,size:"sm",className:"gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Exportar"]}),e.jsxs(g,{onClick:te,size:"sm",className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ca,{className:"w-4 h-4"}),"Novo Projeto"]})]})]}),e.jsx(b,{children:e.jsx(v,{className:"p-0",children:e.jsx(pa,{title:"",columns:We,rows:we,isLoading:m,error:f,actions:Ye,searchable:!0,searchPlaceholder:"Buscar projetos...",emptyMessage:E==="all"&&M==="all"&&z==="all"&&O===""&&R===""?"Nenhum projeto cadastrado":"Nenhum projeto encontrado com os filtros aplicados",onRowClick:ye,rowClassName:(a,o)=>o%2===0?"bg-white hover:bg-blue-50/30 cursor-pointer transition-colors h-12":"bg-slate-50/50 hover:bg-blue-50/30 cursor-pointer transition-colors h-12"})})})]}),e.jsx(ke,{open:r,onOpenChange:C,children:e.jsxs(Se,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Filtros AvanÃ§ados"})}),e.jsxs("div",{className:"space-y-6",children:[V.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{className:"text-sm font-semibold",children:"Filtros Salvos"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(a=>e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md pl-3 pr-1 py-1",children:[e.jsx(le,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx(g,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>Ue(a),children:a.name}),e.jsx(g,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>He(a.id),children:e.jsx(ie,{className:"w-3 h-3"})})]},a.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"status-filter",children:"Status"}),e.jsxs(me,{value:E,onValueChange:I,children:[e.jsx(xe,{id:"status-filter",children:e.jsx(pe,{placeholder:"Selecione o status"})}),e.jsxs(he,{children:[e.jsx(F,{value:"all",children:"Todos"}),e.jsx(F,{value:"planning",children:"Planejamento"}),e.jsx(F,{value:"active",children:"Ativo"}),e.jsx(F,{value:"on_hold",children:"Em Espera"}),e.jsx(F,{value:"completed",children:"ConcluÃ­do"}),e.jsx(F,{value:"cancelled",children:"Cancelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"client-filter",children:"Cliente"}),e.jsxs(me,{value:M,onValueChange:J,children:[e.jsx(xe,{id:"client-filter",children:e.jsx(pe,{placeholder:"Selecione o cliente"})}),e.jsxs(he,{children:[e.jsx(F,{value:"all",children:"Todos"}),Je.map(a=>e.jsx(F,{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"manager-filter",children:"Gerente"}),e.jsxs(me,{value:z,onValueChange:P,children:[e.jsx(xe,{id:"manager-filter",children:e.jsx(pe,{placeholder:"Selecione o gerente"})}),e.jsxs(he,{children:[e.jsx(F,{value:"all",children:"Todos"}),Ke.map(a=>e.jsx(F,{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"OrÃ§amento"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ee,{type:"number",placeholder:"MÃ­nimo",value:O,onChange:a=>A(a.target.value)}),e.jsx("span",{className:"text-gray-500",children:"atÃ©"}),e.jsx(ee,{type:"number",placeholder:"MÃ¡ximo",value:R,onChange:a=>K(a.target.value)})]})]})]})]}),e.jsxs(De,{className:"flex-col sm:flex-row gap-2",children:[e.jsxs(g,{variant:"outline",onClick:Ge,className:"gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Limpar Filtros"]}),e.jsxs(g,{variant:"outline",onClick:()=>$(!0),className:"gap-2",children:[e.jsx(ma,{className:"w-4 h-4"}),"Salvar Filtro"]}),e.jsx(g,{onClick:()=>C(!1),children:"Aplicar Filtros"})]})]})}),e.jsx(ke,{open:oe,onOpenChange:$,children:e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Salvar Filtro"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"filter-name",children:"Nome do Filtro"}),e.jsx(ee,{id:"filter-name",placeholder:"Ex: Projetos Ativos de TI",value:Q,onChange:a=>se(a.target.value)})]})}),e.jsxs(De,{children:[e.jsx(g,{variant:"outline",onClick:()=>$(!1),children:"Cancelar"}),e.jsx(g,{onClick:$e,children:"Salvar"})]})]})}),e.jsx(ha,{open:c,onClose:Ie,onSubmit:qe,initialData:t}),e.jsx(ga,{open:k.open,onClose:()=>S({open:!1}),onConfirm:Le,title:"Confirmar ExclusÃ£o",message:`Tem certeza que deseja excluir o projeto "${k.project?.name}"? Esta aÃ§Ã£o nÃ£o pode ser desfeita.`,confirmText:"Excluir"}),e.jsx(Sa,{open:p.open,onClose:()=>X({open:!1}),project:p.project,tasks:p.project?Da[p.project.id]:[],files:p.project?Fa[p.project.id]:[]})]})}export{Wa as default};
