import{bU as O,bM as U,r as n,j as e,f as l,bW as L,B as r,l as V,p as B,m as F,C as d,a as x,d as h,g as m,n as y,T as q,h as G,i as j,k as p,aj as $,b9 as Q,R as H,a2 as X,am as C,az as _,F as W,D as J,v as K,w as Y,x as Z,af as D,aR as ee,ag as se,bh as ae,a1 as te,ah as le}from"./index-D2dOrPZ8.js";import{D as E}from"./download--rFCaPFG.js";import{C as re}from"./circle-x-D0uMI9ez.js";import{M as v}from"./message-square-Bm6iE3sR.js";import{S as ie}from"./square-pen-Bi43ABVd.js";import{P as T}from"./paperclip-DZJYHyoe.js";const Ne=()=>{const k=O(),S=U();k.id;const A="bg-gray-50",[t]=n.useState({taskId:"T19572",title:"Card Post Estático ou Motion (8 criativos + 8 copy)",project:"Sebrae CE",client:"Outros",agency:"Sebrae",createdAt:new Date("2025-09-30T18:56:00"),stages:[{id:"stage-1",number:1,title:"8x Conteúdo e Legenda para Criativo",status:"completed",deliveryDeadline:new Date("2025-10-06T23:59:00"),executionDeadline:new Date("2025-10-06T23:59:00"),approvalDeadline:new Date("2025-10-16T23:59:00"),leader:{name:"Michelle Teruel",avatar:""},rating:5,items:[{id:"item-1",name:"[T19572 - 8x Conteúdo e Legenda para Criativo] V3",type:"ARQUIVO",status:"approved",fileUrl:"#"}],comments:[{id:"c1",author:"Michelle Teruel",role:"Líder",content:"Aprovado! Excelente trabalho na criação do conteúdo.",timestamp:new Date("2025-10-06T15:30:00")}]},{id:"stage-2",number:2,title:"8x Criativo Estático ou Motion",status:"in-progress",deliveryDeadline:new Date("2025-10-07T18:00:00"),executionDeadline:new Date("2025-10-07T18:00:00"),approvalDeadline:new Date("2025-10-21T23:59:00"),leader:{name:"Samuel Gouvea",avatar:""},items:[{id:"item-2",name:"[T19572 - 8x Criativo Estático ou Motion] V3",type:"ARQUIVO",status:"pending",fileUrl:"#"}],comments:[{id:"c2",author:"Samuel Gouvea",role:"Líder",content:"Aguardando revisão dos criativos enviados.",timestamp:new Date("2025-10-07T14:20:00")}],isEmergency:!0,rejectionCount:3}]}),[g,R]=n.useState(new Set(["stage-2"])),[ne,ce]=n.useState(""),[de,xe]=n.useState(null),[z,N]=n.useState(!1),[b,w]=n.useState(""),[o,u]=n.useState([]),i=s=>s.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=s=>{const a=new Set(g);a.has(s)?a.delete(s):a.add(s),R(a)},M=()=>{console.log("Rejecting stage with:",{rejectionComment:b,rejectionFiles:o}),N(!1),w(""),u([])},I=s=>{s.target.files&&u(Array.from(s.target.files))};return e.jsxs("div",{className:`min-h-screen ${A}`,children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border-b sticky top-0 z-10 shadow-sm",children:e.jsxs("div",{className:"container mx-auto pt-2 px-6 pb-2",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1.5",children:e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>S(-1),className:"text-xs h-7",children:[e.jsx(L,{className:"h-3 w-3 mr-1"}),"Voltar"]})}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0 flex-wrap",children:[e.jsxs("h1",{className:"text-sm font-semibold text-gray-700 truncate",children:["[",t.taskId,"] ",t.title]}),t.stages.some(s=>s.isEmergency)&&e.jsx(r,{className:"bg-red-500 text-white text-xs px-1.5 py-0",children:"EMERGENCIAL"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"h-3 w-3"}),t.project]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),t.client]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),i(t.createdAt)]})]})]}),e.jsxs(l,{variant:"outline",size:"sm",className:"text-xs h-7 bg-transparent flex-shrink-0",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Exportar"]})]})]})}),e.jsxs("div",{className:"container mx-auto pt-6 px-6 pb-12",children:[e.jsxs(d,{className:"shadow-lg border-0 bg-white/95 backdrop-blur-sm mb-6",children:[e.jsx(x,{children:e.jsx(h,{className:"text-base",children:"Progresso das Etapas"})}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-6 left-0 right-0 h-1 bg-gray-200",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500",style:{width:`${t.stages.filter(s=>s.status==="completed").length/t.stages.length*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:t.stages.map((s,a)=>e.jsxs("div",{className:"flex flex-col items-center",style:{width:`${100/t.stages.length}%`},children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border-4 bg-white transition-all duration-300 ${s.status==="completed"?"border-green-500 text-green-500":s.status==="in-progress"?"border-blue-500 text-blue-500 ring-4 ring-blue-100":s.status==="rejected"?"border-red-500 text-red-500":"border-gray-300 text-gray-400"}`,children:s.status==="completed"?e.jsx(y,{className:"h-6 w-6"}):s.status==="rejected"?e.jsx(re,{className:"h-6 w-6"}):e.jsx("span",{className:"font-bold",children:s.number})}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("p",{className:`text-sm font-medium ${s.status==="in-progress"?"text-blue-600":"text-gray-600"}`,children:["Etapa ",s.number]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-[120px]",children:s.title}),s.status==="in-progress"&&e.jsx(r,{className:"mt-2 bg-blue-500 text-white text-xs",children:"Atual"})]})]},s.id))})]})})]}),e.jsxs(q,{defaultValue:"stages",className:"w-full",children:[e.jsxs(G,{className:"grid w-full grid-cols-4 mb-6 text-xs",children:[e.jsxs(j,{value:"stages",className:"text-xs",children:["Etapas (",t.stages.length,")"]}),e.jsxs(j,{value:"comments",className:"text-xs",children:["Comentários (",t.stages.reduce((s,a)=>s+a.comments.length,0),")"]}),e.jsx(j,{value:"attachments",className:"text-xs",children:"Anexos"}),e.jsx(j,{value:"info",className:"text-xs",children:"Informações Gerais"})]}),e.jsx(p,{value:"stages",className:"space-y-4",children:t.stages.map(s=>e.jsxs(d,{className:`shadow-sm border ${s.status==="completed"?"bg-gray-50":"bg-white"}`,children:[e.jsx(x,{className:"cursor-pointer hover:bg-gray-50/50 transition-all py-4",onClick:()=>P(s.id),children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.status==="completed"&&e.jsx(y,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Nº ",s.number,". ",s.title]}),s.rating&&e.jsx("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:Array.from({length:s.rating}).map((a,c)=>e.jsx($,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"},c))})]}),e.jsx(l,{variant:"ghost",size:"sm",className:"flex-shrink-0",children:g.has(s.id)?e.jsx(Q,{className:"h-5 w-5 text-gray-500"}):e.jsx(H,{className:"h-5 w-5 text-gray-500"})})]})}),g.has(s.id)&&e.jsxs(m,{className:"space-y-6 pt-0",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Status"}),e.jsx(r,{className:"bg-yellow-500 text-white font-semibold text-xs px-3 py-1",children:"APROVAÇÃO PENDENTE - AGÊNCIA"}),s.rejectionCount&&s.rejectionCount>0&&e.jsx(r,{className:"bg-pink-500 text-white font-semibold text-xs px-2 py-1",children:s.rejectionCount})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Prazo de Entrega"}),e.jsx("p",{className:"font-semibold text-gray-900",children:i(s.deliveryDeadline)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Prazo de Execução"}),e.jsx("p",{className:"font-semibold text-gray-900",children:i(s.executionDeadline)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Prazo de Aprovação"}),e.jsx("p",{className:"font-semibold text-gray-900",children:i(s.approvalDeadline)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Líder"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:s.leader.name}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(v,{className:"h-3 w-3 text-white"})})]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 flex-shrink-0",children:[e.jsx(l,{size:"sm",className:"bg-green-500 hover:bg-green-600 text-white h-9 w-9 p-0",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white h-9 w-9 p-0",children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white h-9 w-9 p-0",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",className:"bg-blue-700 hover:bg-blue-800 text-white h-9 w-9 p-0",children:e.jsx(C,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4 text-base",children:"Itens entregues para aprovação da etapa"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Qualificação"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Agência"})]})}),e.jsx("tbody",{children:s.items.map(a=>e.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium h-8",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),a.name]}),e.jsx(l,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(C,{className:"h-4 w-4 text-blue-600"})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(r,{className:"bg-blue-500 text-white font-medium text-xs",children:"ARQUIVO"})}),e.jsxs("td",{className:"py-3 px-4",children:[a.status==="approved"&&e.jsx(r,{className:"bg-green-500 text-white font-medium text-xs",children:"APROVADO"}),a.status==="rejected"&&e.jsx(r,{className:"bg-red-500 text-white font-medium text-xs",children:"REPROVADO"}),a.status==="pending"&&e.jsx(r,{className:"bg-yellow-500 text-white font-medium text-xs",children:"PENDENTE"})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(r,{className:"bg-yellow-500 text-white font-medium text-xs",children:"PENDENTE"})})]},a.id))})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Comentários (",s.comments.length,")"]}),e.jsx("div",{className:"space-y-3",children:s.comments.map(a=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:a.author}),e.jsx("p",{className:"text-xs text-gray-500",children:a.role})]}),e.jsx("p",{className:"text-xs text-gray-500",children:i(a.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-700",children:a.content}),a.attachments&&a.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:a.attachments.map((c,f)=>e.jsxs(r,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),c.name]},f))})]},a.id))})]})]})]},s.id))}),e.jsx(p,{value:"comments",className:"space-y-4",children:e.jsxs(d,{className:"shadow-lg border-0 bg-white/95 backdrop-blur-sm",children:[e.jsx(x,{children:e.jsx(h,{children:"Todos os Comentários"})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:t.stages.flatMap(s=>s.comments).map(s=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:s.author}),e.jsx("p",{className:"text-xs text-gray-500",children:s.role})]}),e.jsx("p",{className:"text-xs text-gray-500",children:i(s.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.content}),s.attachments&&s.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:s.attachments.map((a,c)=>e.jsxs(r,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),a.name]},c))})]},s.id))})})]})}),e.jsx(p,{value:"attachments",className:"space-y-4",children:e.jsxs(d,{className:"shadow-lg border-0 bg-white/95 backdrop-blur-sm",children:[e.jsx(x,{children:e.jsx(h,{children:"Todos os Anexos"})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:t.stages.flatMap(s=>s.items.filter(a=>a.fileUrl)).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-sm",children:s.name}),e.jsx(r,{variant:"outline",className:"text-xs",children:s.type})]}),e.jsxs(l,{size:"sm",variant:"outline",className:"bg-transparent",children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"Baixar"]})]},s.id))})})]})}),e.jsx(p,{value:"info",className:"space-y-4",children:e.jsxs(d,{className:"shadow-lg border-0 bg-white/95 backdrop-blur-sm",children:[e.jsx(x,{children:e.jsx(h,{children:"Informações Gerais da Tarefa"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Título"}),e.jsx("p",{className:"text-gray-700",children:t.title})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Projeto"}),e.jsx("p",{className:"text-gray-700",children:t.project})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Cliente"}),e.jsx("p",{className:"text-gray-700",children:t.client})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Agência"}),e.jsx("p",{className:"text-gray-700",children:t.agency})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Data de Criação"}),e.jsx("p",{className:"text-gray-700",children:i(t.createdAt)})]})]})})]})})]})]}),e.jsx(J,{open:z,onOpenChange:N,children:e.jsxs(K,{className:"max-w-2xl",children:[e.jsx(Y,{children:e.jsx(Z,{children:"Rejeitar Etapa"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Motivo da Rejeição *"}),e.jsx(ee,{placeholder:"Descreva o motivo da rejeição e as correções necessárias...",value:b,onChange:s=>w(s.target.value),rows:5,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Anexar Arquivos (opcional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[e.jsx(se,{type:"file",multiple:!0,onChange:I,className:"hidden",id:"rejection-files"}),e.jsxs("label",{htmlFor:"rejection-files",className:"cursor-pointer",children:[e.jsx(ae,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clique para selecionar arquivos"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ou arraste e solte aqui"})]})]}),o.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:o.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s.name}),e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>u(o.filter((c,f)=>f!==a)),children:e.jsx(te,{className:"h-4 w-4"})})]},a))})]})]}),e.jsxs(le,{children:[e.jsx(l,{variant:"outline",onClick:()=>N(!1),children:"Cancelar"}),e.jsx(l,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:M,disabled:!b.trim(),children:"Rejeitar e Enviar Feedback"})]})]})})]})};export{Ne as default};
