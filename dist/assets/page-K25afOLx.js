import{r as n,j as e,f as h,P as w,D as T,v as H,w as q,x as z,ae as B,af as r,ag as m,br as E,ai as M,b1 as G,aM as J,ap as L,aE as U,aF as K,aG as X,aH as Z,aw as Q,aI as W,aX as Y,aJ as _,aK as ee,Z as S,bq as o,C as j,g,a6 as F,U as ae,a2 as se,a as ie,d as te,B as le}from"./index-D2dOrPZ8.js";import{P as re}from"./page-header-DpITyWPC.js";import{u as ne}from"./specialty-context-B5jJAh8-.js";import{S as oe}from"./square-pen-Bi43ABVd.js";const y=n.memo(({specialty:i,onEdit:x,onDelete:p})=>e.jsxs(j,{className:"hover:shadow-lg transition-shadow duration-200",children:[e.jsx(ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(te,{className:"text-lg flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-blue-600"}),i.name]}),e.jsxs(le,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[i.activeNomades," nômades"]})]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Iniciante"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["R$ ",i.rates.iniciante,"/h"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Júnior"}),e.jsxs("span",{className:"font-semibold text-blue-700",children:["R$ ",i.rates.junior,"/h"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-purple-600",children:"Pleno"}),e.jsxs("span",{className:"font-semibold text-purple-700",children:["R$ ",i.rates.pleno,"/h"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-green-600",children:"Sênior"}),e.jsxs("span",{className:"font-semibold text-green-700",children:["R$ ",i.rates.senior,"/h"]})]})]}),i.aiEnabled&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gradient-to-r from-violet-50 to-purple-50 rounded-lg border border-violet-200",children:[e.jsxs("span",{className:"text-sm text-violet-600 flex items-center gap-1.5",children:[e.jsx(E,{className:"h-4 w-4"}),"IA Habilitada"]}),e.jsxs("span",{className:"font-semibold text-violet-700",children:["R$ ",i.aiFixedValue?.toFixed(2)||"0.00"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(h,{size:"sm",variant:"outline",className:"flex-1 bg-transparent",onClick:()=>x(i),children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"Editar"]}),e.jsx(h,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50 bg-transparent",onClick:()=>p(i),children:e.jsx(S,{className:"h-4 w-4"})})]})]})]}));y.displayName="SpecialtyCard";const D=n.memo(({totalSpecialties:i,totalNomades:x,avgRatePleno:p})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(j,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total de Especialidades"}),e.jsx("p",{className:"text-3xl font-bold text-blue-700 mt-2",children:i})]}),e.jsx(F,{className:"h-10 w-10 text-blue-500"})]})})}),e.jsx(j,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Nômades Ativos"}),e.jsx("p",{className:"text-3xl font-bold text-green-700 mt-2",children:x})]}),e.jsx(ae,{className:"h-10 w-10 text-green-500"})]})})}),e.jsx(j,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Valor Médio (Pleno)"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-700 mt-2",children:["R$ ",p,"/h"]})]}),e.jsx(se,{className:"h-10 w-10 text-purple-500"})]})})})]}));D.displayName="StatsCards";function pe(){const{specialties:i,addSpecialty:x,updateSpecialty:p,deleteSpecialty:A}=ne(),[V,u]=n.useState(!1),[d,N]=n.useState(null),[v,f]=n.useState(!1),[l,b]=n.useState({isOpen:!1,specialty:null}),[s,t]=n.useState({name:"",iniciante:"",junior:"",pleno:"",senior:"",aiEnabled:!1,aiFixedValue:""}),{totalSpecialties:P,totalNomades:I,avgRatePleno:R}=n.useMemo(()=>({totalSpecialties:i.length,totalNomades:i.reduce((a,c)=>a+c.activeNomades,0),avgRatePleno:i.length>0?Math.round(i.reduce((a,c)=>a+c.rates.pleno,0)/i.length):0}),[i]),C=a=>{a?(N(a),t({name:a.name,iniciante:a.rates.iniciante.toString(),junior:a.rates.junior.toString(),pleno:a.rates.pleno.toString(),senior:a.rates.senior.toString(),aiEnabled:a.aiEnabled||!1,aiFixedValue:a.aiFixedValue?.toString()||""})):(N(null),t({name:"",iniciante:"",junior:"",pleno:"",senior:"",aiEnabled:!1,aiFixedValue:""})),u(!0)},k=async()=>{if(!s.name.trim()){o({title:"Campo obrigatório",description:"Preencha o nome da especialidade",variant:"destructive"});return}if(!s.iniciante||!s.junior||!s.pleno||!s.senior){o({title:"Campos obrigatórios",description:"Preencha todos os valores por hora",variant:"destructive"});return}if(s.aiEnabled&&!s.aiFixedValue){o({title:"Valor da IA obrigatório",description:"Preencha o valor fixo da IA quando habilitada",variant:"destructive"});return}f(!0),await new Promise(c=>setTimeout(c,200));const a={id:d?.id||Date.now(),name:s.name,rates:{iniciante:Number.parseFloat(s.iniciante),junior:Number.parseFloat(s.junior),pleno:Number.parseFloat(s.pleno),senior:Number.parseFloat(s.senior)},activeNomades:d?.activeNomades||0,status:"active",aiEnabled:s.aiEnabled,aiFixedValue:s.aiFixedValue?Number.parseFloat(s.aiFixedValue):void 0};try{d?(p(d.id,a),o({title:"Especialidade atualizada",description:`${s.name} foi atualizado com sucesso`})):(x(a),o({title:"Especialidade criada",description:`${s.name} foi criado com sucesso`})),u(!1),t({name:"",iniciante:"",junior:"",pleno:"",senior:"",aiEnabled:!1,aiFixedValue:""})}catch{o({title:"Erro ao salvar",description:"Ocorreu um erro ao salvar a especialidade. Tente novamente.",variant:"destructive"})}finally{f(!1)}},O=a=>{b({isOpen:!0,specialty:a})},$=()=>{l.specialty&&(A(l.specialty.id),o({title:"Especialidade removida",description:`${l.specialty.name} foi removido com sucesso`}),b({isOpen:!1,specialty:null}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{title:"Gestão de Especialidades",description:"Configure valores por hora para cada especialidade e nível de experiência",action:e.jsxs(h,{onClick:()=>C(),className:"bg-blue-500 hover:bg-blue-600 text-white",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Nova Especialidade"]})}),e.jsx(D,{totalSpecialties:P,totalNomades:I,avgRatePleno:R}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(a=>e.jsx(y,{specialty:a,onEdit:C,onDelete:O},a.id))}),e.jsx(T,{open:V,onOpenChange:u,children:e.jsxs(H,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsx(z,{children:d?"Editar Especialidade":"Nova Especialidade"}),e.jsx(B,{children:"Configure o nome da especialidade e os valores por hora para cada nível de experiência."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",children:"Nome da Especialidade"}),e.jsx(m,{id:"name",placeholder:"Ex: Design Gráfico",value:s.name,onChange:a=>t({...s,name:a.target.value})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Valores por Hora (R$)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"iniciante",className:"text-xs text-gray-600",children:"Iniciante"}),e.jsx(m,{id:"iniciante",type:"number",placeholder:"35",value:s.iniciante,onChange:a=>t({...s,iniciante:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"junior",className:"text-xs text-blue-600",children:"Júnior"}),e.jsx(m,{id:"junior",type:"number",placeholder:"50",value:s.junior,onChange:a=>t({...s,junior:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"pleno",className:"text-xs text-purple-600",children:"Pleno"}),e.jsx(m,{id:"pleno",type:"number",placeholder:"75",value:s.pleno,onChange:a=>t({...s,pleno:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"senior",className:"text-xs text-green-600",children:"Senior"}),e.jsx(m,{id:"senior",type:"number",placeholder:"120",value:s.senior,onChange:a=>t({...s,senior:a.target.value})})]})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-gradient-to-r from-violet-50 to-purple-50 rounded-lg border border-violet-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-violet-600"}),e.jsx(r,{className:"text-sm font-medium text-violet-700",children:"Integração com IA"})]}),e.jsx(M,{checked:s.aiEnabled,onCheckedChange:a=>t({...s,aiEnabled:a})})]}),e.jsx("p",{className:"text-xs text-violet-600",children:"Permite que a IA execute tarefas ou auxilie o profissional nesta especialidade"}),s.aiEnabled&&e.jsxs("div",{className:"pt-2",children:[e.jsx(r,{htmlFor:"aiFixedValue",className:"text-xs text-violet-700",children:"Valor Fixo da IA (R$)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(G,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-violet-400"}),e.jsx(m,{id:"aiFixedValue",type:"number",step:"0.01",placeholder:"25.00",value:s.aiFixedValue,onChange:a=>t({...s,aiFixedValue:a.target.value}),className:"pl-9 border-violet-300 focus:border-violet-500"})]}),e.jsx("p",{className:"text-xs text-violet-500 mt-1",children:"Este valor será somado automaticamente aos serviços que utilizarem IA"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(h,{className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white",onClick:k,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):d?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Salvar Alterações"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Criar Especialidade"]})}),e.jsx(h,{variant:"outline",onClick:()=>u(!1),disabled:v,children:"Cancelar"})]})]})]})}),e.jsx(U,{open:l.isOpen,onOpenChange:a=>!a&&b({isOpen:!1,specialty:null}),children:e.jsxs(K,{children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-red-500"}),"Confirmar Exclusão"]}),e.jsxs(W,{children:["Tem certeza que deseja remover a especialidade ",e.jsx("strong",{children:l.specialty?.name}),"? Esta ação não pode ser desfeita.",l.specialty&&l.specialty.activeNomades>0&&e.jsxs("span",{className:"block mt-2 text-amber-600",children:[e.jsx("strong",{children:"Atenção:"})," Existem ",l.specialty.activeNomades," nômades ativos nesta especialidade."]})]})]}),e.jsxs(Y,{children:[e.jsx(_,{children:"Cancelar"}),e.jsxs(ee,{onClick:$,className:"bg-red-500 hover:bg-red-600",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Remover"]})]})]})})]})}export{pe as default};
