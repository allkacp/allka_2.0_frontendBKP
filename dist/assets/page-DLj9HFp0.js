import{r as d,j as e,D as A,ax as P,f as g,q as U,v as E,w as F,x as I,ae as L,C as h,a as p,d as u,U as Q,g as j,z as J,n as K,af as r,ag as O,E as v,H as f,I as b,J as N,K as i,e as $,B as x,T as G,h as W,i as y,k as C}from"./index-D2dOrPZ8.js";import{T as X}from"./triangle-alert-Cjhkzg0C.js";import{A as Y,a as Z}from"./arrow-up-DskKQPw8.js";function de(){const[B,w]=d.useState([]),[n,k]=d.useState(null),[ee,se]=d.useState([]),[ae,te]=d.useState([]),[ie,re]=d.useState(null),[M,z]=d.useState(!0),[t,_]=d.useState({partner_level:"all",match_status:"all",capacity_status:"all",report_status:"all",search:""});d.useEffect(()=>{const s=[{id:"1",agency_id:"agency_1",agency_name:"Creative Partners",partner_level:"elite",position:1,match_enabled:!0,has_pending_reports:!1,pending_reports_count:0,last_report_date:"2024-01-15",active_projects:3,max_capacity:8,satisfaction_rating:4.8,completion_rate:95,last_project_assigned:"2024-01-10",total_projects_assigned:24,joined_queue:"2023-06-15",is_new_partner:!1},{id:"2",agency_id:"agency_2",agency_name:"Digital Solutions",partner_level:"premium",position:2,match_enabled:!0,has_pending_reports:!0,pending_reports_count:2,last_report_date:"2024-01-05",active_projects:5,max_capacity:6,satisfaction_rating:4.2,completion_rate:88,total_projects_assigned:18,joined_queue:"2023-08-20",is_new_partner:!1},{id:"3",agency_id:"agency_3",agency_name:"Innovation Hub",partner_level:"basic",position:3,match_enabled:!1,has_pending_reports:!1,pending_reports_count:0,active_projects:2,max_capacity:4,satisfaction_rating:4.5,completion_rate:92,total_projects_assigned:8,joined_queue:"2024-01-01",is_new_partner:!0,temporary_suspension:{reason:"Aguardando documentação",until:"2024-01-25",suspended_by:"admin_1"}}],a={total_agencies:15,active_agencies:12,suspended_agencies:3,new_partners_count:2,agencies_by_level:{basic:6,premium:5,elite:4},average_satisfaction:4.4,average_completion_rate:91,total_projects_distributed:156,agencies_with_pending_reports:4,agencies_at_capacity:2};w(s),k(a),z(!1)},[]);const S=B.filter(s=>{if(t.partner_level!=="all"&&s.partner_level!==t.partner_level||t.match_status!=="all"&&(t.match_status==="enabled"&&!s.match_enabled||t.match_status==="disabled"&&s.match_enabled))return!1;if(t.capacity_status!=="all"){const a=s.active_projects/s.max_capacity;if(t.capacity_status==="available"&&a>=.8||t.capacity_status==="at_capacity"&&(a<.8||a>1)||t.capacity_status==="over_capacity"&&a<=1)return!1}return!(t.report_status!=="all"&&(t.report_status==="up_to_date"&&s.has_pending_reports||t.report_status==="pending"&&!s.has_pending_reports)||t.search&&!s.agency_name.toLowerCase().includes(t.search.toLowerCase()))}),D=(s,a)=>{w(c=>{const l=[...c],o=l.findIndex(q=>q.id===s);if(o===-1)return c;const m=a==="up"?o-1:o+1;if(m<0||m>=l.length)return c;const V=l[o];return l[o]=l[m],l[m]=V,l[o].position=o+1,l[m].position=m+1,l})},H=s=>{w(a=>a.map(c=>c.id===s?{...c,match_enabled:!c.match_enabled}:c))},R=s=>s.temporary_suspension?e.jsx(x,{variant:"destructive",children:"Suspenso"}):s.match_enabled?s.has_pending_reports?e.jsx(x,{variant:"outline",className:"border-yellow-500 text-yellow-700",children:"Pendências"}):s.active_projects>=s.max_capacity?e.jsx(x,{variant:"outline",className:"border-orange-500 text-orange-700",children:"Capacidade Máxima"}):e.jsx(x,{variant:"default",className:"bg-green-500",children:"Ativo"}):e.jsx(x,{variant:"secondary",children:"Inativo"}),T=s=>{const a={basic:"bg-gray-500",premium:"bg-blue-500",elite:"bg-purple-500"};return e.jsx(x,{className:a[s],children:s.toUpperCase()})};return M?e.jsx("div",{className:"space-y-6 my-0 px-1 py-1 mx-3.5",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((s,a)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},a))})]})}):e.jsxs("div",{className:"space-y-6 my-0 px-1 py-1 mx-3.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fila de Match"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Distribuição automatizada de projetos premium para agências Partner"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(A,{children:[e.jsx(P,{asChild:!0,children:e.jsxs(g,{variant:"outline",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Configurar Regras"]})}),e.jsxs(E,{className:"max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(I,{children:"Regras de Distribuição"}),e.jsx(L,{children:"Configure os critérios para distribuição automática de projetos"})]}),e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Interface de configuração de regras em desenvolvimento"})]})]})})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Total de Agências"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total_agencies}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.active_agencies," ativas, ",n.suspended_agencies," suspensas"]})]})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Projetos Distribuídos"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total_projects_distributed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Este mês"})]})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Satisfação Média"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.average_satisfaction.toFixed(1)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.average_completion_rate,"% taxa de conclusão"]})]})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Alertas"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.agencies_with_pending_reports}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Agências com pendências"})]})]})]}),e.jsxs(h,{children:[e.jsx(p,{children:e.jsx(u,{children:"Filtros"})}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"search",children:"Buscar Agência"}),e.jsx(O,{id:"search",placeholder:"Nome da agência...",value:t.search,onChange:s=>_(a=>({...a,search:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"level",children:"Nível Partner"}),e.jsxs(v,{value:t.partner_level,onValueChange:s=>_(a=>({...a,partner_level:s})),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(N,{children:[e.jsx(i,{value:"all",children:"Todos os Níveis"}),e.jsx(i,{value:"basic",children:"Basic"}),e.jsx(i,{value:"premium",children:"Premium"}),e.jsx(i,{value:"elite",children:"Elite"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"match",children:"Status Match"}),e.jsxs(v,{value:t.match_status,onValueChange:s=>_(a=>({...a,match_status:s})),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(N,{children:[e.jsx(i,{value:"all",children:"Todos"}),e.jsx(i,{value:"enabled",children:"Ativo"}),e.jsx(i,{value:"disabled",children:"Inativo"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"capacity",children:"Capacidade"}),e.jsxs(v,{value:t.capacity_status,onValueChange:s=>_(a=>({...a,capacity_status:s})),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(N,{children:[e.jsx(i,{value:"all",children:"Todas"}),e.jsx(i,{value:"available",children:"Disponível"}),e.jsx(i,{value:"at_capacity",children:"Na Capacidade"}),e.jsx(i,{value:"over_capacity",children:"Acima da Capacidade"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"reports",children:"Reports"}),e.jsxs(v,{value:t.report_status,onValueChange:s=>_(a=>({...a,report_status:s})),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(N,{children:[e.jsx(i,{value:"all",children:"Todos"}),e.jsx(i,{value:"up_to_date",children:"Em Dia"}),e.jsx(i,{value:"pending",children:"Pendentes"})]})]})]})]})})]}),e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Fila de Distribuição"}),e.jsx($,{children:"Ordem de prioridade para distribuição de novos projetos premium"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:S.map((s,a)=>e.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg ${s.match_enabled&&!s.temporary_suspension?"bg-white":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-400 w-8",children:["#",s.position]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:s.agency_name}),T(s.partner_level),R(s),s.is_new_partner&&e.jsx(x,{variant:"outline",className:"border-green-500 text-green-700",children:"Novo Partner"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{children:["Projetos: ",s.active_projects,"/",s.max_capacity]}),e.jsxs("span",{children:["Satisfação: ",s.satisfaction_rating,"/5"]}),e.jsxs("span",{children:["Conclusão: ",s.completion_rate,"%"]}),s.has_pending_reports&&e.jsxs("span",{className:"text-yellow-600",children:[s.pending_reports_count," reports pendentes"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>D(s.id,"up"),disabled:a===0,children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>D(s.id,"down"),disabled:a===S.length-1,children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(g,{variant:s.match_enabled?"destructive":"default",size:"sm",onClick:()=>H(s.id),disabled:!!s.temporary_suspension,children:s.match_enabled?"Desativar":"Ativar"}),e.jsxs(A,{children:[e.jsx(P,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",children:"Detalhes"})}),e.jsxs(E,{className:"max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(I,{children:s.agency_name}),e.jsx(L,{children:"Detalhes da agência na fila de match"})]}),e.jsxs(G,{defaultValue:"info",className:"w-full",children:[e.jsxs(W,{className:"grid w-full grid-cols-3",children:[e.jsx(y,{value:"info",children:"Informações"}),e.jsx(y,{value:"performance",children:"Performance"}),e.jsx(y,{value:"history",children:"Histórico"})]}),e.jsxs(C,{value:"info",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Posição na Fila"}),e.jsxs("p",{className:"text-2xl font-bold",children:["#",s.position]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Nível Partner"}),e.jsx("p",{children:T(s.partner_level)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Projetos Ativos"}),e.jsxs("p",{children:[s.active_projects," de ",s.max_capacity]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Total Distribuído"}),e.jsxs("p",{children:[s.total_projects_assigned," projetos"]})]})]}),s.temporary_suspension&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800",children:"Suspensão Temporária"}),e.jsx("p",{className:"text-red-600",children:s.temporary_suspension.reason}),e.jsxs("p",{className:"text-sm text-red-500",children:["Até: ",new Date(s.temporary_suspension.until).toLocaleDateString()]})]})]}),e.jsxs(C,{value:"performance",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Satisfação do Cliente"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.satisfaction_rating,"/5"]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Taxa de Conclusão"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.completion_rate,"%"]})]})]}),s.has_pending_reports&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800",children:"Reports Pendentes"}),e.jsxs("p",{className:"text-yellow-600",children:[s.pending_reports_count," relatórios aguardando envio"]}),e.jsxs("p",{className:"text-sm text-yellow-500",children:["Último report:"," ",s.last_report_date?new Date(s.last_report_date).toLocaleDateString():"Nunca"]})]})]}),e.jsx(C,{value:"history",className:"space-y-4",children:e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Histórico de movimentações em desenvolvimento"})})]})]})]})]})]},s.id))})})]})]})}export{de as default};
