import{r as v,j as e,ap as K,T as z,h as F,i as j,a7 as b,q as P,U as o,k as u,aw as J,aN as E,af as i,ai as c,aP as X,an as W,B as m,f as d,R as Y,aT as Z,bL as _,b6 as N,a1 as te,ad as le,C,a as w,d as S,G as ce,g as T,ag as h,aR as ne,S as de,bK as oe}from"./index-D2dOrPZ8.js";import{M as ee}from"./message-square-Bm6iE3sR.js";import{P as xe}from"./page-header-DpITyWPC.js";function me({open:n=!1,onClose:x,embedded:A=!1}){const[l,G]=v.useState(!1),[M,R]=v.useState(!1),[f,$]=v.useState(null),[k]=v.useState([{id:"admins",name:"Administradores",description:"Usuários com acesso administrativo",userCount:5,color:"bg-red-100 text-red-700"},{id:"managers",name:"Gestores",description:"Gestores de projetos e equipes",userCount:12,color:"bg-blue-100 text-blue-700"},{id:"finance",name:"Financeiro",description:"Equipe financeira",userCount:8,color:"bg-green-100 text-green-700"},{id:"developers",name:"Desenvolvedores",description:"Equipe de desenvolvimento",userCount:25,color:"bg-purple-100 text-purple-700"},{id:"clients",name:"Clientes",description:"Clientes da plataforma",userCount:150,color:"bg-orange-100 text-orange-700"}]),[D,se]=v.useState([{id:"rule-1",name:"Alertas Críticos para Admins",description:"Todos os alertas de sistema vão para administradores",notificationTypes:["system-alerts","system-security"],recipients:{userIds:[],groupIds:["admins"]},enabled:!0},{id:"rule-2",name:"Aprovações para Gestores",description:"Notificações de aprovação para gestores e financeiro",notificationTypes:["approval-pending","approval-approved","approval-rejected"],recipients:{userIds:[],groupIds:["managers","finance"]},enabled:!0}]),[y,I]=v.useState([{id:"system-updates",label:"Atualizações do Sistema",description:"Notificações sobre atualizações e manutenções",enabled:!0,category:"system",recipients:{userIds:[],groupIds:[],sendToAll:!0}},{id:"system-alerts",label:"Alertas de Sistema",description:"Alertas críticos e avisos importantes",enabled:!0,category:"system",recipients:{userIds:[],groupIds:["admins"],sendToAll:!1}},{id:"system-security",label:"Segurança",description:"Notificações sobre segurança e acessos",enabled:!0,category:"system",recipients:{userIds:[],groupIds:["admins"],sendToAll:!1}},{id:"user-new",label:"Novos Usuários",description:"Quando um novo usuário se cadastra",enabled:!0,category:"users",recipients:{userIds:[],groupIds:["admins","managers"],sendToAll:!1}},{id:"user-login",label:"Logins de Usuários",description:"Quando usuários fazem login no sistema",enabled:!1,category:"users",recipients:{userIds:[],groupIds:[],sendToAll:!1}},{id:"user-changes",label:"Alterações de Perfil",description:"Quando usuários atualizam seus perfis",enabled:!0,category:"users",recipients:{userIds:[],groupIds:["admins"],sendToAll:!1}},{id:"project-new",label:"Novos Projetos",description:"Quando novos projetos são criados",enabled:!0,category:"projects",recipients:{userIds:[],groupIds:["managers","developers"],sendToAll:!1}},{id:"project-updates",label:"Atualizações de Projetos",description:"Quando projetos são atualizados",enabled:!0,category:"projects",recipients:{userIds:[],groupIds:[],sendToAll:!0}},{id:"project-completed",label:"Projetos Concluídos",description:"Quando projetos são finalizados",enabled:!0,category:"projects",recipients:{userIds:[],groupIds:["managers","clients"],sendToAll:!1}},{id:"approval-pending",label:"Aprovações Pendentes",description:"Quando há aprovações aguardando",enabled:!0,category:"approvals",recipients:{userIds:[],groupIds:["managers","finance"],sendToAll:!1}},{id:"approval-approved",label:"Aprovações Concedidas",description:"Quando aprovações são concedidas",enabled:!0,category:"approvals",recipients:{userIds:[],groupIds:["managers","finance"],sendToAll:!1}},{id:"approval-rejected",label:"Aprovações Rejeitadas",description:"Quando aprovações são rejeitadas",enabled:!0,category:"approvals",recipients:{userIds:[],groupIds:["managers","finance"],sendToAll:!1}}]),[p,ae]=v.useState({email:!0,push:!0,inApp:!0,sms:!1}),q=a=>{I(r=>r.map(s=>s.id===a?{...s,enabled:!s.enabled}:s))},g=a=>{ae(r=>({...r,[a]:!r[a]}))},U=a=>{I(r=>r.map(s=>s.id===a?{...s,recipients:{...s.recipients,sendToAll:!s.recipients.sendToAll}}:s))},V=(a,r)=>{I(s=>s.map(t=>{if(t.id===a){const ie=t.recipients.groupIds.includes(r)?t.recipients.groupIds.filter(re=>re!==r):[...t.recipients.groupIds,r];return{...t,recipients:{...t.recipients,groupIds:ie}}}return t}))},B=a=>{se(r=>r.map(s=>s.id===a?{...s,enabled:!s.enabled}:s))},L=async()=>{G(!0),await new Promise(a=>setTimeout(a,1e3)),G(!1),R(!0),setTimeout(()=>{R(!1),A||x()},1500)},Q=a=>({system:"Sistema",users:"Usuários",projects:"Projetos",approvals:"Aprovações"})[a]||a,O=a=>({system:"bg-blue-100 text-blue-700",users:"bg-green-100 text-green-700",projects:"bg-purple-100 text-purple-700",approvals:"bg-orange-100 text-orange-700"})[a]||"bg-gray-100 text-gray-700",H=y.reduce((a,r)=>(a[r.category]||(a[r.category]=[]),a[r.category].push(r),a),{});return A?e.jsxs("div",{className:"space-y-6",children:[M&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center space-x-3",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Preferências salvas com sucesso!"})]}),e.jsxs(z,{defaultValue:"notifications",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(j,{value:"notifications",className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Notificações"})]}),e.jsxs(j,{value:"rules",className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Regras de Distribuição"})]}),e.jsxs(j,{value:"groups",className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{children:"Grupos"})]})]}),e.jsxs(u,{value:"notifications",className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Canais de Notificação"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione os canais pelos quais os usuários receberão notificações"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-email",className:"font-medium cursor-pointer",children:"E-mail"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações por e-mail"})]})]}),e.jsx(c,{id:"channel-email",checked:p.email,onCheckedChange:()=>g("email")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(b,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-push",className:"font-medium cursor-pointer",children:"Push"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações push"})]})]}),e.jsx(c,{id:"channel-push",checked:p.push,onCheckedChange:()=>g("push")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-inApp",className:"font-medium cursor-pointer",children:"In-App"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações no app"})]})]}),e.jsx(c,{id:"channel-inApp",checked:p.inApp,onCheckedChange:()=>g("inApp")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-sms",className:"font-medium cursor-pointer",children:"SMS"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações por SMS"})]})]}),e.jsx(c,{id:"channel-sms",checked:p.sms,onCheckedChange:()=>g("sms")})]})]})]}),e.jsx(W,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tipos de Notificação e Destinatários"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure quem receberá cada tipo de notificação"})]}),Object.entries(H).map(([a,r])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:`${O(a)} text-xs font-medium`,children:Q(a)}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.filter(s=>s.enabled).length," de ",r.length," ativas"]})]}),e.jsx("div",{className:"space-y-2",children:r.map(s=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>$(f===s.id?null:s.id),children:f===s.id?e.jsx(Y,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:s.id,className:"font-medium cursor-pointer",children:s.label}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:s.recipients.sendToAll?e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(o,{className:"h-3 w-3 mr-1"}),"Todos os usuários"]}):e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(o,{className:"h-3 w-3 mr-1"}),s.recipients.groupIds.length," grupo(s)"]})})]})]}),e.jsx(c,{id:s.id,checked:s.enabled,onCheckedChange:()=>q(s.id)})]}),f===s.id&&e.jsx("div",{className:"border-t bg-gray-50 p-4 space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Destinatários"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4 text-gray-600"}),e.jsx(i,{htmlFor:`${s.id}-all`,className:"font-medium cursor-pointer",children:"Enviar para todos os usuários"})]}),e.jsx(c,{id:`${s.id}-all`,checked:s.recipients.sendToAll,onCheckedChange:()=>U(s.id)})]}),!s.recipients.sendToAll&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Selecione os grupos que receberão esta notificação:"}),k.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_,{id:`${s.id}-${t.id}`,checked:s.recipients.groupIds.includes(t.id),onCheckedChange:()=>V(s.id,t.id)}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`${s.id}-${t.id}`,className:"font-medium cursor-pointer",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.description})]})]}),e.jsxs(m,{className:`${t.color} text-xs`,children:[t.userCount," usuários"]})]},t.id))]})]})})]},s.id))})]},a))]})]}),e.jsx(u,{value:"rules",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Regras de Distribuição"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Crie regras para automatizar a distribuição de notificações"})]}),e.jsxs(d,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Nova Regra"]})]}),e.jsx("div",{className:"space-y-3",children:D.map(a=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx(m,{variant:a.enabled?"default":"secondary",className:"text-xs",children:a.enabled?"Ativa":"Inativa"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[a.notificationTypes.length," tipo(s) de notificação"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[a.recipients.groupIds.length," grupo(s) de destinatários"]})]})]})]}),e.jsx(c,{checked:a.enabled,onCheckedChange:()=>B(a.id)})]})},a.id))}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx(P,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Crie Regras Personalizadas"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure regras automáticas para distribuir notificações específicas para grupos de usuários"}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Criar Nova Regra"]})]})]})}),e.jsx(u,{value:"groups",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Grupos de Usuários"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gerencie grupos para facilitar a distribuição de notificações"})]}),e.jsxs(d,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Novo Grupo"]})]}),e.jsx("div",{className:"grid gap-4",children:k.map(a=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(o,{className:"h-5 w-5 text-gray-600"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsxs(m,{className:`${a.color} text-xs`,children:[a.userCount," usuários"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description})]}),e.jsx(d,{variant:"ghost",size:"sm",children:"Editar"})]})},a.id))}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx(o,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Organize Seus Usuários"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Crie grupos personalizados para facilitar o gerenciamento de permissões e notificações"}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Criar Novo Grupo"]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[y.filter(a=>a.enabled).length," de ",y.length," notificações ativas"]}),e.jsx(d,{onClick:L,disabled:l,className:"bg-blue-600 hover:bg-blue-700",children:l?"Salvando...":"Salvar Preferências"})]})]}):n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:x}),e.jsx("div",{className:`fixed top-0 right-0 h-screen w-[800px] bg-white shadow-2xl z-50 transform transition-all duration-300 ease-out ${n?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(b,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Preferências de Notificação"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure as notificações e destinatários"})]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:x,className:"h-8 w-8 p-0",children:e.jsx(te,{className:"h-5 w-5"})})]}),M&&e.jsxs("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center space-x-3",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Preferências salvas com sucesso!"})]}),e.jsxs(z,{defaultValue:"notifications",className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs(F,{className:"mx-6 mt-4",children:[e.jsxs(j,{value:"notifications",className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Notificações"})]}),e.jsxs(j,{value:"rules",className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Regras de Distribuição"})]}),e.jsxs(j,{value:"groups",className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{children:"Grupos"})]})]}),e.jsxs(u,{value:"notifications",className:"flex-1 overflow-y-auto p-6 space-y-6 mt-0",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Canais de Notificação"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione os canais pelos quais os usuários receberão notificações"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-email",className:"font-medium cursor-pointer",children:"E-mail"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações por e-mail"})]})]}),e.jsx(c,{id:"channel-email",checked:p.email,onCheckedChange:()=>g("email")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(b,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-push",className:"font-medium cursor-pointer",children:"Push"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações push"})]})]}),e.jsx(c,{id:"channel-push",checked:p.push,onCheckedChange:()=>g("push")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-inApp",className:"font-medium cursor-pointer",children:"In-App"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações no app"})]})]}),e.jsx(c,{id:"channel-inApp",checked:p.inApp,onCheckedChange:()=>g("inApp")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"channel-sms",className:"font-medium cursor-pointer",children:"SMS"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notificações por SMS"})]})]}),e.jsx(c,{id:"channel-sms",checked:p.sms,onCheckedChange:()=>g("sms")})]})]})]}),e.jsx(W,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tipos de Notificação e Destinatários"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure quem receberá cada tipo de notificação"})]}),Object.entries(H).map(([a,r])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:`${O(a)} text-xs font-medium`,children:Q(a)}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.filter(s=>s.enabled).length," de ",r.length," ativas"]})]}),e.jsx("div",{className:"space-y-2",children:r.map(s=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>$(f===s.id?null:s.id),children:f===s.id?e.jsx(Y,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:s.id,className:"font-medium cursor-pointer",children:s.label}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:s.recipients.sendToAll?e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(o,{className:"h-3 w-3 mr-1"}),"Todos os usuários"]}):e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(o,{className:"h-3 w-3 mr-1"}),s.recipients.groupIds.length," grupo(s)"]})})]})]}),e.jsx(c,{id:s.id,checked:s.enabled,onCheckedChange:()=>q(s.id)})]}),f===s.id&&e.jsx("div",{className:"border-t bg-gray-50 p-4 space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Destinatários"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4 text-gray-600"}),e.jsx(i,{htmlFor:`${s.id}-all`,className:"font-medium cursor-pointer",children:"Enviar para todos os usuários"})]}),e.jsx(c,{id:`${s.id}-all`,checked:s.recipients.sendToAll,onCheckedChange:()=>U(s.id)})]}),!s.recipients.sendToAll&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Selecione os grupos que receberão esta notificação:"}),k.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_,{id:`${s.id}-${t.id}`,checked:s.recipients.groupIds.includes(t.id),onCheckedChange:()=>V(s.id,t.id)}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`${s.id}-${t.id}`,className:"font-medium cursor-pointer",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.description})]})]}),e.jsxs(m,{className:`${t.color} text-xs`,children:[t.userCount," usuários"]})]},t.id))]})]})})]},s.id))})]},a))]})]}),e.jsx(u,{value:"rules",className:"flex-1 overflow-y-auto p-6 space-y-6 mt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Regras de Distribuição"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Crie regras para automatizar a distribuição de notificações"})]}),e.jsxs(d,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Nova Regra"]})]}),e.jsx("div",{className:"space-y-3",children:D.map(a=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx(m,{variant:a.enabled?"default":"secondary",className:"text-xs",children:a.enabled?"Ativa":"Inativa"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[a.notificationTypes.length," tipo(s) de notificação"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[a.recipients.groupIds.length," grupo(s) de destinatários"]})]})]})]}),e.jsx(c,{checked:a.enabled,onCheckedChange:()=>B(a.id)})]})},a.id))}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx(P,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Crie Regras Personalizadas"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure regras automáticas para distribuir notificações específicas para grupos de usuários"}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Criar Nova Regra"]})]})]})}),e.jsx(u,{value:"groups",className:"flex-1 overflow-y-auto p-6 space-y-6 mt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Grupos de Usuários"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gerencie grupos para facilitar a distribuição de notificações"})]}),e.jsxs(d,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Novo Grupo"]})]}),e.jsx("div",{className:"grid gap-4",children:k.map(a=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(o,{className:"h-5 w-5 text-gray-600"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsxs(m,{className:`${a.color} text-xs`,children:[a.userCount," usuários"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description})]}),e.jsx(d,{variant:"ghost",size:"sm",children:"Editar"})]})},a.id))}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx(o,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Organize Seus Usuários"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Crie grupos personalizados para facilitar o gerenciamento de permissões e notificações"}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Criar Novo Grupo"]})]})]})})]}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[y.filter(a=>a.enabled).length," de ",y.length," notificações ativas"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(d,{variant:"outline",onClick:x,disabled:l,children:"Cancelar"}),e.jsx(d,{onClick:L,disabled:l,className:"bg-blue-600 hover:bg-blue-700",children:l?"Salvando...":"Salvar Preferências"})]})]})})]})})]}):null}function pe(){const[n,x]=v.useState({siteName:"ALLKA Platform",siteDescription:"Plataforma de gestão de projetos e tarefas",supportEmail:"suporte@allka.com",enableRegistration:!0,enableNotifications:!0,maintenanceMode:!1,requireEmailVerification:!0,maxFileSize:10,sessionTimeout:30}),A=()=>{console.log("[v0] Saving settings:",n)};return e.jsxs("div",{className:"container mx-auto space-y-6 px-0 py-0",children:[e.jsx(xe,{title:"Configurações da Plataforma",description:"Gerencie as configurações gerais do sistema",action:e.jsxs(d,{onClick:A,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Salvar Alterações"]})}),e.jsxs(z,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(j,{value:"general",children:"Geral"}),e.jsx(j,{value:"email",children:"Email"}),e.jsx(j,{value:"notifications",children:"Notificações"}),e.jsx(j,{value:"security",children:"Segurança"}),e.jsx(j,{value:"appearance",children:"Aparência"})]}),e.jsx(u,{value:"general",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Configurações Gerais"]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"siteName",children:"Nome da Plataforma"}),e.jsx(h,{id:"siteName",value:n.siteName,onChange:l=>x({...n,siteName:l.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"supportEmail",children:"Email de Suporte"}),e.jsx(h,{id:"supportEmail",type:"email",value:n.supportEmail,onChange:l=>x({...n,supportEmail:l.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"siteDescription",children:"Descrição da Plataforma"}),e.jsx(ne,{id:"siteDescription",value:n.siteDescription,onChange:l=>x({...n,siteDescription:l.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-base",children:"Permitir Novos Cadastros"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Usuários podem criar novas contas"})]}),e.jsx(c,{checked:n.enableRegistration,onCheckedChange:l=>x({...n,enableRegistration:l})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-base",children:"Modo de Manutenção"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Desabilita acesso temporariamente"})]}),e.jsx(c,{checked:n.maintenanceMode,onCheckedChange:l=>x({...n,maintenanceMode:l})})]})]})]})]})}),e.jsx(u,{value:"email",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Configurações de Email"]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"smtpHost",children:"Servidor SMTP"}),e.jsx(h,{id:"smtpHost",placeholder:"smtp.example.com"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"smtpPort",children:"Porta SMTP"}),e.jsx(h,{id:"smtpPort",type:"number",placeholder:"587"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"smtpUser",children:"Usuário SMTP"}),e.jsx(h,{id:"smtpUser",placeholder:"user@example.com"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"smtpPassword",children:"Senha SMTP"}),e.jsx(h,{id:"smtpPassword",type:"password",placeholder:"••••••••"})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(d,{variant:"outline",children:"Testar Configuração de Email"})})]})]})}),e.jsx(u,{value:"notifications",className:"space-y-6",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Gerenciamento de Notificações"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Configure as preferências de notificação, canais de comunicação, regras de distribuição e grupos de usuários."})]}),e.jsx(T,{children:e.jsx(me,{embedded:!0})})]})}),e.jsx(u,{value:"security",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"Configurações de Segurança"]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-base",children:"Verificação de Email Obrigatória"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Usuários devem verificar email antes de usar a plataforma"})]}),e.jsx(c,{checked:n.requireEmailVerification,onCheckedChange:l=>x({...n,requireEmailVerification:l})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"maxFileSize",children:"Tamanho Máximo de Arquivo (MB)"}),e.jsx(h,{id:"maxFileSize",type:"number",value:n.maxFileSize,onChange:l=>x({...n,maxFileSize:Number.parseInt(l.target.value)})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sessionTimeout",children:"Timeout de Sessão (minutos)"}),e.jsx(h,{id:"sessionTimeout",type:"number",value:n.sessionTimeout,onChange:l=>x({...n,sessionTimeout:Number.parseInt(l.target.value)})})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Políticas de Senha"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Comprimento Mínimo: 8 caracteres"}),e.jsx(c,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Exigir Letras Maiúsculas e Minúsculas"}),e.jsx(c,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Exigir Números"}),e.jsx(c,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Exigir Caracteres Especiais"}),e.jsx(c,{})]})]})]})]})]})}),e.jsx(u,{value:"appearance",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Configurações de Aparência"]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"primaryColor",children:"Cor Primária"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsx(h,{id:"primaryColor",type:"color",defaultValue:"#3B82F6",className:"w-20 h-10"}),e.jsx(h,{defaultValue:"#3B82F6",className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"secondaryColor",children:"Cor Secundária"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsx(h,{id:"secondaryColor",type:"color",defaultValue:"#10B981",className:"w-20 h-10"}),e.jsx(h,{defaultValue:"#10B981",className:"flex-1"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(i,{htmlFor:"logo",children:"Logo da Plataforma"}),e.jsxs("div",{className:"mt-2 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Clique para fazer upload ou arraste uma imagem"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG até 2MB"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(i,{htmlFor:"favicon",children:"Favicon"}),e.jsxs("div",{className:"mt-2 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Clique para fazer upload ou arraste uma imagem"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ICO, PNG 32x32px"})]})]})]})]})})]})]})}export{pe as default};
