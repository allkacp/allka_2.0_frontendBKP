import{c as Ns,r as t,j as e,B as k,aA as Me,aB as Ne,aC as ye,az as xt,aD as we,ad as js,a1 as ba,A as ga,b as ja,P as Be,aj as Qa,C as Je,f as o,aE as M,aF as V,aG as B,aH as $,aI as Z,E as ge,H as je,I as ve,J as fe,K as f,ag as i,aJ as G,aK as ee,W as va,M as ht,T as El,h as Ol,i as Rl,aL as ut,k as ss,y as Ls,a3 as ia,ao as pt,a9 as ra,p as na,ap as Il,aM as te,S as zs,aN as Ya,l as Ll,aw as ha,o as Za,Z as vs,aO as Ul,F as et,ab as st,a2 as zl,z as bt,q as Ml,aP as Rs,G as Vl,aQ as Us,N as gt,af as Y,aR as jt,aS as ua,aT as pa,U as at,g as Bl,aU as $l,aV as Gl,aW as ql,aX as tt}from"./index-D2dOrPZ8.js";import{A as Ve,a as A,b as D,c as P}from"./accordion-C2wU0TCh.js";import{M as vt,I as lt}from"./items-per-page-select-CDfU7i7m.js";import{E as Wl}from"./eye-off-99P7biTF.js";import{D as Jl}from"./download--rFCaPFG.js";import{C as fs}from"./circle-x-D0uMI9ez.js";import{C as ft}from"./camera-DD1JqZEw.js";import{u as Nt}from"./sidebar-context-DQOyQsLi.js";import{R as it,C as rt,X as nt,Y as ot,T as dt,B as Hl,l as Xl}from"./BarChart-B1piY--Q.js";import{L as Kl,a as Ql}from"./LineChart-58X4XD1O.js";import{P as Is}from"./pen-D9tnGfMD.js";import{K as oa}from"./key-DrOyWj5p.js";import{P as Yl}from"./page-header-DpITyWPC.js";import{F as da}from"./funnel-D8IEwOH8.js";import{U as Zl}from"./user-x-B0vz_ESM.js";const ei=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],si=Ns("handshake",ei);const ai=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ct=Ns("monitor",ai);const ti=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],li=Ns("tablet",ti);const ii=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],bs=Ns("toggle-left",ii);const ri=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],gs=Ns("toggle-right",ri),ni=x=>x.split(" ").map(W=>W[0]).join("").toUpperCase().slice(0,2),ca={ativo:{bg:"bg-emerald-100",text:"text-emerald-700",dot:"bg-emerald-500"},inativo:{bg:"bg-slate-100",text:"text-slate-700",dot:"bg-slate-500"},pausado:{bg:"bg-amber-100",text:"text-amber-700",dot:"bg-amber-500"},suspenso:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500"}},ma={company:{bg:"bg-purple-100",text:"text-purple-700",label:"Company"},nomad:{bg:"bg-blue-100",text:"text-blue-700",label:"Nomad"},agency:{bg:"bg-orange-100",text:"text-orange-700",label:"Agency"}};function oi({user:x,isEditMode:W,isSaving:J,onSave:se,onCancel:N,onClose:I,onExport:ae,userLevel:Ce,levelProgress:ne,userAccountStatus:b,userAccountType:F,userPlan:T,showBalance:n,onToggleBalance:w}){const[E,H]=t.useState(x.avatar||null),[q,le]=t.useState(!1),[oe,ke]=t.useState(!1),[ce,h]=t.useState(null),[X,as]=t.useState(null),Te=t.useRef(null);t.useEffect(()=>{H(x.avatar||null)},[x.avatar]);const ts=()=>{h(x.avatar||null),ke(!0)},d=K=>{as(K);const Ee=URL.createObjectURL(K);h(Ee)},ie=K=>{const Ee=K.target.files?.[0];Ee&&d(Ee)};return e.jsx(vt,{title:x.name,left:e.jsx("div",{className:"flex-shrink-0 relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(ga,{className:"h-16 w-16 border-2 border-white/20",children:e.jsx(ja,{className:"bg-gradient-to-br from-blue-600 to-cyan-500 text-white font-bold text-lg",children:ni(x.name)})}),e.jsx("button",{onClick:ts,className:"absolute -bottom-1 -right-1 bg-blue-600 hover:bg-blue-700 p-1.5 rounded-full border border-white shadow transition",children:e.jsx(ft,{className:"h-3 w-3 text-white"})}),e.jsx("input",{ref:Te,type:"file",accept:"image/*",className:"hidden",onChange:ie})]})}),right:e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(k,{className:`${ca[b].bg} ${ca[b].text} border-0 font-semibold text-xs py-1 px-2`,children:[e.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full mr-1.5 ${ca[b].dot}`}),b.charAt(0).toUpperCase()+b.slice(1)]}),F&&e.jsx(k,{className:`${ma[F.toLowerCase()]?.bg||"bg-slate-100"} ${ma[F.toLowerCase()]?.text||"text-slate-700"} border-0 font-semibold text-xs py-1 px-2`,children:ma[F.toLowerCase()]?.label||F})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-900/40 to-cyan-900/40 px-4 py-2 rounded-lg border border-blue-700/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-blue-300 text-xs font-semibold uppercase tracking-wide",children:"Saldo ALLKOIN"}),e.jsx("p",{className:"text-white font-bold text-sm",children:n?`R$ ${(x.wallet_balance||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"••••••"})]}),e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("button",{onClick:w,className:"text-blue-300 hover:text-blue-200 hover:bg-blue-800/50 p-1.5 rounded transition-colors flex-shrink-0",children:n?e.jsx(xt,{className:"h-4 w-4"}):e.jsx(Wl,{className:"h-4 w-4"})})}),e.jsx(we,{side:"bottom",className:"bg-slate-900 text-white text-xs border-slate-700",children:n?"Ocultar saldo":"Mostrar saldo"})]})})]}),e.jsx(Me,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[!W&&e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("button",{onClick:ae,className:"text-blue-300 hover:text-blue-200 hover:bg-blue-800/50 p-2 rounded-lg transition-colors",children:e.jsx(Jl,{className:"h-4 w-4"})})}),e.jsx(we,{side:"bottom",className:"bg-slate-900 text-white text-xs border-slate-700",children:"Exportar dados"})]}),W&&e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("button",{onClick:se,disabled:J,className:"text-emerald-300 hover:text-emerald-200 hover:bg-emerald-950/50 p-2 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(js,{className:"h-4 w-4"})})}),e.jsx(we,{side:"bottom",className:"bg-slate-900 text-white text-xs border-slate-700",children:"Salvar alterações"})]}),e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("button",{onClick:N,disabled:J,className:"text-red-300 hover:text-red-200 hover:bg-red-950/50 p-2 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(fs,{className:"h-4 w-4"})})}),e.jsx(we,{side:"bottom",className:"bg-slate-900 text-white text-xs border-slate-700",children:"Cancelar edição"})]})]}),e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("button",{onClick:I,disabled:J,className:"text-blue-300 hover:text-blue-200 hover:bg-blue-800/50 p-2 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(ba,{className:"h-4 w-4"})})}),e.jsx(we,{side:"bottom",className:"bg-slate-900 text-white text-xs border-slate-700",children:"Fechar"})]})]})})]})})}function di({user:x,accountType:W,onInviteSent:J}){const[se,N]=t.useState(!1),[I,ae]=t.useState(!1),[Ce,ne]=t.useState(null),[b,F]=t.useState(!1),[T,n]=t.useState({commissionType:"percentage",commissionValue:"",minimumGuaranteed:"",notes:""}),E=(()=>{if(x){if(W){const h=String(W).toLowerCase();return h.includes("company")?"company":h.includes("nomad")||h.includes("nomade")?"nomade":h.includes("agency")||h.includes("agencia")?"agencia":void 0}if(x.accountType){const h=String(x.accountType).toLowerCase();if(h.includes("company"))return"company";if(h.includes("nomad")||h.includes("nomade"))return"nomade";if(h.includes("agency")||h.includes("agencia"))return"agencia"}if(x.tipo){const h=String(x.tipo).toLowerCase();if(h.includes("company"))return"company";if(h.includes("nomad")||h.includes("nomade"))return"nomade";if(h.includes("agency")||h.includes("agencia"))return"agencia"}if(x.type){const h=String(x.type).toLowerCase();if(h.includes("company"))return"company";if(h.includes("nomad")||h.includes("nomade"))return"nomade";if(h.includes("agency")||h.includes("agencia"))return"agencia"}}})(),q={nomade:{title:"Convide este Nômade para uma parceria",description:"Expanda sua rede e ganhe comissões através de parcerias estratégicas",icon:Qa,buttons:[{type:"nomade-partner",label:"Convidar como Nômade Partner",icon:Be}]},agencia:{title:"Convide esta Agência para parceria",description:"Estabeleça parcerias comerciais e expanda suas operações",icon:si,buttons:[{type:"agency-partner",label:"Convidar como Agency Partner",icon:Be}]},company:{title:"Convide esta Empresa para parceria",description:"Crie oportunidades de negócio e colaboração estratégica",icon:Qa,buttons:[{type:"company-partner",label:"Convidar como Company Partner",icon:Be}]}}[E],le=q?.icon;if(!x||b||!E||!q)return null;const oe=h=>{ne(h),N(!0)},ke=()=>{ae(!0)},ce=()=>{F(!0),N(!1),ae(!1),J?.(Ce||""),n({commissionType:"percentage",commissionValue:"",minimumGuaranteed:"",notes:""})};return e.jsxs("div",{className:"mb-6",children:[e.jsxs(Je,{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 to-blue-800 border-0 shadow-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),e.jsx("div",{className:"relative p-6 flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(le,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:q.title}),e.jsx("p",{className:"text-sm text-blue-100 mb-4",children:q.description}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.buttons.map(h=>e.jsxs(o,{onClick:()=>oe(h.type),className:"bg-white/90 hover:bg-white text-blue-700 font-medium text-xs py-2 px-3 rounded-lg transition-all",children:[e.jsx(h.icon,{className:"h-3.5 w-3.5 mr-1"}),h.label]},h.type))})]})]})})]}),e.jsx(M,{open:se,onOpenChange:N,children:e.jsxs(V,{className:"max-w-md",children:[e.jsxs(B,{children:[e.jsx($,{children:"Configurar Parceria"}),e.jsx(Z,{children:"Defina os termos comerciais para esta parceria"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Tipo de Comissão"}),e.jsxs(ge,{value:T.commissionType,onValueChange:h=>n({...T,commissionType:h}),children:[e.jsx(je,{children:e.jsx(ve,{})}),e.jsxs(fe,{children:[e.jsx(f,{value:"percentage",children:"Percentual (%)"}),e.jsx(f,{value:"fixed",children:"Valor Fixo (R$)"}),e.jsx(f,{value:"hybrid",children:"Híbrida (Percentual + Mínimo)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:T.commissionType==="percentage"?"Percentual de Comissão":"Valor da Comissão"}),e.jsx(i,{type:"number",placeholder:T.commissionType==="percentage"?"Ex: 15":"Ex: 500",value:T.commissionValue,onChange:h=>n({...T,commissionValue:h.target.value})})]}),T.commissionType==="hybrid"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Valor Mínimo Garantido (R$)"}),e.jsx(i,{type:"number",placeholder:"Ex: 1000",value:T.minimumGuaranteed,onChange:h=>n({...T,minimumGuaranteed:h.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Observações Adicionais (Opcional)"}),e.jsx(i,{placeholder:"Notas sobre a parceria...",value:T.notes,onChange:h=>n({...T,notes:h.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(G,{children:"Cancelar"}),e.jsx(ee,{onClick:ke,className:"bg-blue-600 hover:bg-blue-700",children:"Continuar"})]})]})}),e.jsx(M,{open:I,onOpenChange:ae,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar Envio de Convite"}),e.jsx(Z,{children:"Deseja realmente enviar este convite de parceria com as configurações informadas?"})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg space-y-1 text-xs",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," ",Ce]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Comissão:"})," ",T.commissionValue," ",T.commissionType==="percentage"?"%":"R$"]}),T.minimumGuaranteed&&e.jsxs("p",{children:[e.jsx("strong",{children:"Mínimo Garantido:"})," R$ ",T.minimumGuaranteed]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:ce,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Enviar Convite"]})]})]})})]})}const ci=x=>({id:"usr_2024001",name:"João Silva Santos",email:"joao.silva@example.com",phone:"(11) 98765-4321",cpf:"123.456.789-00",cnpj:"12.345.678/0001-90",birth_date:"1990-05-15",created_at:"2024-01-10",last_login:"2024-01-28T14:30:00",is_active:!0,role:"admin",account_type:"premium",street:"Rua das Flores",number:"123",complement:"Apto 45",city:"São Paulo",state:"SP",zip_code:"01310-100",country:"Brasil",job_title:"Gerente de Projetos",department:"Desenvolvimento",bank_name:"Banco do Brasil",agency_number:"1234",account_number:"123456-7",card_last_digits:"1234",card_holder:"JOAO SILVA SANTOS",card_expiry:"12/26",pix_key:"joao.silva@example.com",wallet_balance:2500.75,wallet_status:"ativa",financial_document:"123.456.789-00",financial_holder:"João Silva Santos",person_type:"fisica",tax_regime:"simples",financial_notes:"",permissions:["manage_users","manage_permissions","view_financial","edit_financial","adjust_balance","manage_cards","manage_accounts","create_tasks","edit_tasks","delete_tasks","assign_tasks","approve_tasks","view_reports","export_reports","view_metrics","access_settings","manage_integrations","view_logs"],online_status:"online",...x||{}}),mi=[{date:"1",acessos:45},{date:"5",acessos:52},{date:"10",acessos:38},{date:"15",acessos:61},{date:"20",acessos:55},{date:"25",acessos:68},{date:"30",acessos:72}],xi=[{nome:"Vendas",uso:85},{nome:"Relatórios",uso:65},{nome:"Financeiro",uso:72},{nome:"RH",uso:48},{nome:"Operações",uso:90}],xa={Usuários:[{id:"user_create",name:"Criar Usuários",risk:"alto"},{id:"user_edit",name:"Editar Usuários",risk:"médio"},{id:"user_delete",name:"Deletar Usuários",risk:"crítico"},{id:"user_view",name:"Visualizar Usuários",risk:"baixo"}],Financeiro:[{id:"fin_view",name:"Visualizar Financeiro",risk:"médio"},{id:"fin_edit",name:"Editar Financeiro",risk:"alto"},{id:"fin_approve",name:"Aprovar Transações",risk:"crítico"},{id:"fin_report",name:"Relatórios Financeiros",risk:"médio"}],Relatórios:[{id:"report_view",name:"Visualizar Relatórios",risk:"baixo"},{id:"report_create",name:"Criar Relatórios",risk:"médio"},{id:"report_export",name:"Exportar Relatórios",risk:"médio"},{id:"report_schedule",name:"Agendar Relatórios",risk:"médio"}],Configurações:[{id:"settings_view",name:"Visualizar Configurações",risk:"baixo"},{id:"settings_edit",name:"Editar Configurações",risk:"alto"},{id:"settings_system",name:"Configurações de Sistema",risk:"crítico"}],Integrações:[{id:"integ_view",name:"Visualizar Integrações",risk:"baixo"},{id:"integ_connect",name:"Conectar Integrações",risk:"alto"},{id:"integ_manage",name:"Gerenciar Integrações",risk:"crítico"}]};Object.values(xa).flat().map(x=>x.id),xa.Financeiro.map(x=>x.id),xa.Relatórios.map(x=>x.id);function hi({open:x,onClose:W,user:J}){const[se,N]=t.useState(!1),[I,ae]=t.useState("online"),[Ce,ne]=t.useState(!1),[b,F]=t.useState(!1),[T,n]=t.useState({}),[w,E]=t.useState(!1),[H,q]=t.useState({}),[le,oe]=t.useState([]),[ke,ce]=t.useState(""),[h,X]=t.useState(null),[as,Te]=t.useState(null),[ts,d]=t.useState(null),[ie,K]=t.useState(!1),[Ee,yt]=t.useState(!1),[Ms,$e]=t.useState(["dados-principais"]),[Ge,Se]=t.useState(!1),[ls,me]=t.useState(null),[O,Oe]=t.useState(!1),[C,xe]=t.useState({}),[ys,he]=t.useState(!1),[L,y]=t.useState(!1),[Vs,is]=t.useState({}),[ws,Re]=t.useState(!1),[Bs,rs]=t.useState(["pagamentos"]),[l,S]=t.useState(["pessoais"]),[U,de]=t.useState(["auth"]),[qe,$s]=t.useState(!1),[Gs,fa]=t.useState(!1),[ue,qs]=t.useState(!1),[Cs,Na]=t.useState(!1),[ya,wa]=t.useState(!1),[_e,He]=t.useState([]),[Ws,ns]=t.useState(!1),[a,r]=t.useState({number:"",expiry:"",holder:"",brand:""}),[j,v]=t.useState(!1),[Ca,ka]=t.useState(null),[os,wt]=t.useState(""),[ds,pi]=t.useState("add"),[bi,gi]=t.useState(""),[Sa,cs]=t.useState(!1),[Xe,ks]=t.useState(!1),[Ae,Js]=t.useState(!1),[re,ms]=t.useState({}),[Ct,Ss]=t.useState(!1),[kt,St]=t.useState(["role","admin","financial","operational","reports","system"]),[_s,_a]=t.useState([]),[_t,Aa]=t.useState(!1),[Ie,Da]=t.useState({type:"all",startDate:"",endDate:"",search:""}),[Hs,At]=t.useState(0),[Pa,As]=t.useState(!1),[De,Fa]=t.useState("immediate"),[Ds,Ta]=t.useState(""),[Ke,Ea]=t.useState(""),[Dt,Xs]=t.useState(!1),[Ks,Oa]=t.useState(null),[ji,vi]=t.useState([]),[fi,Ni]=t.useState(!1),[Pt,Qs]=t.useState(!1),[pe,Ps]=t.useState("email"),[Ys,Zs]=t.useState(""),[Le,ea]=t.useState(!1),[Ft,sa]=t.useState(!1),[Tt,Et]=t.useState(""),[Ra,Ot]=t.useState(""),[aa,Ia]=t.useState(""),[Rt,ta]=t.useState(!1),[It,La]=t.useState(""),[Lt,Ua]=t.useState(""),[Qe,la]=t.useState([]),[Fs,za]=t.useState([]),[Pe,We]=t.useState([]),[Ut,Ma]=t.useState(!1),[Ts,Va]=t.useState({action:"all",date:"",admin:""}),[zt,Ye]=t.useState(!1),[Ba,$a]=t.useState(null),[Ue,Ze]=t.useState(!1),[Ga,Mt]=t.useState(!0),[yi,wi]=t.useState(!1),[Vt,Ci]=t.useState(3),[Bt,ki]=t.useState(65),[$t,Si]=t.useState("ativo"),[Gt,_i]=t.useState("premium"),{sidebarWidth:Es}=Nt(),{toast:p}=ht(),Os=ci(J),c={...Os,...ls},qa=c?.account_type||c?.tipo,xs=qa?qa.toString().toLowerCase():void 0;t.useEffect(()=>{_e.length===0&&(He([{id:"card_001",lastDigits:"4242",holder:"JOAO SILVA SANTOS",expiry:"12/26",brand:"Visa",isDefault:!0},{id:"card_002",lastDigits:"5555",holder:"JOAO SILVA SANTOS",expiry:"08/25",brand:"Mastercard",isDefault:!1}]),_a([{id:"stmt_001",date:new Date(Date.now()-2880*60*1e3).toISOString(),type:"credit",amount:500,reason:"Depósito inicial",balanceAfter:2500.75,admin:"Admin Sistema"},{id:"stmt_002",date:new Date(Date.now()-1440*60*1e3).toISOString(),type:"debit",amount:150,reason:"Compra em loja",balanceAfter:2350.75,admin:"Automático"},{id:"stmt_003",date:new Date().toISOString(),type:"credit",amount:25.5,reason:"Cashback de compras",balanceAfter:2376.25,admin:"Sistema"}])),Qe.length===0&&(la([{id:"session_001",location:"São Paulo, SP",ip:"187.45.123.45",browser:"Chrome 131.0",os:"macOS 14.2",loginTime:new Date(Date.now()-7200*1e3).toISOString(),status:"active"},{id:"session_002",location:"São Paulo, SP",ip:"187.45.123.45",browser:"Safari 17.2",os:"iOS 17.2",loginTime:new Date(Date.now()-1440*60*1e3).toISOString(),status:"active"},{id:"session_003",location:"Rio de Janeiro, RJ",ip:"189.23.234.56",browser:"Firefox 121.0",os:"Windows 11",loginTime:new Date(Date.now()-10080*60*1e3).toISOString(),status:"expired"}]),za([{id:"device_001",name:"MacBook Pro de João",type:"desktop",lastAccess:new Date(Date.now()-3600*1e3).toISOString(),ip:"187.45.123.45"},{id:"device_002",name:"iPhone de João",type:"mobile",lastAccess:new Date(Date.now()-7200*1e3).toISOString(),ip:"187.45.123.45"},{id:"device_003",name:"Computador do Escritório",type:"desktop",lastAccess:new Date(Date.now()-4320*60*1e3).toISOString(),ip:"192.168.1.100"}]),We([{id:"log_001",date:new Date().toISOString(),action:"Login bem-sucedido",ip:"187.45.123.45",location:"São Paulo, SP",admin:"Automático"},{id:"log_002",date:new Date(Date.now()-3600*1e3).toISOString(),action:"Alteração de dados cadastrais",ip:"187.45.123.45",location:"São Paulo, SP",admin:"Admin User"},{id:"log_003",date:new Date(Date.now()-7200*1e3).toISOString(),action:"2FA ativado",ip:"187.45.123.45",location:"São Paulo, SP",admin:"Usuário"},{id:"log_004",date:new Date(Date.now()-1440*60*1e3).toISOString(),action:"Tentativa de login inválida",ip:"189.23.234.56",location:"Rio de Janeiro, RJ",admin:"Automático"},{id:"log_005",date:new Date(Date.now()-2880*60*1e3).toISOString(),action:"Redefinição de senha",ip:"192.168.1.100",location:"Escritório",admin:"Admin User"}]),Ua(new Date(Date.now()-720*60*60*1e3).toISOString()),La(new Date(Date.now()-7200*1e3).toISOString()),ea(!0))},[]);const[Wa,qt]=t.useState({left:"240px",width:"calc(100vw - 240px)"});t.useEffect(()=>{const s=()=>{const m=typeof Es=="number"?Es:parseInt(Es)||240;qt({left:`${m}px`,width:`calc(100vw - ${m}px)`})};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[Es]),t.useEffect(()=>{x||N(!1)},[x]),t.useEffect(()=>{const s=["online","busy","away","offline"],m=setInterval(()=>{ae(s[Math.floor(Math.random()*s.length)])},5e3);return()=>clearInterval(m)},[]);const Wt=()=>{if(Ce){if(Object.keys(T).length>0&&!confirm("Há alterações não salvas. Descartar?"))return;ne(!1),n({})}N(!0),setTimeout(W,300)},Jt=()=>{ne(!1),n({})},Ht=async()=>{if(!T.name||!T.email){p({title:"Erro",description:"Nome e email são obrigatórios",variant:"destructive"});return}F(!0),await new Promise(s=>setTimeout(s,1500)),p({title:"Sucesso!",description:"Dados atualizados com sucesso"}),ne(!1),n({}),F(!1)},Xt=()=>{const s=JSON.stringify({user:Os,exportedAt:new Date().toISOString()},null,2),m=new Blob([s],{type:"application/json"}),u=URL.createObjectURL(m),_=document.createElement("a");_.href=u,_.download=`usuario-${Os.id}-${Date.now()}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(u),p({title:"Sucesso!",description:"Dados exportados com sucesso"})},Kt=()=>{E(!0),q({})},Qt=()=>{E(!1),q({}),Se(!1)},Yt=()=>{Oe(!0),xe({})},Zt=()=>{Oe(!1),xe({}),he(!1)},z=(s,m)=>{xe(u=>({...u,[s]:m}))},g=s=>C[s]??c[s],el=()=>{he(!0)},sl=async()=>{F(!0);try{const s={...c,...C,id:c.id},u=await(await fetch(`/api/admin/users/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();u.success&&u.data?(me(_=>({..._,...u.data})),p({title:"Sucesso!",description:"Dados atualizados com sucesso"}),Oe(!1),xe({})):p({title:"Erro",description:u.message||"Falha ao salvar dados",variant:"destructive"})}catch(s){console.error("[v0] Error saving dados:",s),p({title:"Erro",description:"Falha ao salvar dados",variant:"destructive"})}finally{he(!1),F(!1)}},al=()=>{y(!0),is({})},tl=()=>{y(!1),is({}),Re(!1)},be=(s,m)=>{is(u=>({...u,[s]:m}))},R=s=>Vs[s]??c[s],ll=()=>{Re(!0)},il=async()=>{F(!0);try{const s={...c,...Vs,id:c.id},u=await(await fetch(`/api/admin/users/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();u.success&&u.data?(me(_=>({..._,...u.data})),p({title:"Sucesso!",description:"Dados financeiros atualizados com sucesso"}),y(!1),is({})):p({title:"Erro",description:u.message||"Falha ao salvar dados",variant:"destructive"})}catch(s){console.error("[v0] Error saving financial data:",s),p({title:"Erro",description:"Falha ao salvar dados financeiros",variant:"destructive"})}finally{Re(!1),F(!1)}},rl=()=>{r({number:"",expiry:"",holder:"",brand:""}),ns(!0)},nl=()=>{if(!a.number||!a.expiry||!a.holder){p({title:"Erro",description:"Preencha todos os campos do cartão",variant:"destructive"});return}const s=a.number.slice(-4),m={id:`card_${Date.now()}`,lastDigits:s,holder:a.holder.toUpperCase(),expiry:a.expiry,brand:a.brand||"Visa",isDefault:_e.length===0};He([..._e,m]),ns(!1),p({title:"Sucesso!",description:"Cartão adicionado com sucesso"})},ol=s=>{He(_e.filter(m=>m.id!==s)),p({title:"Sucesso!",description:"Cartão removido com sucesso"})},dl=s=>{ka(s),v(!0)},cl=()=>{Ca&&(He(_e.map(s=>({...s,isDefault:s.id===Ca}))),p({title:"Sucesso!",description:"Cartão definido como padrão"}),v(!1),ka(null))},ml=()=>{if(!Ke||parseFloat(Ke)<=0){p({title:"Erro",description:"Digite um valor válido",variant:"destructive"});return}if(!Ds.trim()){p({title:"Erro",description:"Informe o motivo da operação",variant:"destructive"});return}cs(!0)},xl=async()=>{ks(!0);try{const s=parseFloat(Ke),m=c.wallet_balance||0;let u=m;De==="immediate"&&(u=m+s);const _={id:`stmt_${Date.now()}`,date:new Date().toISOString(),type:De==="blocked"?"blocked":"credit",amount:s,reason:Ds,balanceAfter:De==="blocked"?m:u,admin:"Admin User"};if(De==="blocked")At(Fe=>Fe+s);else{const Fe={...c,wallet_balance:u,id:c.id};(await(await fetch(`/api/admin/users/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)})).json()).success&&me(Tl=>({...Tl,wallet_balance:u}))}_a([_,..._s]),p({title:"Sucesso!",description:`${De==="blocked"?"Crédito bloqueado":"Crédito"} adicionado com sucesso`}),Ea(""),Ta(""),As(!1),cs(!1)}catch(s){console.error("[v0] Error adding balance:",s),p({title:"Erro",description:"Falha ao adicionar crédito",variant:"destructive"})}finally{ks(!1)}},hl=()=>{if(!Ks){p({title:"Erro",description:"Anexe uma nota fiscal",variant:"destructive"});return}p({title:"Sucesso!",description:"Solicitação de desbloqueio enviada para análise"}),Xs(!1),Oa(null)},ul=()=>{Ps("email"),Zs(""),Qs(!0)},pl=async()=>{Ze(!0);try{if(await new Promise(m=>setTimeout(m,1e3)),pe==="email")p({title:"Sucesso!",description:"Email de redefinição enviado para "+c.email});else if(pe==="link"){const m=`https://allka.com/auth/reset-password?token=tk_${Date.now()}&user=${c.id}`;Zs(m),p({title:"Link gerado!",description:"Copie o link para compartilhar com o usuário"})}else if(pe==="direct"){const m=Math.random().toString(36).substring(2,15);p({title:"Sucesso!",description:"Senha redefinida para: "+m})}const s={id:`log_${Date.now()}`,date:new Date().toISOString(),action:`Redefinição de senha (${pe})`,ip:"187.45.123.45",location:"São Paulo, SP",admin:"Admin User"};We([s,...Pe]),Qs(!1)}catch(s){console.error("[v0] Error resetting password:",s),p({title:"Erro",description:"Falha ao redefinir senha",variant:"destructive"})}finally{Ze(!1)}},bl=()=>{Le?($a({type:"disable-2fa",message:"Tem certeza que deseja desativar 2FA? Isso reduzirá a segurança da conta.",callback:gl}),Ye(!0)):(sa(!0),Et("https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=otpauth://totp/joao%40allka.com?secret=JBSWY3DPEBLW64TMMQ======"),Ot("JBSWY3DPEBLW64TMMQ======"))},gl=async()=>{Ze(!0);try{await new Promise(m=>setTimeout(m,800)),ea(!1);const s={id:`log_${Date.now()}`,date:new Date().toISOString(),action:"2FA desativado",ip:"187.45.123.45",location:"São Paulo, SP",admin:"Usuário"};We([s,...Pe]),p({title:"Sucesso!",description:"2FA foi desativado"}),Ye(!1)}catch(s){console.error("[v0] Error disabling 2FA:",s),p({title:"Erro",description:"Falha ao desativar 2FA",variant:"destructive"})}finally{Ze(!1)}},jl=async()=>{if(!aa||aa.length!==6){p({title:"Erro",description:"Digite um código de 6 dígitos",variant:"destructive"});return}Ze(!0);try{await new Promise(m=>setTimeout(m,1e3)),ea(!0),Ua(new Date().toISOString()),La(new Date().toISOString());const s={id:`log_${Date.now()}`,date:new Date().toISOString(),action:"2FA ativado",ip:"187.45.123.45",location:"São Paulo, SP",admin:"Usuário"};We([s,...Pe]),p({title:"Sucesso!",description:"2FA foi ativado com sucesso"}),sa(!1),ta(!1),Ia("")}catch(s){console.error("[v0] Error verifying 2FA:",s),p({title:"Erro",description:"Código inválido",variant:"destructive"})}finally{Ze(!1)}},vl=s=>{la(Qe.filter(_=>_.id!==s));const m=Qe.find(_=>_.id===s),u={id:`log_${Date.now()}`,date:new Date().toISOString(),action:`Sessão encerrada (${m?.browser})`,ip:m?.ip||"N/A",location:m?.location||"N/A",admin:"Admin User"};We([u,...Pe]),p({title:"Sucesso!",description:"Sessão encerrada"})},fl=()=>{$a({type:"end-all-sessions",message:"Tem certeza que deseja encerrar TODAS as sessões? O usuário será desconectado de todos os dispositivos.",callback:()=>{la([]);const s={id:`log_${Date.now()}`,date:new Date().toISOString(),action:"Todas as sessões encerradas",ip:"187.45.123.45",location:"São Paulo, SP",admin:"Admin User"};We([s,...Pe]),p({title:"Sucesso!",description:"Todas as sessões foram encerradas"}),Ye(!1)}}),Ye(!0)},Nl=s=>{za(Fs.filter(_=>_.id!==s));const m=Fs.find(_=>_.id===s),u={id:`log_${Date.now()}`,date:new Date().toISOString(),action:`Dispositivo revogado: ${m?.name}`,ip:m?.ip||"N/A",location:"N/A",admin:"Admin User"};We([u,...Pe]),p({title:"Sucesso!",description:"Dispositivo revogado"})},Ja=s=>{navigator.clipboard.writeText(s),p({title:"Copiado!",description:"Link copiado para a área de transferência"})},yl=async()=>{ks(!0);try{const s=parseFloat(os),m=c.wallet_balance||0,u=ds==="add"?m+s:m-s;if(u<0){p({title:"Erro",description:"Saldo não pode ser negativo",variant:"destructive"});return}const _={...c,wallet_balance:u,id:c.id},ps=await(await fetch(`/api/admin/users/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).json();ps.success&&ps.data?(me(Ka=>({...Ka,wallet_balance:u})),p({title:"Sucesso!",description:`Saldo atualizado para R$ ${u.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}),wt(""),cs(!1)):p({title:"Erro",description:"Falha ao atualizar saldo",variant:"destructive"})}catch(s){console.error("[v0] Error applying wallet adjustment:",s),p({title:"Erro",description:"Falha ao aplicar ajuste",variant:"destructive"})}finally{ks(!1)}},wl=()=>{Js(!0),ms({role:c.role,permissions:c.permissions||[]})},Cl=()=>{Js(!1),ms({}),Ss(!1)},kl=(s,m)=>{ms(u=>({...u,[s]:m}))},hs=s=>{const m=re.permissions||[],u=m.includes(s)?m.filter(_=>_!==s):[...m,s];ms(_=>({..._,permissions:u}))},Sl=()=>{Ss(!0)},_l=async()=>{F(!0);try{const s={...c,role:re.role||c.role,permissions:re.permissions||c.permissions,id:c.id},u=await(await fetch(`/api/admin/users/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();u.success&&u.data?(me(_=>({..._,role:s.role,permissions:s.permissions})),p({title:"Sucesso!",description:"Permissões atualizadas com sucesso"}),Js(!1),ms({})):p({title:"Erro",description:u.message||"Falha ao salvar permissões",variant:"destructive"})}catch(s){console.error("[v0] Error saving permissions:",s),p({title:"Erro",description:"Falha ao salvar permissões",variant:"destructive"})}finally{Ss(!1),F(!1)}},Al=()=>{Se(!0)},Dl=async()=>{const s=H.name??c.name,m=H.email??c.email;if(!s||!m){p({title:"Erro",description:"Nome e email são obrigatórios",variant:"destructive"}),Se(!1);return}F(!0);try{const u={...c,...H,name:s,email:m,id:c.id},Fe=await(await fetch(`/api/admin/users/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();Fe.success&&Fe.data?(me(ps=>({...ps,...Fe.data})),p({title:"Sucesso!",description:"Dados da conta atualizados com sucesso"}),E(!1),q({})):p({title:"Erro",description:Fe.message||"Falha ao salvar dados",variant:"destructive"})}catch(u){console.error("[v0] Error saving account data:",u),p({title:"Erro",description:"Falha ao salvar dados da conta",variant:"destructive"})}finally{Se(!1),F(!1)}},us=(s,m)=>{q(u=>({...u,[s]:m}))},es=s=>H[s]??c[s],Pl=s=>{w&&us("status",s)},Fl=s=>{w&&us("account_type",s)},Q=()=>H.status??"ativo",ze=()=>H.account_type??Os.account_type??"premium",Ha=s=>{switch(s){case"ativo":return"bg-emerald-100 text-emerald-700 border-emerald-300";case"inativo":return"bg-slate-100 text-slate-700 border-slate-300";case"pausado":return"bg-amber-100 text-amber-700 border-amber-300";case"suspenso":return"bg-red-100 text-red-700 border-red-300";default:return"bg-slate-100 text-slate-700 border-slate-300"}},Xa=s=>{switch(s){case"free":return"bg-slate-100 text-slate-700 border-slate-300";case"premium":return"bg-blue-100 text-blue-700 border-blue-300";case"vip":return"bg-purple-100 text-purple-700 border-purple-300";default:return"bg-slate-100 text-slate-700 border-slate-300"}};return!x&&!se?null:e.jsx(e.Fragment,{children:e.jsxs("div",{className:gt("fixed top-0 z-40 h-screen","bg-background overflow-hidden flex flex-col","transition-all duration-300 ease-in-out",se?"slide-out-to-right opacity-0":"slide-in-from-right opacity-100"),style:{left:Wa.left,width:Wa.width,display:x&&!se?"flex":"none"},children:[e.jsx(oi,{user:c,isEditMode:Ce,isSaving:b,onSave:Ht,onCancel:Jt,onClose:Wt,onExport:Xt,userLevel:Vt,levelProgress:Bt,userAccountStatus:$t,userAccountType:xs,userPlan:Gt,showBalance:Ga,onToggleBalance:()=>Mt(!Ga)}),e.jsxs(El,{defaultValue:"visao-geral",className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"sticky top-0 z-40 flex-shrink-0 border-b border-slate-200 bg-white px-6 py-3 overflow-x-auto",children:e.jsx(Ol,{className:"grid w-max grid-cols-6 gap-1 bg-transparent p-0 h-auto",children:["visao-geral","conta","dados","financeiro","permissoes","seguranca"].map(s=>e.jsxs(Rl,{value:s,className:"px-3 py-2 text-xs font-medium rounded-md border border-transparent data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:border-blue-300 hover:bg-slate-100",children:[s==="visao-geral"&&"Visão Geral",s==="conta"&&"Conta",s==="dados"&&"Dados",s==="financeiro"&&"Financeiro",s==="permissoes"&&"Permissões",s==="seguranca"&&"Segurança"]},s))})}),e.jsx(ut,{className:"flex-1 min-h-0 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-6 app-brand-soft",children:[e.jsxs(ss,{value:"visao-geral",className:"space-y-4 mt-0",children:[e.jsx(di,{user:c,accountType:xs}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Total de Tarefas Executadas"}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 mt-2",children:"1,247"}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"+12% em relação ao mês anterior"})]}),e.jsx("div",{className:"p-3 bg-white rounded-lg border border-blue-200",children:e.jsx(Ls,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Nota Geral na Plataforma"}),e.jsx("div",{className:"p-2 bg-white rounded-lg border border-amber-200",children:e.jsx(ia,{className:"h-5 w-5 text-amber-600"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:"4.5"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"relative",children:s<=Math.floor(4.5)?e.jsx("span",{className:"text-lg",children:"★"}):s===Math.ceil(4.5)&&4.5%1!==0?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("span",{className:"text-lg text-slate-300",children:"★"}),e.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:"50%"},children:e.jsx("span",{className:"text-lg text-amber-400",children:"★"})})]}):e.jsx("span",{className:"text-lg text-slate-300",children:"★"})},s))}),e.jsx("span",{className:"text-xs text-slate-600 ml-2",children:"(125 avaliações)"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Progresso até 5 estrelas"}),e.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"90%"})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-amber-500 h-2 rounded-full transition-all",style:{width:"90%"}})})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ls,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-emerald-700 font-semibold",children:"Subindo"})]}),e.jsx("span",{className:"text-xs text-slate-600",children:"+0.2 estrelas este mês"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Último Login"}),e.jsx(pt,{className:"h-4 w-4 text-emerald-600"})]}),e.jsx("div",{className:"text-sm font-bold text-slate-900",children:"Hoje"}),e.jsx("div",{className:"text-xs text-slate-500",children:"14:30 (2h atrás)"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Média Sessão"}),e.jsx(ia,{className:"h-4 w-4 text-purple-600"})]}),e.jsx("div",{className:"text-sm font-bold text-slate-900",children:"18 min"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Tempo médio"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Taxa Atividade"}),e.jsx(ra,{className:"h-4 w-4 text-amber-600"})]}),e.jsx(k,{className:"bg-emerald-100 text-emerald-700 text-xs",children:"Alta"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"87% (7 dias)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Acessos (30 dias)"}),e.jsx(it,{width:"100%",height:150,children:e.jsxs(Kl,{data:mi,children:[e.jsx(rt,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(nt,{dataKey:"date",tick:{fontSize:10}}),e.jsx(ot,{tick:{fontSize:10}}),e.jsx(dt,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"4px",color:"#fff",fontSize:"11px"}}),e.jsx(Ql,{type:"monotone",dataKey:"acessos",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",r:2}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Módulos Mais Usados"}),e.jsx(it,{width:"100%",height:150,children:e.jsxs(Hl,{data:xi,layout:"vertical",children:[e.jsx(rt,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(nt,{type:"number",tick:{fontSize:10}}),e.jsx(ot,{dataKey:"nome",type:"category",tick:{fontSize:9},width:60}),e.jsx(dt,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"4px",color:"#fff",fontSize:"11px"}}),e.jsx(Xl,{dataKey:"uso",fill:"#3b82f6",radius:2})]})})]})]}),e.jsx(Ve,{type:"multiple",defaultValue:["info-principais"],className:"space-y-3",children:e.jsxs(A,{value:"info-principais",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Informações Principais"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"ID:"}),e.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded text-xs",children:c.id})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Tipo:"}),(()=>{const s=xs?String(xs).toLowerCase().trim():null;return s==="company"?e.jsx(k,{className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Company"}):s==="nomad"?e.jsx(k,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Nomad"}):s==="agency"?e.jsx(k,{className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Agency"}):s?e.jsx(k,{className:"bg-slate-600",children:xs}):e.jsx(k,{className:"bg-blue-600",children:ze().charAt(0).toUpperCase()+ze().slice(1)})})()]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Função:"}),e.jsx(k,{variant:"outline",children:"Admin"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Status:"}),e.jsx(Il,{className:"h-4 w-4 text-emerald-600"})]})]})})]})})]}),e.jsxs(ss,{value:"conta",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Gerenciar Conta"}),e.jsx("div",{className:"flex items-center gap-2",children:w?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:Al,size:"sm",disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(js,{className:"h-4 w-4 mr-2"}),b?"Salvando...":"Salvar"]}),e.jsxs(o,{onClick:Qt,size:"sm",variant:"outline",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):e.jsxs(o,{onClick:Kt,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})})]}),e.jsxs(Ve,{type:"multiple",value:Ms,onValueChange:$e,className:"space-y-3",children:[e.jsxs(A,{value:"dados-principais",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Dados Principais da Conta"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Nome Completo"}),w?e.jsx(i,{value:es("name"),onChange:s=>us("name",s.target.value),className:"border-slate-300",placeholder:"Digite o nome completo"}):e.jsx("div",{className:"font-medium text-slate-900",children:es("name")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Email"}),w?e.jsx(i,{type:"email",value:es("email"),onChange:s=>us("email",s.target.value),className:"border-slate-300",placeholder:"Digite o email"}):e.jsx("div",{className:"font-medium text-slate-900 truncate",children:es("email")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Username / Login"}),e.jsx("div",{className:"font-medium text-slate-900 truncate",children:c.email?.split("@")[0]||"username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"ID Interno"}),e.jsx("code",{className:"bg-slate-100 px-3 py-2 rounded text-sm font-mono font-bold text-slate-900",children:c.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Data de Criação"}),e.jsx("div",{className:"font-medium text-slate-900",children:"10 jan 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Último Login"}),e.jsx("div",{className:"font-medium text-slate-900",children:"Hoje às 14:30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Tipo de Usuário"}),w?e.jsxs("select",{value:es("role")||"admin",onChange:s=>us("role",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-medium",children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"nômade",children:"Nômade"}),e.jsx("option",{value:"líder",children:"Líder"}),e.jsx("option",{value:"usuário",children:"Usuário"})]}):e.jsx(k,{className:"bg-blue-100 text-blue-700 border border-blue-300 capitalize",children:es("role")})]})]})})]}),e.jsxs(A,{value:"status-conta",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Status da Conta"}),e.jsx(k,{className:`ml-auto ${Ha(Q())} border`,children:Q().charAt(0).toUpperCase()+Q().slice(1)})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-4",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-slate-900 block mb-3",children:"Alterar Status da Conta"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["ativo","inativo","pausado","suspenso"].map(s=>e.jsx(o,{onClick:()=>Pl(s),variant:Q()===s?"default":"outline",className:`text-xs font-medium capitalize ${Q()===s?s==="ativo"?"bg-emerald-600 hover:bg-emerald-700":s==="inativo"?"bg-slate-600 hover:bg-slate-700":s==="pausado"?"bg-amber-600 hover:bg-amber-700":"bg-red-600 hover:bg-red-700":""}`,children:s},s))})]}),e.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:e.jsxs("p",{className:"text-xs text-slate-600",children:[Q()==="ativo"&&"A conta está ativa e o usuário pode acessar todos os recursos normalmente.",Q()==="inativo"&&"A conta está inativa. O usuário não pode fazer login.",Q()==="pausado"&&"A conta está pausada temporariamente. O usuário pode reativar depois.",Q()==="suspenso"&&"A conta está suspensa por violação de políticas."]})})]}):e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Status Atual:"}),e.jsx(k,{className:`${Ha(Q())} border text-sm py-2`,children:Q().charAt(0).toUpperCase()+Q().slice(1)}),e.jsxs("p",{className:"text-xs text-slate-600 mt-3",children:[Q()==="ativo"&&"A conta está ativa e o usuário pode acessar todos os recursos normalmente.",Q()==="inativo"&&"A conta está inativa. O usuário não pode fazer login.",Q()==="pausado"&&"A conta está pausada temporariamente. O usuário pode reativar depois.",Q()==="suspenso"&&"A conta está suspensa por violação de políticas."]})]})})})]}),e.jsxs(A,{value:"nivel-performance",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Nível e Plano da Conta"}),e.jsx(k,{className:`ml-auto ${Xa(ze())} border capitalize`,children:ze()})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-4",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-slate-900 block mb-3",children:"Alterar Nível da Conta"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["free","premium","vip"].map(s=>e.jsx(o,{onClick:()=>Fl(s),variant:ze()===s?"default":"outline",className:`text-xs font-medium capitalize ${ze()===s?s==="free"?"bg-slate-600 hover:bg-slate-700":s==="premium"?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700":""}`,children:s},s))})]}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-1",children:"Nível Atual"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:"7"}),e.jsx("div",{className:"text-xs text-slate-600",children:"de 10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-1",children:"Classificação"}),e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(s=>e.jsx("span",{className:"text-lg",children:s<=4?"★":"☆"},s)),e.jsx("span",{className:"text-xs text-slate-600 ml-2",children:"4.0/5.0"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2",children:"Progresso até Nível 8"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"text-xs text-slate-600",children:"75%"})}),e.jsx("div",{className:"w-full bg-slate-300 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-purple-600 h-2.5 rounded-full",style:{width:"75%"}})})]})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 bg-white bg-opacity-60 rounded px-3 py-2",children:[e.jsx(Ls,{className:"h-4 w-4 text-emerald-600"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-semibold text-emerald-700",children:"Em Ascensão"}),e.jsx("span",{className:"text-slate-600 ml-2",children:"+2 níveis este trimestre"})]})]})]})})]}):e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-600 mb-1",children:"Plano Atual"}),e.jsx(k,{className:`${Xa(ze())} border capitalize text-sm py-2`,children:ze()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-600 mb-1",children:"Nível"}),e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:"7"})]})]}),e.jsxs("div",{className:"border-t border-purple-200 pt-3",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2",children:"Progresso"}),e.jsx("div",{className:"w-full bg-slate-300 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-purple-600 h-2.5 rounded-full",style:{width:"75%"}})}),e.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"75% até o próximo nível"})]})]})})})})]})]})]}),e.jsxs(ss,{value:"dados",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dados do Usuário"}),e.jsx("div",{className:"flex items-center gap-2",children:O?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:el,size:"sm",disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(js,{className:"h-4 w-4 mr-2"}),b?"Salvando...":"Salvar"]}),e.jsxs(o,{onClick:Zt,size:"sm",variant:"outline",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):e.jsxs(o,{onClick:Yt,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Editar"]})})]}),e.jsxs(Ve,{type:"multiple",value:l,onValueChange:S,className:"space-y-3",children:[e.jsxs(A,{value:"pessoais",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Dados Pessoais"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Nome Completo"}),O?e.jsx(i,{value:g("name"),onChange:s=>z("name",s.target.value),className:"border-slate-300",placeholder:"Digite o nome completo"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("name")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Nome Social"}),O?e.jsx(i,{value:g("social_name")||"",onChange:s=>z("social_name",s.target.value),className:"border-slate-300",placeholder:"Se aplicável"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("social_name")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Data de Nascimento"}),O?e.jsx(i,{type:"date",value:g("birth_date")||"",onChange:s=>z("birth_date",s.target.value),className:"border-slate-300"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("birth_date")||"15 mai 1990"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Sexo / Gênero"}),O?e.jsxs("select",{value:g("gender")||"",onChange:s=>z("gender",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-medium",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Feminino"}),e.jsx("option",{value:"O",children:"Outro"}),e.jsx("option",{value:"N",children:"Prefiro não informar"})]}):e.jsx("div",{className:"font-medium text-slate-900",children:g("gender")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"CPF / Documento"}),O?e.jsx(i,{value:g("cpf")||"",onChange:s=>z("cpf",s.target.value),className:"border-slate-300 font-mono",placeholder:"000.000.000-00"}):e.jsx("code",{className:"bg-slate-100 px-3 py-2 rounded text-sm font-mono font-bold text-slate-900",children:g("cpf")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"RG (se aplicável)"}),O?e.jsx(i,{value:g("rg")||"",onChange:s=>z("rg",s.target.value),className:"border-slate-300 font-mono",placeholder:"RG"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("rg")||"—"})]})]})})]}),e.jsxs(A,{value:"contato",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Contato"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Email"}),O?e.jsx(i,{type:"email",value:g("email"),onChange:s=>z("email",s.target.value),className:"border-slate-300",placeholder:"email@example.com"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("email")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Telefone Principal"}),O?e.jsx(i,{type:"tel",value:g("phone")||"",onChange:s=>z("phone",s.target.value),className:"border-slate-300",placeholder:"(00) 00000-0000"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("phone")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Telefone Secundário"}),O?e.jsx(i,{type:"tel",value:g("phone_secondary")||"",onChange:s=>z("phone_secondary",s.target.value),className:"border-slate-300",placeholder:"(00) 00000-0000"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("phone_secondary")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"WhatsApp"}),O?e.jsx(i,{type:"tel",value:g("whatsapp")||"",onChange:s=>z("whatsapp",s.target.value),className:"border-slate-300",placeholder:"(00) 00000-0000"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("whatsapp")||"—"})]})]})})]}),e.jsxs(A,{value:"endereco",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ll,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Endereço"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"CEP"}),O?e.jsx(i,{value:g("zip_code")||"",onChange:s=>z("zip_code",s.target.value),className:"border-slate-300 font-mono",placeholder:"00000-000"}):e.jsx("code",{className:"bg-slate-100 px-3 py-2 rounded text-sm font-mono font-bold text-slate-900",children:g("zip_code")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Rua"}),O?e.jsx(i,{value:g("street")||"",onChange:s=>z("street",s.target.value),className:"border-slate-300",placeholder:"Nome da rua"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("street")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Número"}),O?e.jsx(i,{value:g("number")||"",onChange:s=>z("number",s.target.value),className:"border-slate-300",placeholder:"123"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("number")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Complemento"}),O?e.jsx(i,{value:g("complement")||"",onChange:s=>z("complement",s.target.value),className:"border-slate-300",placeholder:"Apto 123, Bloco A"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("complement")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Bairro"}),O?e.jsx(i,{value:g("neighborhood")||"",onChange:s=>z("neighborhood",s.target.value),className:"border-slate-300",placeholder:"Nome do bairro"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("neighborhood")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Cidade"}),O?e.jsx(i,{value:g("city")||"",onChange:s=>z("city",s.target.value),className:"border-slate-300",placeholder:"São Paulo"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("city")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Estado"}),O?e.jsx(i,{value:g("state")||"",onChange:s=>z("state",s.target.value.toUpperCase()),className:"border-slate-300",placeholder:"SP",maxLength:2}):e.jsx("div",{className:"font-medium text-slate-900",children:g("state")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"País"}),O?e.jsx(i,{value:g("country")||"Brasil",onChange:s=>z("country",s.target.value),className:"border-slate-300",placeholder:"Brasil"}):e.jsx("div",{className:"font-medium text-slate-900",children:g("country")||"Brasil"})]})]})})]}),e.jsxs(A,{value:"adicionais",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Informações Adicionais"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Observações Administrativas"}),O?e.jsx("textarea",{value:g("admin_notes")||"",onChange:s=>z("admin_notes",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-medium min-h-20",placeholder:"Notas visíveis para admin"}):e.jsx("div",{className:"font-medium text-slate-900 whitespace-pre-wrap",children:g("admin_notes")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Notas Internas (Visíveis apenas para admin)"}),O?e.jsx("textarea",{value:g("internal_notes")||"",onChange:s=>z("internal_notes",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-medium min-h-20",placeholder:"Notas internas do sistema"}):e.jsx("div",{className:"font-medium text-slate-900 whitespace-pre-wrap",children:g("internal_notes")||"—"})]})]})})]})]})]}),e.jsxs(ss,{value:"financeiro",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dados Financeiros"}),e.jsx("div",{className:"flex items-center gap-2",children:L?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:ll,size:"sm",disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(js,{className:"h-4 w-4 mr-2"}),b?"Salvando...":"Salvar"]}),e.jsxs(o,{onClick:tl,size:"sm",variant:"outline",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):e.jsxs(o,{onClick:al,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Editar"]})})]}),e.jsxs(Ve,{type:"multiple",value:Bs,onValueChange:rs,className:"space-y-3",children:[e.jsxs(A,{value:"pagamentos",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Za,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Métodos de Pagamento"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide",children:"Cartões de Crédito/Débito"}),L&&e.jsxs(o,{onClick:rl,size:"sm",className:"h-8 gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Be,{className:"h-4 w-4"}),"Novo Cartão"]})]}),_e.length===0?e.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-lg border border-dashed border-slate-300",children:[e.jsx(Za,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Nenhum cartão cadastrado"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_e.map(s=>e.jsxs("div",{className:`relative h-56 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group ${s.isDefault?"ring-2 ring-blue-500":""}`,style:{background:s.isDefault?"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)":"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between text-white",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold opacity-75 uppercase tracking-widest",children:"BANCO"}),e.jsx("div",{className:"text-lg font-bold",children:s.brand})]}),s.isDefault&&e.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold",children:"Padrão"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold opacity-75 uppercase tracking-widest mb-2",children:"Número"}),e.jsxs("div",{className:"text-2xl font-mono font-bold tracking-widest",children:["•••• •••• •••• ",s.lastDigits]})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold opacity-75 uppercase tracking-widest",children:"Titular"}),e.jsx("div",{className:"text-sm font-bold",children:s.holder})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-semibold opacity-75 uppercase tracking-widest",children:"Validade"}),e.jsx("div",{className:"text-sm font-bold",children:s.expiry})]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-end justify-center pb-4 opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex gap-2",children:[!s.isDefault&&e.jsx(o,{onClick:()=>dl(s.id),size:"sm",className:"bg-white text-slate-900 hover:bg-blue-100 font-semibold h-9 px-4",children:"Definir Padrão"}),L&&e.jsx(e.Fragment,{children:e.jsx(o,{onClick:()=>ol(s.id),size:"sm",variant:"outline",className:"bg-white text-slate-900 hover:bg-red-100 h-9 px-3",children:e.jsx(vs,{className:"h-4 w-4"})})})]})})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide",children:"PIX"}),L&&e.jsxs(o,{size:"sm",variant:"outline",className:"h-8 gap-1 bg-transparent",children:[e.jsx(Be,{className:"h-4 w-4"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-2",children:L?e.jsx("div",{className:"space-y-2",children:e.jsx(i,{placeholder:"Chave PIX (CPF, CNPJ, email, telefone ou chave aleatória)",value:R("pix_key")||"",onChange:s=>be("pix_key",s.target.value),className:"border-slate-300"})}):e.jsx("div",{className:"bg-slate-50 p-3 rounded border border-slate-200 text-sm text-slate-700",children:R("pix_key")||"Nenhuma chave PIX cadastrada"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide",children:"Contas Bancárias"}),L&&e.jsxs(o,{size:"sm",variant:"outline",className:"h-8 gap-1 bg-transparent",children:[e.jsx(Be,{className:"h-4 w-4"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-2 bg-slate-50 p-3 rounded border border-slate-200",children:L?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(i,{placeholder:"Banco",value:R("bank_name")||"",onChange:s=>be("bank_name",s.target.value),className:"border-slate-300"}),e.jsx(i,{placeholder:"Agência",value:R("agency_number")||"",onChange:s=>be("agency_number",s.target.value),className:"border-slate-300"}),e.jsx(i,{placeholder:"Conta",value:R("account_number")||"",onChange:s=>be("account_number",s.target.value),className:"border-slate-300"}),e.jsxs("select",{value:R("account_type")||"",onChange:s=>be("account_type",s.target.value),className:"border border-slate-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tipo"}),e.jsx("option",{value:"corrente",children:"Corrente"}),e.jsx("option",{value:"poupanca",children:"Poupança"})]})]}):e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Banco:"})," ",e.jsx("span",{className:"font-medium",children:R("bank_name")||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Agência:"})," ",e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono font-bold",children:R("agency_number")||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Conta:"})," ",e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono font-bold",children:R("account_number")||"—"})]})]})})]})]})})]}),e.jsxs(A,{value:"carteira",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ul,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Carteira Digital / Allkoin"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 p-6 rounded-xl border border-amber-300 shadow-lg text-white",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide block mb-2 opacity-90",children:"Saldo Disponível"}),e.jsxs("div",{className:"text-3xl font-bold mb-1",children:["R$ ",(c.wallet_balance||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-xs opacity-75",children:"Pronto para usar"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 via-amber-500 to-orange-500 p-6 rounded-xl border border-yellow-300 shadow-lg text-white",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide block mb-2 opacity-90",children:"Saldo Bloqueado"}),e.jsxs("div",{className:"text-3xl font-bold mb-1",children:["R$ ",Hs.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-xs opacity-75",children:"Aguardando aprovação"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Status da Carteira"}),L?e.jsxs("select",{value:R("wallet_status")||"ativa",onChange:s=>be("wallet_status",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"ativa",children:"Ativa"}),e.jsx("option",{value:"bloqueada",children:"Bloqueada"})]}):e.jsx(k,{className:R("wallet_status")==="ativa"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700",children:R("wallet_status")==="ativa"?"Ativa":"Bloqueada"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(o,{onClick:()=>Aa(!0),className:"bg-slate-700 hover:bg-slate-800 text-white font-semibold gap-2",children:[e.jsx(et,{className:"h-4 w-4"}),"Ver Extrato"]}),L&&e.jsxs(o,{onClick:()=>As(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Adicionar Saldo"]})]}),Hs>0&&!L&&e.jsx(o,{onClick:()=>Xs(!0),variant:"outline",className:"w-full font-semibold text-amber-600 border-amber-300",children:"Solicitar Desbloqueio de Saldo"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Últimas Movimentações"}),e.jsxs("div",{className:"space-y-2 bg-slate-50 p-3 rounded border border-slate-200 max-h-48 overflow-y-auto",children:[_s.slice(0,5).map(s=>e.jsxs("div",{className:"flex justify-between items-center text-xs border-b border-slate-200 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:s.reason}),e.jsx("div",{className:"text-slate-500 text-xs",children:new Date(s.date).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${s.type==="credit"?"text-emerald-600":s.type==="debit"?"text-red-600":"text-yellow-600"}`,children:[s.type==="credit"?"+":s.type==="debit"?"-":"🔒"," R$ ",s.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-slate-500 text-xs",children:["Saldo: R$ ",s.balanceAfter.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]},s.id)),_s.length===0&&e.jsx("div",{className:"text-center py-4 text-slate-500 text-xs",children:"Nenhuma movimentação"})]})]})]})})]}),e.jsxs(A,{value:"financeiro",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Dados Financeiros Gerais"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"CPF / CNPJ"}),L?e.jsx(i,{value:R("financial_document")||"",onChange:s=>be("financial_document",s.target.value),className:"border-slate-300 font-mono",placeholder:"00000000000000"}):e.jsx("code",{className:"bg-slate-100 px-3 py-2 rounded text-sm font-mono font-bold text-slate-900",children:R("financial_document")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Nome do Titular"}),L?e.jsx(i,{value:R("financial_holder")||"",onChange:s=>be("financial_holder",s.target.value),className:"border-slate-300",placeholder:"Nome do titular"}):e.jsx("div",{className:"font-medium text-slate-900",children:R("financial_holder")||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Tipo de Pessoa"}),L?e.jsxs("select",{value:R("person_type")||"",onChange:s=>be("person_type",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"fisica",children:"Física"}),e.jsx("option",{value:"juridica",children:"Jurídica"})]}):e.jsx("div",{className:"font-medium text-slate-900",children:R("person_type")==="fisica"?"Pessoa Física":R("person_type")==="juridica"?"Pessoa Jurídica":"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Regime Tributário"}),L?e.jsxs("select",{value:R("tax_regime")||"",onChange:s=>be("tax_regime",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"simples",children:"Simples Nacional"}),e.jsx("option",{value:"presumido",children:"Lucro Presumido"}),e.jsx("option",{value:"real",children:"Lucro Real"})]}):e.jsx("div",{className:"font-medium text-slate-900",children:R("tax_regime")||"—"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase tracking-wide",children:"Observações Financeiras Administrativas"}),L?e.jsx("textarea",{value:R("financial_notes")||"",onChange:s=>be("financial_notes",s.target.value),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-medium min-h-20",placeholder:"Notas financeiras"}):e.jsx("div",{className:"font-medium text-slate-900 whitespace-pre-wrap bg-slate-50 p-3 rounded border border-slate-200 min-h-20",children:R("financial_notes")||"—"})]})]})})]})]})]}),e.jsxs(ss,{value:"permissoes",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Controle de Acesso"}),e.jsx("div",{className:"flex items-center gap-2",children:Ae?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:Sl,size:"sm",disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(js,{className:"h-4 w-4 mr-2"}),b?"Salvando...":"Salvar"]}),e.jsxs(o,{onClick:Cl,size:"sm",variant:"outline",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):e.jsxs(o,{onClick:wl,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Editar"]})})]}),e.jsxs(Ve,{type:"multiple",value:kt,onValueChange:St,className:"space-y-3",children:[e.jsxs(A,{value:"role",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Perfil de Acesso"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-3 uppercase tracking-wide",children:"Selecionar Perfil"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{value:"admin",label:"Admin",desc:"Acesso completo ao sistema"},{value:"gestor",label:"Gestor",desc:"Gerenciar usuários e tarefas"},{value:"lider",label:"Líder",desc:"Supervisionar equipe"},{value:"nomade",label:"Nômade",desc:"Acesso básico e flexível"},{value:"financeiro",label:"Financeiro",desc:"Gerenciar dados financeiros"},{value:"suporte",label:"Suporte",desc:"Atender e resolver tickets"}].map(s=>e.jsx("div",{onClick:()=>!Ae&&kl("role",s.value),className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${Ae?"cursor-pointer":"cursor-default"} ${re.role===s.value?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:s.label}),e.jsx("div",{className:"text-xs text-slate-600",children:s.desc})]}),Ae&&e.jsx("div",{className:`h-5 w-5 rounded border-2 flex items-center justify-center ${re.role===s.value?"border-blue-500 bg-blue-500":"border-slate-300"}`,children:re.role===s.value&&e.jsx(va,{className:"h-3 w-3 text-white"})})]})},s.value))})]})})})]}),e.jsxs(A,{value:"admin",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Administração"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-3",children:[{id:"manage_users",label:"Gerenciar usuários",desc:"Criar, editar, deletar usuários"},{id:"manage_permissions",label:"Gerenciar permissões",desc:"Alterar roles e acessos"},{id:"view_sensitive",label:"Visualizar dados sensíveis",desc:"Ver informações confidenciais"},{id:"reset_password",label:"Resetar senhas",desc:"Redefinir senha de usuários"},{id:"access_admin_panel",label:"Acessar painel administrativo",desc:"Usar dashboard admin completo"}].map(s=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-slate-50 border border-slate-200 hover:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:s.label}),e.jsx("div",{className:"text-xs text-slate-600",children:s.desc})]}),Ae?e.jsx("button",{onClick:()=>hs(s.id),className:"flex-shrink-0",children:(re.permissions||[]).includes(s.id)?e.jsx(gs,{className:"h-6 w-6 text-blue-600"}):e.jsx(bs,{className:"h-6 w-6 text-slate-400"})}):e.jsx(k,{className:(c.permissions||[]).includes(s.id)?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700",children:(c.permissions||[]).includes(s.id)?"Ativo":"Inativo"})]},s.id))})})]}),e.jsxs(A,{value:"financial",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zl,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Financeiro"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-3",children:[{id:"view_financial",label:"Visualizar dados financeiros",desc:"Acessar relatórios e históricos"},{id:"edit_financial",label:"Editar dados financeiros",desc:"Atualizar informações financeiras"},{id:"adjust_balance",label:"Ajustar saldo (Allkoin)",desc:"Adicionar ou subtrair do wallet"},{id:"manage_cards",label:"Gerenciar cartões",desc:"Adicionar, editar ou remover cartões"},{id:"manage_accounts",label:"Gerenciar contas bancárias",desc:"Configurar dados bancários"}].map(s=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-slate-50 border border-slate-200 hover:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:s.label}),e.jsx("div",{className:"text-xs text-slate-600",children:s.desc})]}),Ae?e.jsx("button",{onClick:()=>hs(s.id),className:"flex-shrink-0",children:(re.permissions||[]).includes(s.id)?e.jsx(gs,{className:"h-6 w-6 text-blue-600"}):e.jsx(bs,{className:"h-6 w-6 text-slate-400"})}):e.jsx(k,{className:(c.permissions||[]).includes(s.id)?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700",children:(c.permissions||[]).includes(s.id)?"Ativo":"Inativo"})]},s.id))})})]}),e.jsxs(A,{value:"operational",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Operacional"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-3",children:[{id:"create_tasks",label:"Criar tarefas",desc:"Criar novas tarefas e projetos"},{id:"edit_tasks",label:"Editar tarefas",desc:"Modificar tarefas existentes"},{id:"delete_tasks",label:"Excluir tarefas",desc:"Remover tarefas do sistema"},{id:"assign_tasks",label:"Atribuir tarefas",desc:"Designar tarefas a usuários"},{id:"approve_tasks",label:"Aprovar tarefas",desc:"Validar e aprovar conclusões"}].map(s=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-slate-50 border border-slate-200 hover:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:s.label}),e.jsx("div",{className:"text-xs text-slate-600",children:s.desc})]}),Ae?e.jsx("button",{onClick:()=>hs(s.id),className:"flex-shrink-0",children:(re.permissions||[]).includes(s.id)?e.jsx(gs,{className:"h-6 w-6 text-blue-600"}):e.jsx(bs,{className:"h-6 w-6 text-slate-400"})}):e.jsx(k,{className:(c.permissions||[]).includes(s.id)?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700",children:(c.permissions||[]).includes(s.id)?"Ativo":"Inativo"})]},s.id))})})]}),e.jsxs(A,{value:"reports",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Relatórios"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-3",children:[{id:"view_reports",label:"Visualizar relatórios",desc:"Acessar todos os relatórios"},{id:"export_reports",label:"Exportar relatórios",desc:"Gerar e baixar relatórios em PDF/Excel"},{id:"view_metrics",label:"Visualizar métricas avançadas",desc:"Ver análises e KPIs detalhados"}].map(s=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-slate-50 border border-slate-200 hover:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:s.label}),e.jsx("div",{className:"text-xs text-slate-600",children:s.desc})]}),Ae?e.jsx("button",{onClick:()=>hs(s.id),className:"flex-shrink-0",children:(re.permissions||[]).includes(s.id)?e.jsx(gs,{className:"h-6 w-6 text-blue-600"}):e.jsx(bs,{className:"h-6 w-6 text-slate-400"})}):e.jsx(k,{className:(c.permissions||[]).includes(s.id)?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700",children:(c.permissions||[]).includes(s.id)?"Ativo":"Inativo"})]},s.id))})})]}),e.jsxs(A,{value:"system",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ml,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Sistema"})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100",children:e.jsx("div",{className:"space-y-3",children:[{id:"access_settings",label:"Acessar configurações",desc:"Modificar preferências do sistema"},{id:"manage_integrations",label:"Gerenciar integrações",desc:"Conectar APIs e serviços externos"},{id:"view_logs",label:"Visualizar logs",desc:"Acessar histórico de atividades do sistema"}].map(s=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-slate-50 border border-slate-200 hover:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:s.label}),e.jsx("div",{className:"text-xs text-slate-600",children:s.desc})]}),Ae?e.jsx("button",{onClick:()=>hs(s.id),className:"flex-shrink-0",children:(re.permissions||[]).includes(s.id)?e.jsx(gs,{className:"h-6 w-6 text-blue-600"}):e.jsx(bs,{className:"h-6 w-6 text-slate-400"})}):e.jsx(k,{className:(c.permissions||[]).includes(s.id)?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700",children:(c.permissions||[]).includes(s.id)?"Ativo":"Inativo"})]},s.id))})})]})]})]}),e.jsxs(ss,{value:"seguranca",className:"space-y-4 mt-0",children:[e.jsx("div",{className:"flex items-center justify-between sticky top-0 bg-white z-10 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Segurança da Conta"}),e.jsx(k,{className:"bg-emerald-100 text-emerald-700 font-semibold",children:"Segura"})]})}),e.jsxs(Ve,{type:"multiple",value:U,onValueChange:de,className:"space-y-3",children:[e.jsxs(A,{value:"auth",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Autenticação e Senha"})]})}),e.jsxs(P,{className:"px-4 py-4 border-t border-slate-100 space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900",children:"Força da Senha"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Sua senha é forte e segura"})]}),e.jsx(k,{className:"bg-emerald-100 text-emerald-700",children:"Forte"})]}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-600",children:[e.jsx("div",{children:"✓ Contém letras maiúsculas e minúsculas"}),e.jsx("div",{children:"✓ Contém números"}),e.jsx("div",{children:"✓ Contém caracteres especiais"}),e.jsx("div",{children:"✓ Tem mais de 12 caracteres"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block uppercase",children:"Ações de Senha"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsxs(o,{onClick:ul,className:"bg-blue-600 hover:bg-blue-700 justify-start gap-2",children:[e.jsx(oa,{className:"h-4 w-4"}),"Redefinir Senha"]})})]}),e.jsxs("div",{className:"text-xs text-slate-600 pt-2 border-t border-slate-200",children:[e.jsx("div",{children:"Última alteração: 45 dias atrás"}),e.jsx("div",{className:"text-slate-500 mt-1",children:"Recomendamos alterar a senha a cada 90 dias"})]})]})]}),e.jsxs(A,{value:"2fa",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Autenticação em Dois Fatores (2FA)"}),Le&&e.jsx(k,{className:"bg-emerald-100 text-emerald-700 text-xs ml-2",children:"Ativado"})]})}),e.jsxs(P,{className:"px-4 py-4 border-t border-slate-100 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${Le?"bg-emerald-50 border border-emerald-200":"bg-slate-50 border border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900",children:"Status 2FA"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Proteção adicional com autenticador"})]}),e.jsx(k,{className:Le?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-700",children:Le?"Ativado":"Inativo"})]}),Le&&e.jsxs("div",{className:"space-y-1 text-xs text-slate-600",children:[e.jsxs("div",{children:["✓ Ativação: ",new Date(Lt).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:["✓ Última validação: ",new Date(It).toLocaleTimeString("pt-BR")]})]})]}),e.jsxs(o,{onClick:bl,className:Le?"bg-red-600 hover:bg-red-700 justify-start gap-2 w-full":"bg-blue-600 hover:bg-blue-700 justify-start gap-2 w-full",children:[e.jsx(Rs,{className:"h-4 w-4"}),Le?"Desativar 2FA":"Ativar 2FA"]})]})]}),e.jsxs(A,{value:"sessions",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vl,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Sessões Ativas"}),e.jsx(k,{className:"bg-slate-200 text-slate-700 text-xs ml-2",children:Qe.filter(s=>s.status==="active").length})]})}),e.jsxs(P,{className:"px-4 py-4 border-t border-slate-100 space-y-3",children:[Qe.map(s=>e.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 text-slate-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:s.browser}),s.status==="active"&&e.jsx(k,{className:"bg-emerald-100 text-emerald-700 text-xs",children:"Ativa"})]}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1 space-y-1",children:[e.jsxs("div",{children:["OS: ",s.os]}),e.jsxs("div",{children:["Local: ",s.location]}),e.jsxs("div",{children:["IP: ",s.ip]}),e.jsxs("div",{children:["Login: ",new Date(s.loginTime).toLocaleString("pt-BR")]})]})]}),s.status==="active"&&e.jsx(o,{onClick:()=>vl(s.id),size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",children:"Encerrar"})]})},s.id)),Qe.length>0&&e.jsx(o,{onClick:fl,variant:"outline",className:"w-full text-red-600 hover:bg-red-50 border-red-200 bg-transparent",children:"Encerrar Todas as Sessões"})]})]}),e.jsxs(A,{value:"devices",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(li,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Dispositivos Conectados"}),e.jsx(k,{className:"bg-slate-200 text-slate-700 text-xs ml-2",children:Fs.length})]})}),e.jsx(P,{className:"px-4 py-4 border-t border-slate-100 space-y-3",children:Fs.map(s=>e.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="mobile"?e.jsx(Rs,{className:"h-4 w-4"}):e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-slate-900",children:s.name})]}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1 space-y-1",children:[e.jsxs("div",{children:["Tipo: ",s.type==="mobile"?"Móvel":"Desktop"]}),e.jsxs("div",{children:["Último acesso: ",new Date(s.lastAccess).toLocaleString("pt-BR")]}),e.jsxs("div",{children:["IP: ",s.ip]})]})]}),e.jsx(o,{onClick:()=>Nl(s.id),size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50 border-red-200",children:"Revogar"})]})},s.id))})]}),e.jsxs(A,{value:"audit",className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"px-4 py-3 hover:bg-slate-50 [&[data-state=open]]:bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Logs e Auditoria"}),e.jsx(k,{className:"bg-slate-200 text-slate-700 text-xs ml-2",children:Pe.length})]})}),e.jsxs(P,{className:"px-4 py-4 border-t border-slate-100 space-y-3",children:[e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Pe.slice(0,5).map(s=>e.jsxs("div",{className:"border border-slate-200 rounded p-2",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:s.action}),e.jsx("div",{className:"text-xs text-slate-600 mt-0.5",children:new Date(s.date).toLocaleString("pt-BR")})]})}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1 space-y-0.5",children:[e.jsxs("div",{children:["IP: ",s.ip," | Local: ",s.location]}),e.jsxs("div",{children:["Admin: ",s.admin]})]})]},s.id))}),e.jsx(o,{onClick:()=>Ma(!0),variant:"outline",className:"w-full",children:"Ver Logs Completos"})]})]})]})]})]})})]}),e.jsx(M,{open:Ge,onOpenChange:Se,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar alterações"}),e.jsx(Z,{children:"Tem certeza que deseja salvar as alterações desta conta? Esta ação não pode ser desfeita."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:Dl,disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,b?"Salvando...":"Confirmar"]})]})]})}),e.jsx(M,{open:ys,onOpenChange:he,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar alterações dos dados"}),e.jsx(Z,{children:"Tem certeza que deseja salvar as alterações dos dados do usuário? Esta ação não pode ser desfeita."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:sl,disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,b?"Salvando...":"Confirmar"]})]})]})}),e.jsx(M,{open:ws,onOpenChange:Re,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar alterações financeiras"}),e.jsx(Z,{children:"Tem certeza que deseja salvar as alterações financeiras deste usuário? Esta ação não pode ser desfeita."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:il,disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,b?"Salvando...":"Confirmar"]})]})]})}),e.jsx(M,{open:Ws,onOpenChange:ns,children:e.jsxs(V,{className:"max-w-md",children:[e.jsxs(B,{children:[e.jsx($,{children:"Adicionar Novo Cartão"}),e.jsx(Z,{children:"Preencha os dados do cartão para adicionar um novo método de pagamento."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-1 uppercase tracking-wide",children:"Número do Cartão"}),e.jsx(i,{placeholder:"0000 0000 0000 0000",value:a.number,onChange:s=>r({...a,number:s.target.value}),maxLength:"19",className:"border-slate-300 font-mono"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-1 uppercase tracking-wide",children:"Validade"}),e.jsx(i,{placeholder:"MM/YY",value:a.expiry,onChange:s=>r({...a,expiry:s.target.value}),maxLength:"5",className:"border-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-1 uppercase tracking-wide",children:"Bandeira"}),e.jsxs("select",{value:a.brand,onChange:s=>r({...a,brand:s.target.value}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"Visa",children:"Visa"}),e.jsx("option",{value:"Mastercard",children:"Mastercard"}),e.jsx("option",{value:"Amex",children:"Amex"}),e.jsx("option",{value:"Elo",children:"Elo"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-1 uppercase tracking-wide",children:"Nome do Titular"}),e.jsx(i,{placeholder:"NOME DO TITULAR",value:a.holder,onChange:s=>r({...a,holder:s.target.value.toUpperCase()}),className:"border-slate-300"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(G,{children:"Cancelar"}),e.jsx(ee,{onClick:nl,className:"bg-blue-600 hover:bg-blue-700",children:"Adicionar Cartão"})]})]})}),e.jsx(M,{open:Sa,onOpenChange:cs,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar Ajuste de Saldo"}),e.jsxs(Z,{children:["Tem certeza que deseja ",ds==="add"?"adicionar":"subtrair"," R$ ",parseFloat(os).toLocaleString("pt-BR",{minimumFractionDigits:2})," do saldo?"]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Saldo Atual:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",(c.wallet_balance||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx("span",{children:ds==="add"?"Adição:":"Subtração:"}),e.jsxs("span",{children:[ds==="add"?"+":"-"," R$ ",parseFloat(os).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-1 mt-1 flex justify-between font-bold",children:[e.jsx("span",{children:"Novo Saldo:"}),e.jsxs("span",{className:"text-emerald-600",children:["R$ ",((ds==="add"?(c.wallet_balance||0)+parseFloat(os):(c.wallet_balance||0)-parseFloat(os))||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:yl,disabled:Xe,className:"bg-emerald-600 hover:bg-emerald-700",children:[Xe?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,Xe?"Aplicando...":"Confirmar"]})]})]})}),e.jsx(M,{open:Ct,onOpenChange:Ss,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar Alterações de Permissões"}),e.jsx(Z,{children:"Tem certeza que deseja salvar as alterações de permissões deste usuário? Esta ação não pode ser desfeita."})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Perfil:"}),e.jsx("span",{className:"font-semibold capitalize",children:re.role})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Permissões:"}),e.jsxs("span",{className:"font-semibold",children:[(re.permissions||[]).length," permissões ativas"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:_l,disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,b?"Salvando...":"Confirmar"]})]})]})}),e.jsx(M,{open:j,onOpenChange:v,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Definir cartão como padrão?"}),e.jsx(Z,{children:"Tem certeza que deseja definir este cartão como seu método de pagamento padrão?"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsx(ee,{onClick:cl,className:"bg-blue-600 hover:bg-blue-700",children:"Confirmar"})]})]})}),e.jsx(M,{open:Pa,onOpenChange:As,children:e.jsxs(V,{className:"max-w-md",children:[e.jsxs(B,{children:[e.jsx($,{children:"Adicionar Crédito/Débito"}),e.jsx(Z,{children:"Preencha os dados para realizar a movimentação."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase",children:"Tipo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(o,{onClick:()=>Fa("immediate"),className:De==="immediate"?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-200 hover:bg-slate-300 text-slate-900",children:"Imediato"}),e.jsx(o,{onClick:()=>Fa("blocked"),className:De==="blocked"?"bg-yellow-600 hover:bg-yellow-700":"bg-slate-200 hover:bg-slate-300 text-slate-900",children:"Bloqueado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase",children:"Valor (R$)"}),e.jsx(i,{type:"number",placeholder:"0.00",value:Ke,onChange:s=>Ea(s.target.value),className:"border-slate-300",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase",children:"Motivo (obrigatório)"}),e.jsx(i,{placeholder:"Descreva o motivo da operação",value:Ds,onChange:s=>Ta(s.target.value),className:"border-slate-300"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(G,{children:"Cancelar"}),e.jsx(ee,{onClick:ml,className:"bg-blue-600 hover:bg-blue-700",children:"Próximo"})]})]})}),e.jsx(M,{open:Sa&&Pa,onOpenChange:s=>{s||(cs(!1),As(!1))},children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar Movimentação"}),e.jsx(Z,{children:"Revise os dados antes de confirmar."})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Tipo:"}),e.jsx("span",{className:"font-semibold",children:De==="immediate"?"Crédito Imediato":"Crédito Bloqueado"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Valor:"}),e.jsxs("span",{className:"font-semibold text-emerald-600",children:["R$ ",parseFloat(Ke).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Motivo:"}),e.jsx("span",{className:"font-semibold",children:Ds})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-2 mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Saldo após:"}),e.jsxs("span",{className:"text-emerald-600 font-bold",children:["R$ ",(De==="blocked"?c.wallet_balance||0:(c.wallet_balance||0)+parseFloat(Ke)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Voltar"}),e.jsxs(ee,{onClick:xl,disabled:Xe,className:"bg-emerald-600 hover:bg-emerald-700",children:[Xe?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,Xe?"Processando...":"Confirmar"]})]})]})}),e.jsx(M,{open:Dt,onOpenChange:Xs,children:e.jsxs(V,{className:"max-w-md",children:[e.jsxs(B,{children:[e.jsx($,{children:"Solicitar Desbloqueio"}),e.jsxs(Z,{children:["Anexe a nota fiscal para solicitar o desbloqueio de R$ ",Hs.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center cursor-pointer hover:border-slate-400 transition",children:[e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>Oa(s.target.files?.[0]||null),className:"hidden",id:"invoice-upload"}),e.jsxs("label",{htmlFor:"invoice-upload",className:"cursor-pointer",children:[e.jsx("div",{className:"text-slate-600 text-sm font-semibold",children:"Clique para selecionar ou arraste a nota fiscal"}),e.jsx("div",{className:"text-slate-500 text-xs mt-1",children:"PDF, JPG ou PNG (máx 5MB)"}),Ks&&e.jsxs("div",{className:"text-emerald-600 text-sm font-semibold mt-2",children:["✓ ",Ks.name]})]})]})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(G,{children:"Cancelar"}),e.jsx(ee,{onClick:hl,className:"bg-emerald-600 hover:bg-emerald-700",children:"Enviar Solicitação"})]})]})}),e.jsx(M,{open:_t,onOpenChange:Aa,children:e.jsxs(V,{className:"max-w-2xl",children:[e.jsxs(B,{children:[e.jsx($,{children:"Extrato Completo"}),e.jsx("div",{className:"space-y-2 mt-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:Ie.type,onChange:s=>Da({...Ie,type:s.target.value}),className:"border border-slate-300 rounded px-3 py-2 text-sm flex-1",children:[e.jsx("option",{value:"all",children:"Todos os tipos"}),e.jsx("option",{value:"credit",children:"Crédito"}),e.jsx("option",{value:"debit",children:"Débito"}),e.jsx("option",{value:"blocked",children:"Bloqueado"})]}),e.jsx(i,{type:"text",placeholder:"Buscar motivo...",value:Ie.search,onChange:s=>Da({...Ie,search:s.target.value}),className:"border-slate-300 flex-1"})]})})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:_s.filter(s=>(Ie.type==="all"||s.type===Ie.type)&&(Ie.search===""||s.reason.toLowerCase().includes(Ie.search.toLowerCase()))).map(s=>e.jsxs("div",{className:"p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:s.reason}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(s.date).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:`font-bold text-right ${s.type==="credit"?"text-emerald-600":s.type==="debit"?"text-red-600":"text-yellow-600"}`,children:[s.type==="credit"?"+":s.type==="debit"?"-":"🔒"," R$ ",s.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[e.jsxs("div",{children:["Admin: ",e.jsx("span",{className:"font-semibold",children:s.admin})]}),e.jsxs("div",{children:["Saldo após: ",e.jsxs("span",{className:"font-semibold",children:["R$ ",s.balanceAfter.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]},s.id))}),e.jsx("div",{className:"flex gap-3 justify-end mt-4",children:e.jsx(G,{children:"Fechar"})})]})}),e.jsx(M,{open:Pt,onOpenChange:Qs,children:e.jsxs(V,{className:"max-w-2xl",children:[e.jsxs(B,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"h-5 w-5"}),"Redefinir Senha do Usuário"]}),e.jsxs(Z,{children:["Escolha o método para redefinir a senha de ",c.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(o,{onClick:()=>{Ps("email"),Zs("")},className:pe==="email"?"ring-2 ring-blue-600 bg-blue-50 text-slate-900 hover:bg-blue-100":"bg-slate-100 hover:bg-slate-200 text-slate-900",children:[e.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Por Email"]}),e.jsxs(o,{onClick:()=>Ps("link"),className:pe==="link"?"ring-2 ring-blue-600 bg-blue-50 text-slate-900 hover:bg-blue-100":"bg-slate-100 hover:bg-slate-200 text-slate-900",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),"Gerar Link"]}),e.jsxs(o,{onClick:()=>Ps("direct"),className:pe==="direct"?"ring-2 ring-blue-600 bg-blue-50 text-slate-900 hover:bg-blue-100":"bg-slate-100 hover:bg-slate-200 text-slate-900",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Redefinir Direto"]})]}),pe==="email"&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-slate-900 mb-2",children:"Um email será enviado para:"}),e.jsx("p",{className:"text-sm font-semibold text-blue-700",children:c.email}),e.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"O usuário terá 24 horas para completar a redefinição"})]}),pe==="link"&&e.jsx("div",{className:"space-y-2",children:Ys?e.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Link de Redefinição Gerado:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{value:Ys,readOnly:!0,className:"text-xs"}),e.jsx(o,{size:"sm",onClick:()=>Ja(Ys),variant:"outline",children:e.jsx(Us,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Este link expira em 24 horas"})]}):e.jsx("p",{className:"text-sm text-slate-600",children:'Clique em "Gerar Link" para criar um link de redefinição único'})}),pe==="direct"&&e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200",children:[e.jsx("p",{className:"text-sm text-slate-900 mb-2",children:"Uma nova senha será gerada automaticamente e compartilhada com você"}),e.jsx("p",{className:"text-xs text-amber-700 font-semibold mt-2",children:"⚠ Isso gera uma senha aleatória que será válida por 24 horas"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:pl,disabled:Ue,className:"bg-blue-600 hover:bg-blue-700",children:[Ue?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,Ue?"Processando...":pe==="link"?"Gerar Link":"Confirmar"]})]})]})}),e.jsx(M,{open:Ft,onOpenChange:sa,children:e.jsxs(V,{className:"max-w-2xl",children:[e.jsxs(B,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Configurar Autenticação em Dois Fatores"]}),e.jsx(Z,{children:"Siga os passos para ativar 2FA com seu autenticador"})]}),Rt?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Passo 3: Verificar Código"}),e.jsx("label",{className:"text-xs font-semibold text-slate-600 block mb-2 uppercase",children:"Digite o código de 6 dígitos do seu autenticador"}),e.jsx(i,{type:"text",placeholder:"000000",maxLength:"6",value:aa,onChange:s=>Ia(s.target.value.replace(/\D/g,"")),className:"text-center text-lg font-mono tracking-widest"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{onClick:()=>ta(!1),variant:"outline",className:"flex-1",children:"Voltar"}),e.jsxs(o,{onClick:jl,disabled:Ue,className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[Ue?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,Ue?"Verificando...":"Ativar 2FA"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Passo 1: Escaneie o código QR"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:Tt||"/placeholder.svg",alt:"QR Code",className:"h-48 w-48"})}),e.jsx("p",{className:"text-xs text-slate-600",children:"Use Google Authenticator, Microsoft Authenticator ou Authy"})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Passo 2: Chave Manual (se necessário)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{value:Ra,readOnly:!0,className:"font-mono text-xs"}),e.jsx(o,{size:"sm",onClick:()=>Ja(Ra),variant:"outline",children:e.jsx(Us,{className:"h-4 w-4"})})]})]}),e.jsx(o,{onClick:()=>ta(!0),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Próximo: Verificar Código"})]})]})}),e.jsx(M,{open:Ut,onOpenChange:Ma,children:e.jsxs(V,{className:"max-w-4xl max-h-96",children:[e.jsxs(B,{children:[e.jsx($,{children:"Logs Completos de Auditoria"}),e.jsx("div",{className:"space-y-2 mt-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("select",{value:Ts.action,onChange:s=>Va({...Ts,action:s.target.value}),className:"border border-slate-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todas as ações"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"logout",children:"Logout"}),e.jsx("option",{value:"password",children:"Redefinição de Senha"}),e.jsx("option",{value:"2fa",children:"2FA"}),e.jsx("option",{value:"dados",children:"Alteração de Dados"})]}),e.jsx(i,{type:"date",value:Ts.date,onChange:s=>Va({...Ts,date:s.target.value}),className:"border-slate-300"})]})})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Pe.map(s=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-3 hover:bg-slate-50 transition",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900 text-sm",children:s.action}),e.jsx("div",{className:"text-xs text-slate-600",children:new Date(s.date).toLocaleString("pt-BR")})]}),e.jsx(k,{variant:"outline",className:"text-xs",children:s.admin})]}),e.jsxs("div",{className:"text-xs text-slate-600 space-y-0.5",children:[e.jsxs("div",{children:["IP: ",s.ip]}),e.jsxs("div",{children:["Local: ",s.location]})]})]},s.id))}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(G,{children:"Fechar"}),e.jsx(o,{variant:"outline",size:"sm",children:"Exportar CSV"})]})]})}),e.jsx(M,{open:zt,onOpenChange:Ye,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar Ação de Segurança"}),e.jsx(Z,{children:Ba?.message})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(G,{children:"Cancelar"}),e.jsxs(ee,{onClick:()=>{Ba?.callback(),Ye(!1)},disabled:Ue,className:"bg-red-600 hover:bg-red-700",children:[Ue?e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirmar"]})]})]})})]})})}function ui({open:x,onClose:W,onUserCreated:J}){const[se,N]=t.useState(!1),[I,ae]=t.useState(1),[Ce,ne]=t.useState(null),b=t.useRef(null),{sidebarWidth:F}=Nt(),{toast:T}=ht(),[n,w]=t.useState({name:"",email:"",username:"",account_type:"empresas",role:"company_user",is_active:!0,plan:"free",cpf:"",birth_date:"",phone:"",whatsapp:"",cep:"",street:"",number:"",city:"",state:"",notes:"",permissions:[]}),[E,H]=t.useState({}),q={Projetos:[{id:"view_projects",label:"Visualizar Projetos"},{id:"create_projects",label:"Criar Projetos"},{id:"edit_projects",label:"Editar Projetos"},{id:"cancel_projects",label:"Cancelar Projetos"}],Usuários:[{id:"manage_users",label:"Gerenciar Usuários"}],Financeiro:[{id:"view_payments",label:"Visualizar Pagamentos"},{id:"manage_payments",label:"Gerenciar Pagamentos"}],Relatórios:[{id:"view_analytics",label:"Visualizar Análises"}],Sistema:[{id:"admin_access",label:"Acesso Admin"}]},[le,oe]=t.useState({left:"240px",width:"calc(100vw - 240px)"});t.useEffect(()=>{const d=()=>{const ie=typeof F=="number"?F:parseInt(F)||240;oe({left:`${ie}px`,width:`calc(100vw - ${ie}px)`})};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[F]),t.useEffect(()=>{x||N(!1)},[x]);const ke=()=>{N(!0),setTimeout(()=>{W(),ae(1),w({name:"",email:"",username:"",account_type:"empresas",role:"company_user",is_active:!0,plan:"free",cpf:"",birth_date:"",phone:"",whatsapp:"",cep:"",street:"",number:"",city:"",state:"",notes:"",permissions:[]}),ne(null),H({})},500)},ce=()=>{const d={};return n.name.trim()||(d.name="Nome é obrigatório"),n.email.trim()||(d.email="Email é obrigatório"),n.username.trim()||(d.username="Username é obrigatório"),n.account_type||(d.account_type="Tipo de usuário é obrigatório"),H(d),Object.keys(d).length===0},h=()=>{I===1&&!ce()||ae(I+1)},X=()=>{ae(I-1)},as=d=>{const ie=d.target.files?.[0];if(ie){const K=new FileReader;K.onload=Ee=>{ne(Ee.target?.result)},K.readAsDataURL(ie)}},Te=async()=>{console.log("[v0] Criando novo usuário:",n);const d={id:Math.floor(Math.random()*1e4)+100,...n,account_sub_type:"in-house",company_id:1,online_status:"offline",last_login:new Date().toISOString(),created_at:new Date().toISOString().split("T")[0],updated_at:new Date().toISOString().split("T")[0]};J&&J(d),T({title:"Sucesso",description:"Usuário criado com sucesso. Convite enviado por e-mail."}),ke()},ts=d=>{w({...n,permissions:n.permissions.includes(d)?n.permissions.filter(ie=>ie!==d):[...n.permissions,d]})};return!x&&!se?null:e.jsx(e.Fragment,{children:e.jsxs("div",{className:gt("fixed top-0 z-40 h-screen","bg-background overflow-hidden flex flex-col","transition-all duration-500 ease-in-out",se?"slide-out-to-right opacity-0":"slide-in-from-right opacity-100"),style:{left:le.left,width:le.width,display:x&&!se?"flex":"none"},children:[e.jsx(vt,{title:"Criar Novo Usuário",left:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ga,{className:"h-12 w-12 border-2 border-blue-300/50",children:e.jsx(ja,{className:"bg-gradient-to-br from-blue-500 to-cyan-400 text-white",children:n.name?n.name.charAt(0).toUpperCase():"N"})}),e.jsx("button",{onClick:()=>b.current?.click(),className:"absolute -bottom-1 -right-1 bg-blue-600 hover:bg-blue-700 rounded-full p-1.5 text-white transition-colors border border-blue-950",type:"button",children:e.jsx(ft,{className:"h-3 w-3"})}),e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:as,className:"hidden"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-blue-200",children:["Etapa ",I," de 3"]})})]}),right:e.jsx(o,{onClick:ke,size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:e.jsx(ba,{className:"h-4 w-4"})})}),e.jsx(ut,{className:"flex-1 min-h-0 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-6",children:[I===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Nome Completo *"}),e.jsx(i,{placeholder:"Ex: João Silva",value:n.name,onChange:d=>w({...n,name:d.target.value}),className:E.name?"border-red-500":""}),E.name&&e.jsx("p",{className:"text-xs text-red-500",children:E.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Email *"}),e.jsx(i,{type:"email",placeholder:"Ex: joao@empresa.com",value:n.email,onChange:d=>w({...n,email:d.target.value}),className:E.email?"border-red-500":""}),E.email&&e.jsx("p",{className:"text-xs text-red-500",children:E.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Username / Login *"}),e.jsx(i,{placeholder:"Ex: joao.silva",value:n.username,onChange:d=>w({...n,username:d.target.value}),className:E.username?"border-red-500":""}),E.username&&e.jsx("p",{className:"text-xs text-red-500",children:E.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Tipo de Usuário *"}),e.jsxs(ge,{value:n.account_type,onValueChange:d=>w({...n,account_type:d}),children:[e.jsx(je,{children:e.jsx(ve,{})}),e.jsxs(fe,{children:[e.jsx(f,{value:"empresas",children:"Empresas"}),e.jsx(f,{value:"agencias",children:"Agências"}),e.jsx(f,{value:"nomades",children:"Nômades"}),e.jsx(f,{value:"admin",children:"Admin"})]})]}),E.account_type&&e.jsx("p",{className:"text-xs text-red-500",children:E.account_type})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Status da Conta *"}),e.jsxs(ge,{value:n.is_active?"ativo":"inativo",onValueChange:d=>w({...n,is_active:d==="ativo"}),children:[e.jsx(je,{children:e.jsx(ve,{})}),e.jsxs(fe,{children:[e.jsx(f,{value:"ativo",children:"Ativo"}),e.jsx(f,{value:"inativo",children:"Inativo"}),e.jsx(f,{value:"pausado",children:"Pausado"}),e.jsx(f,{value:"suspenso",children:"Suspenso"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Nível / Plano *"}),e.jsxs(ge,{value:n.plan,onValueChange:d=>w({...n,plan:d}),children:[e.jsx(je,{children:e.jsx(ve,{})}),e.jsxs(fe,{children:[e.jsx(f,{value:"free",children:"Free"}),e.jsx(f,{value:"premium",children:"Premium"}),e.jsx(f,{value:"vip",children:"VIP"})]})]})]})]})]}),I===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Dados Pessoais"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"CPF"}),e.jsx(i,{placeholder:"XXX.XXX.XXX-XX",value:n.cpf,onChange:d=>w({...n,cpf:d.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Data de Nascimento"}),e.jsx(i,{type:"date",value:n.birth_date,onChange:d=>w({...n,birth_date:d.target.value})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Contato"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Telefone"}),e.jsx(i,{placeholder:"(11) 98765-4321",value:n.phone,onChange:d=>w({...n,phone:d.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"WhatsApp"}),e.jsx(i,{placeholder:"(11) 98765-4321",value:n.whatsapp,onChange:d=>w({...n,whatsapp:d.target.value})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Endereço"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"CEP"}),e.jsx(i,{placeholder:"01310-100",value:n.cep,onChange:d=>w({...n,cep:d.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Rua"}),e.jsx(i,{placeholder:"Ex: Rua das Flores",value:n.street,onChange:d=>w({...n,street:d.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Número"}),e.jsx(i,{placeholder:"123",value:n.number,onChange:d=>w({...n,number:d.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Cidade"}),e.jsx(i,{placeholder:"São Paulo",value:n.city,onChange:d=>w({...n,city:d.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Estado"}),e.jsx(i,{placeholder:"SP",maxLength:2,value:n.state,onChange:d=>w({...n,state:d.target.value.toUpperCase()})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Informações Adicionais"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Observações"}),e.jsx(jt,{placeholder:"Notas sobre o usuário...",value:n.notes,onChange:d=>w({...n,notes:d.target.value}),className:"h-24"})]})]})]}),I===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Selecione as permissões para este usuário"}),Object.entries(q).map(([d,ie])=>e.jsxs(Je,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-sm mb-3",children:d}),e.jsx("div",{className:"space-y-2",children:ie.map(K=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:K.id,checked:n.permissions.includes(K.id),onChange:()=>ts(K.id),className:"rounded"}),e.jsx("label",{htmlFor:K.id,className:"text-sm cursor-pointer",children:K.label})]},K.id))})]},d))]})]})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-slate-200 bg-slate-50 p-4 flex items-center justify-between",children:[e.jsxs(o,{variant:"outline",onClick:X,disabled:I===1,className:I===1?"invisible":"",children:[e.jsx(ua,{className:"h-4 w-4 mr-1"}),"Voltar"]}),I<3?e.jsxs(o,{onClick:h,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:["Próximo",e.jsx(pa,{className:"h-4 w-4 ml-1"})]}):e.jsxs(o,{onClick:Te,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[e.jsx(va,{className:"h-4 w-4 mr-1"}),"Criar Usuário"]})]})]})})}const mt=[{id:1,email:"carlos.silva@techcorp.com",name:"Carlos Silva",phone:"+55 11 98765-4321",account_type:"company",account_sub_type:"in-house",company_id:1,role:"company_admin",permissions:["view_projects","create_projects","manage_users"],is_admin:!0,is_active:!0,created_at:"2023-06-15",updated_at:"2024-01-20",online_status:"online",last_login:"2024-01-22T14:30:00",bitrix_id:"12345",asaas_id:"67890"},{id:2,email:"ana.santos@allka.com",name:"Ana Santos",phone:"+55 21 99876-5432",account_type:"nomad",account_sub_type:null,role:"nomad",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2023-07-01",updated_at:"2024-01-15",online_status:"offline",last_login:"2024-01-21T09:15:00"},{id:3,email:"joao.costa@partner.com",name:"João Costa",phone:"+55 11 97654-3210",account_type:"agency",account_sub_type:null,agency_id:1,role:"agency_admin",permissions:["view_projects","create_projects"],is_admin:!1,is_active:!1,created_at:"2023-08-10",updated_at:"2024-01-10",online_status:"offline",last_login:"2024-01-10T16:45:00"},{id:4,email:"maria.oliveira@empresa.com",name:"Maria Oliveira",phone:"+55 85 98123-4567",account_type:"company",account_sub_type:"company",company_id:2,role:"company_user",permissions:["view_projects","view_catalog"],is_admin:!1,is_active:!0,created_at:"2023-09-05",updated_at:"2024-01-18",online_status:"busy",last_login:"2024-01-22T11:20:00"},{id:5,email:"pedro.santos@allka.com",name:"Pedro Santos",phone:"+55 11 96543-2109",account_type:"nomad",account_sub_type:null,role:"nomad",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2023-10-12",updated_at:"2024-01-22",online_status:"away",last_login:"2024-01-22T08:00:00"},{id:6,email:"lucas.ferreira@techcorp.com",name:"Lucas Ferreira",phone:"+55 31 99999-8888",account_type:"company",account_sub_type:"in-house",company_id:1,role:"company_user",permissions:["view_projects","view_catalog"],is_admin:!1,is_active:!0,created_at:"2023-11-03",updated_at:"2024-01-21",online_status:"online",last_login:"2024-01-22T13:45:00"},{id:7,email:"juliana.rocha@allka.com",name:"Juliana Rocha",phone:"+55 47 97777-6666",account_type:"nomad",account_sub_type:null,role:"nomad",permissions:["view_projects"],is_admin:!1,is_active:!1,created_at:"2023-12-01",updated_at:"2024-01-15",online_status:"offline",last_login:"2024-01-19T10:30:00"},{id:8,email:"rafael.souza@partner.com",name:"Rafael Souza",phone:"+55 62 98765-4321",account_type:"agency",account_sub_type:null,agency_id:2,role:"agency_admin",permissions:["view_projects","create_projects","manage_users"],is_admin:!1,is_active:!0,created_at:"2024-01-05",updated_at:"2024-01-22",online_status:"online",last_login:"2024-01-22T15:20:00"},{id:9,email:"camila.silva@empresa.com",name:"Camila Silva",phone:"+55 75 96543-2109",account_type:"company",account_sub_type:"company",company_id:3,role:"company_user",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-08",updated_at:"2024-01-22",online_status:"busy",last_login:"2024-01-22T12:00:00"},{id:10,email:"diego.costa@techcorp.com",name:"Diego Costa",phone:"+55 11 95432-1098",account_type:"company",account_sub_type:"in-house",company_id:1,role:"company_admin",permissions:["view_projects","create_projects","manage_users"],is_admin:!0,is_active:!0,created_at:"2024-01-10",updated_at:"2024-01-22",online_status:"online",last_login:"2024-01-22T16:30:00"},{id:11,email:"beatriz.gomes@allka.com",name:"Beatriz Gomes",phone:"+55 21 94321-0987",account_type:"nomad",account_sub_type:null,role:"nomad",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-12",updated_at:"2024-01-21",online_status:"away",last_login:"2024-01-21T14:15:00"},{id:12,email:"gustavo.alves@partner.com",name:"Gustavo Alves",phone:"+55 85 93210-9876",account_type:"agency",account_sub_type:null,agency_id:1,role:"agency_user",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-14",updated_at:"2024-01-22",online_status:"online",last_login:"2024-01-22T11:45:00"},{id:13,email:"fernanda.dias@empresa.com",name:"Fernanda Dias",phone:"+55 11 92109-8765",account_type:"company",account_sub_type:"company",company_id:2,role:"company_user",permissions:["view_projects","view_catalog"],is_admin:!1,is_active:!1,created_at:"2024-01-15",updated_at:"2024-01-18",online_status:"offline",last_login:"2024-01-18T09:00:00"},{id:14,email:"marcus.pinto@techcorp.com",name:"Marcus Pinto",phone:"+55 81 91098-7654",account_type:"company",account_sub_type:"in-house",company_id:1,role:"company_user",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-16",updated_at:"2024-01-22",online_status:"online",last_login:"2024-01-22T10:00:00"},{id:15,email:"isabela.santos@allka.com",name:"Isabela Santos",phone:"+55 48 90987-6543",account_type:"nomad",account_sub_type:null,role:"nomad",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-17",updated_at:"2024-01-22",online_status:"away",last_login:"2024-01-22T07:30:00"},{id:16,email:"tiago.mendes@partner.com",name:"Tiago Mendes",phone:"+55 11 88765-4321",account_type:"agency",account_sub_type:null,agency_id:2,role:"agency_user",permissions:["view_projects","create_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-18",updated_at:"2024-01-22",online_status:"busy",last_login:"2024-01-22T14:20:00"},{id:17,email:"vitoria.cardoso@empresa.com",name:"Vitória Cardoso",phone:"+55 71 87654-3210",account_type:"company",account_sub_type:"company",company_id:3,role:"company_user",permissions:["view_projects"],is_admin:!1,is_active:!0,created_at:"2024-01-19",updated_at:"2024-01-22",online_status:"online",last_login:"2024-01-22T13:00:00"},{id:18,email:"anderson.cruz@techcorp.com",name:"Anderson Cruz",phone:"+55 27 86543-2109",account_type:"company",account_sub_type:"in-house",company_id:1,role:"company_user",permissions:["view_projects","view_catalog"],is_admin:!1,is_active:!0,created_at:"2024-01-20",updated_at:"2024-01-22",online_status:"away",last_login:"2024-01-22T09:45:00"},{id:19,email:"patricia.moura@allka.com",name:"Patrícia Moura",phone:"+55 41 85432-1098",account_type:"nomad",account_sub_type:null,role:"nomad",permissions:["view_projects"],is_admin:!1,is_active:!1,created_at:"2024-01-21",updated_at:"2024-01-21",online_status:"offline",last_login:"2024-01-21T15:30:00"},{id:20,email:"rodolfo.oliveira@partner.com",name:"Rodolfo Oliveira",phone:"+55 51 84321-0987",account_type:"agency",account_sub_type:null,agency_id:1,role:"agency_admin",permissions:["view_projects","create_projects","manage_users"],is_admin:!1,is_active:!0,created_at:"2024-01-22",updated_at:"2024-01-22",online_status:"online",last_login:"2024-01-22T17:00:00"}];function $i(){const[x,W]=t.useState([]),[J,se]=t.useState([]),[N,I]=t.useState(null),[ae,Ce]=t.useState(!1),[ne,b]=t.useState(!1),[F,T]=t.useState(!1),[n,w]=t.useState(!1),[E,H]=t.useState(""),[q,le]=t.useState(""),[oe,ke]=t.useState(""),[ce,h]=t.useState("all"),[X,as]=t.useState("all"),[Te]=t.useState(1),[ts,d]=t.useState(!1),[ie,K]=t.useState(!1),[Ee,yt]=t.useState(!1),[Ms,$e]=t.useState(!1),[Ge,Se]=t.useState([]),[ls,me]=t.useState(""),[O,Oe]=t.useState(!1),[C,xe]=t.useState(null),[ys,he]=t.useState(!1),[L,y]=t.useState(!1),[Vs,is]=t.useState(!1),[ws,Re]=t.useState(!1),[Bs,rs]=t.useState(!1),[l,S]=t.useState({name:"",email:"",cpf:"",phone:"",whatsapp:"",hasWhatsapp:"all",accountTypes:[],roles:[],statuses:[],registrationDateFrom:"",registrationDateTo:"",lastAccessDateFrom:"",lastAccessDateTo:"",lastUpdateDateFrom:"",lastUpdateDateTo:"",minScore:"",maxScore:"",userLevel:"all",rating:"all",hasCompany:"all",hasSpecialPermissions:"all",hasActiveWallet:"all",minBalance:"",maxBalance:"",hasFinancialActions:"all",profile:"all",plan:"all"}),[U,de]=t.useState(1),[qe,$s]=t.useState(10),[Gs,fa]=t.useState([]);t.useEffect(()=>{W(mt),se(mt),de(1)},[]),t.useEffect(()=>{const a=x.filter(r=>{if(oe&&!r.name.toLowerCase().includes(oe.toLowerCase())&&!r.email.toLowerCase().includes(oe.toLowerCase())||ce!=="all"&&(ce==="active"&&!r.is_active||ce==="inactive"&&r.is_active)||X!=="all"&&(X==="company_admin"&&r.role!=="company_admin"||X==="company_user"&&r.role!=="company_user"||X==="agency_admin"&&r.role!=="agency_admin"||X==="agency_user"&&r.role!=="agency_user"||X==="nomad"&&r.role!=="nomad"||X==="admin"&&r.role!=="admin"||X==="financial"&&r.role!=="financial"||X==="team_allka"&&r.role!=="team_allka"||X==="partner"&&r.role!=="partner"))return!1;if(l.registrationDateFrom){const j=new Date(r.created_at),v=new Date(l.registrationDateFrom);if(j<v)return!1}if(l.registrationDateTo){const j=new Date(r.created_at),v=new Date(l.registrationDateTo);if(v.setHours(23,59,59,999),j>v)return!1}if(l.lastAccessDateFrom&&r.last_login){const j=new Date(r.last_login),v=new Date(l.lastAccessDateFrom);if(j<v)return!1}if(l.lastAccessDateTo&&r.last_login){const j=new Date(r.last_login),v=new Date(l.lastAccessDateTo);if(v.setHours(23,59,59,999),j>v)return!1}return!(l.plan!=="all"&&(r.account_type==="company"||r.account_type==="empresas"?"premium":"free")!==l.plan)});se(a),de(1)},[x,oe,ce,X,l]),t.useEffect(()=>{const a=(U-1)*qe,r=a+qe;fa(J.slice(a,r))},[J,U,qe]);const ue=Math.ceil(J.length/qe),qs=()=>{const a=[],j=Math.floor(2.5);if(ue<=5)for(let v=1;v<=ue;v++)a.push(v);else if(U<=j+1){for(let v=1;v<=5;v++)a.push(v);ue>5&&a.push("...")}else if(U>=ue-j){a.push("...");for(let v=ue-5+1;v<=ue;v++)a.push(v)}else{a.push("...");for(let v=U-j;v<=U+j;v++)a.push(v);a.push("...")}return a};oe||ce!=="all"||X!=="all"||l.registrationDateFrom||l.registrationDateTo||l.lastAccessDateFrom||l.lastAccessDateTo||l.plan;const Cs=(a,r)=>{switch(I(a),r){case"view":Ce(!0);break;case"block":b(!0);break;case"delete":H(""),le(""),T(!0);break}},Na=async()=>{if(N){if(!E.trim()){le("O motivo da exclusão é obrigatório");return}if(E.trim().length<10){le("O motivo deve ter no mínimo 10 caracteres");return}if(N.id===Te){console.error("[v0] Cannot delete current logged-in user");return}if(N.is_admin&&N.role==="admin"){console.error("[v0] Cannot delete main admin account");return}w(!0);try{await new Promise(r=>setTimeout(r,1e3));const a=x.filter(r=>r.id!==N.id);W(a),console.log("[v0] User deleted successfully:",{userId:N.id,userName:N.name,userEmail:N.email,deletionReason:E.trim(),deletedBy:Te,timestamp:new Date().toISOString()}),T(!1),I(null),H(""),le("")}catch(a){console.error("[v0] Error deleting user:",a),le("Erro ao excluir usuário. Tente novamente.")}finally{w(!1)}}},ya=a=>{const r=a.replace(/\D/g,"");window.open(`tel:${r}`,"_self")},wa=a=>{const r=a.replace(/\D/g,"");window.open(`https://wa.me/${r}`,"_blank")},_e=a=>{switch(a){case"company_admin":return"Admin Empresa";case"company_user":return"Usuário Empresa";case"agency_admin":return"Admin Agência";case"agency_user":return"Usuário Agência";case"nomad":return"Nômade";case"admin":return"Administrador";case"financial":return"Financial";case"team_allka":return"Team allka";case"partner":return"Partner";default:return a}},He=a=>{switch(a){case"online":return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 ring-2 ring-white dark:ring-gray-900"}),e.jsx("div",{className:"absolute inset-0 h-3 w-3 rounded-full bg-green-500 animate-ping opacity-75"})]});case"offline":return e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-400 ring-2 ring-white dark:ring-gray-900"});case"busy":return e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500 ring-2 ring-white dark:ring-gray-900"});case"away":return e.jsx("div",{className:"h-3 w-3 rounded-full bg-yellow-500 ring-2 ring-white dark:ring-gray-900"});default:return e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-400 ring-2 ring-white dark:ring-gray-900"})}},Ws=(a,r)=>{if(!N)return;console.log("[v0] Status change confirmed:",{userId:N.id,userName:N.name,currentStatus:N.is_active,newStatus:!N.is_active,reason:a,duration:"indefinite"});const j=x.map(v=>v.id===N.id?{...v,is_active:!v.is_active,updated_at:new Date().toISOString()}:v);console.log("[v0] Updated users array:",j.find(v=>v.id===N.id)),W(j),I({...N,is_active:!N.is_active}),b(!1),console.log("[v0] Status change completed successfully")},ns=(a,r)=>{const j=String(a).toLowerCase();return j==="company"||j==="empresas"?{label:"Company",color:"bg-purple-100 text-purple-800 dark:bg-purple-950 dark:to-purple-900"}:j==="agency"||j==="agencias"?{label:"Agency",color:"bg-orange-100 text-orange-800 dark:bg-orange-950 dark:to-orange-900"}:j==="nomad"||j==="nomades"?{label:"Nomad",color:"bg-blue-100 text-blue-800 dark:bg-blue-950 dark:to-blue-900"}:r==="financial"?{label:"Financial",color:"bg-orange-100 text-orange-800 dark:bg-orange-950 dark:to-orange-900"}:r==="team_allka"?{label:"Team allka",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-950 dark:to-indigo-900"}:{label:"Outro",color:"bg-gray-100 text-gray-800 dark:bg-gray-950 dark:to-gray-900"}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Yl,{title:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Gestão de Usuários"}),description:"Gerencie todos os usuários da plataforma"}),e.jsxs(o,{onClick:()=>rs(!0),className:"h-9 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),"Adicionar Usuário"]})]}),e.jsx(Ve,{type:"single",collapsible:!0,className:"mb-0",children:e.jsxs(A,{value:"stats",className:"border-none",children:[e.jsx(D,{className:"bg-slate-50 hover:bg-slate-100 dark:bg-slate-900/30 dark:hover:bg-slate-900/50 rounded-lg px-3 py-2 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-300",children:"Estatísticas e Métricas"})]})}),e.jsx(P,{className:"pt-3",children:e.jsxs("div",{className:"grid gap-2 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Je,{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(at,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-900",children:"Total de Usuários"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:x.length})]}),e.jsxs(Je,{className:"p-3 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ls,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-900",children:"Usuários Ativos"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:x.filter(a=>a.is_active).length})]}),e.jsxs(Je,{className:"p-3 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(zs,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-purple-900",children:"Administradores"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:x.filter(a=>a.is_admin).length})]}),e.jsxs(Je,{className:"p-3 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(pt,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-xs font-medium text-orange-900",children:"Ativos 90 dias"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:x.filter(a=>{const r=new Date(a.last_login||Date.now()),j=new Date;return j.setDate(j.getDate()-90),r>=j}).length})]})]})})]})}),e.jsx(Je,{className:"border border-slate-200/60 dark:border-slate-700/60 shadow-sm hover:shadow-md transition-shadow",children:e.jsx(Bl,{className:"pt-4 pb-4 px-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 h-10",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative",children:[e.jsx($l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(i,{placeholder:"Buscar por nome ou email...",value:oe,onChange:a=>ke(a.target.value),className:"pl-10 h-10 text-sm rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700"})]})}),e.jsx(lt,{value:qe.toString(),onValueChange:a=>{$s(Number(a)),de(1)},variant:"top"}),e.jsxs(o,{onClick:()=>$e(!0),variant:"outline",size:"sm",className:"h-9 gap-2 px-3 text-xs text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700",children:[e.jsx(da,{className:"h-4 w-4"}),"Filtros"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>de(Math.max(1,U-1)),disabled:U===1,className:"h-9 w-8 p-0",children:e.jsx(ua,{className:"h-3.5 w-3.5"})}),e.jsx("div",{className:"flex items-center gap-0.5",children:qs().map((a,r)=>e.jsx("div",{children:a==="..."?e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 px-1.5",children:"..."}):e.jsx(o,{onClick:()=>de(Number(a)),variant:a===U?"default":"outline",size:"sm",className:`h-9 w-8 p-0 text-xs font-semibold ${a===U?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600 dark:border-blue-600":"text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700"}`,children:a})},r))}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>de(Math.min(ue,U+1)),disabled:U===ue,className:"h-9 w-8 p-0",children:e.jsx(pa,{className:"h-3.5 w-3.5"})})]})]}),Ms&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:()=>{L&&!window.confirm("Você tem alterações não salvas. Deseja sair?")||($e(!1),xe(null),he(!1),y(!1))}}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-5xl mx-4 max-h-[85vh] border border-slate-200 dark:border-slate-700 animate-in fade-in zoom-in duration-300 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-8 py-5 border-b border-slate-200 dark:border-slate-700 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Filtros Avançados de Usuários"}),e.jsxs("p",{className:"text-xs text-blue-100 mt-0.5",children:[C&&!ys?"Filtro carregado":ys?"Editando filtro":"Configure filtros detalhados",L&&" • Alterações não salvas"]})]}),e.jsx("button",{onClick:()=>{L&&!window.confirm("Você tem alterações não salvas. Deseja sair?")||($e(!1),xe(null),he(!1),y(!1))},className:"text-white hover:bg-white/20 rounded-lg p-1.5 transition-colors flex-shrink-0",children:e.jsx(ba,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-slate-200 dark:border-slate-700 p-5 overflow-y-auto flex-shrink-0 bg-slate-50/30 dark:bg-slate-900/20",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),"Filtros Salvos"]}),Ge.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-slate-300 dark:text-slate-600 mb-3",children:e.jsx(da,{className:"h-8 w-8 mx-auto opacity-40"})}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Você ainda não possui filtros salvos"})]}):e.jsx("div",{className:"space-y-2",children:Ge.map(a=>e.jsxs("div",{className:`p-3 rounded-lg border transition-all group cursor-pointer ${C===a.id?"bg-blue-50 dark:bg-blue-950/30 border-blue-300 dark:border-blue-700":"bg-white dark:bg-slate-700/40 hover:bg-blue-50 dark:hover:bg-slate-700/60 border-slate-200 dark:border-slate-600/50"}`,children:[e.jsx("div",{className:"flex items-center justify-between gap-2 mb-2",children:e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate flex-1",children:a.name})}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{S(a.filters),xe(a.id),he(!1),y(!1)},className:"flex-1 px-2 py-1.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",title:"Carregar",children:"Carregar"}),e.jsx("button",{onClick:()=>{S(a.filters),xe(null),he(!1),Re(!0),me(`${a.name} (Cópia)`),Oe(!0)},className:"p-1.5 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 transition-colors",title:"Duplicar",children:e.jsx(Us,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{Se(Ge.filter(r=>r.id!==a.id)),C===a.id&&(xe(null),he(!1))},className:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors",title:"Excluir",children:e.jsx(vs,{className:"h-4 w-4"})})]})]},a.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32",children:e.jsxs(Ve,{type:"multiple",defaultValue:["identificacao","tipo-funcao"],className:"space-y-3",children:[e.jsxs(A,{value:"identificacao",className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"bg-slate-50 dark:bg-slate-700/40 hover:bg-slate-100 dark:hover:bg-slate-700/60 px-4 py-3 transition-colors",children:e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Identificação"})}),e.jsxs(P,{className:"p-4 space-y-3 bg-white dark:bg-slate-800/50",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(i,{placeholder:"Nome",value:l.name,onChange:a=>{S({...l,name:a.target.value}),C&&y(!0)},className:"h-8 text-sm"}),e.jsx(i,{placeholder:"E-mail",value:l.email,onChange:a=>{S({...l,email:a.target.value}),C&&y(!0)},className:"h-8 text-sm"}),e.jsx(i,{placeholder:"CPF",value:l.cpf,onChange:a=>{S({...l,cpf:a.target.value}),C&&y(!0)},className:"h-8 text-sm"}),e.jsx(i,{placeholder:"Telefone",value:l.phone,onChange:a=>{S({...l,phone:a.target.value}),C&&y(!0)},className:"h-8 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 items-end",children:[e.jsx(i,{placeholder:"WhatsApp",value:l.whatsapp,onChange:a=>{S({...l,whatsapp:a.target.value}),C&&y(!0)},className:"h-8 text-sm"}),e.jsxs(ge,{value:l.hasWhatsapp,onValueChange:a=>{S({...l,hasWhatsapp:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Com WhatsApp?"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todos"}),e.jsx(f,{value:"yes",children:"Sim"}),e.jsx(f,{value:"no",children:"Não"})]})]})]})]})]}),e.jsxs(A,{value:"tipo-funcao",className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"bg-slate-50 dark:bg-slate-700/40 hover:bg-slate-100 dark:hover:bg-slate-700/60 px-4 py-3 transition-colors",children:e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Tipo e Função"})}),e.jsxs(P,{className:"p-4 space-y-3 bg-white dark:bg-slate-800/50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Tipo de Conta"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["company","nomad","agency"].map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.accountTypes.includes(a),onChange:r=>{S({...l,accountTypes:r.target.checked?[...l.accountTypes,a]:l.accountTypes.filter(j=>j!==a)}),C&&y(!0)},className:"rounded border-slate-300 dark:border-slate-600"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 capitalize",children:a})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Função"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","user"].map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.roles.includes(a),onChange:r=>{S({...l,roles:r.target.checked?[...l.roles,a]:l.roles.filter(j=>j!==a)}),C&&y(!0)},className:"rounded border-slate-300 dark:border-slate-600"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 capitalize",children:a})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["active","inactive","blocked"].map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.statuses.includes(a),onChange:r=>{S({...l,statuses:r.target.checked?[...l.statuses,a]:l.statuses.filter(j=>j!==a)}),C&&y(!0)},className:"rounded border-slate-300 dark:border-slate-600"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:a==="active"?"Ativo":a==="inactive"?"Inativo":"Bloqueado"})]},a))})]})]})]}),e.jsxs(A,{value:"datas",className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"bg-slate-50 dark:bg-slate-700/40 hover:bg-slate-100 dark:hover:bg-slate-700/60 px-4 py-3 transition-colors",children:e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Período de Datas"})}),e.jsxs(P,{className:"p-4 space-y-3 bg-white dark:bg-slate-800/50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Data de Cadastro"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"date",value:l.registrationDateFrom,onChange:a=>{S({...l,registrationDateFrom:a.target.value}),C&&y(!0)},className:"h-8 text-sm flex-1"}),e.jsx(i,{type:"date",value:l.registrationDateTo,onChange:a=>{S({...l,registrationDateTo:a.target.value}),C&&y(!0)},className:"h-8 text-sm flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Último Acesso"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"date",value:l.lastAccessDateFrom,onChange:a=>{S({...l,lastAccessDateFrom:a.target.value}),C&&y(!0)},className:"h-8 text-sm flex-1"}),e.jsx(i,{type:"date",value:l.lastAccessDateTo,onChange:a=>{S({...l,lastAccessDateTo:a.target.value}),C&&y(!0)},className:"h-8 text-sm flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Última Atualização"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"date",value:l.lastUpdateDateFrom,onChange:a=>{S({...l,lastUpdateDateFrom:a.target.value}),C&&y(!0)},className:"h-8 text-sm flex-1"}),e.jsx(i,{type:"date",value:l.lastUpdateDateTo,onChange:a=>{S({...l,lastUpdateDateTo:a.target.value}),C&&y(!0)},className:"h-8 text-sm flex-1"})]})]})]})]}),e.jsxs(A,{value:"metricas",className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"bg-slate-50 dark:bg-slate-700/40 hover:bg-slate-100 dark:hover:bg-slate-700/60 px-4 py-3 transition-colors",children:e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Métricas e Pontuação"})}),e.jsxs(P,{className:"p-4 space-y-3 bg-white dark:bg-slate-800/50",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(i,{placeholder:"Pontuação Mínima",type:"number",value:l.minScore,onChange:a=>{S({...l,minScore:a.target.value}),C&&y(!0)},className:"h-8 text-sm"}),e.jsx(i,{placeholder:"Pontuação Máxima",type:"number",value:l.maxScore,onChange:a=>{S({...l,maxScore:a.target.value}),C&&y(!0)},className:"h-8 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ge,{value:l.userLevel,onValueChange:a=>{S({...l,userLevel:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Nível"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todos"}),e.jsx(f,{value:"iniciante",children:"Iniciante"}),e.jsx(f,{value:"intermediario",children:"Intermediário"}),e.jsx(f,{value:"avancado",children:"Avançado"})]})]}),e.jsxs(ge,{value:l.rating,onValueChange:a=>{S({...l,rating:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Avaliação"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todas"}),e.jsx(f,{value:"5",children:"5 Estrelas"}),e.jsx(f,{value:"4",children:"4+ Estrelas"}),e.jsx(f,{value:"3",children:"3+ Estrelas"})]})]})]})]})]}),e.jsxs(A,{value:"complementares",className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[e.jsx(D,{className:"bg-slate-50 dark:bg-slate-700/40 hover:bg-slate-100 dark:hover:bg-slate-700/60 px-4 py-3 transition-colors",children:e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Dados Complementares"})}),e.jsxs(P,{className:"p-4 space-y-3 bg-white dark:bg-slate-800/50",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ge,{value:l.hasCompany,onValueChange:a=>{S({...l,hasCompany:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Empresa?"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todos"}),e.jsx(f,{value:"yes",children:"Sim"}),e.jsx(f,{value:"no",children:"Não"})]})]}),e.jsxs(ge,{value:l.hasSpecialPermissions,onValueChange:a=>{S({...l,hasSpecialPermissions:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Perms especiais?"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todos"}),e.jsx(f,{value:"yes",children:"Sim"}),e.jsx(f,{value:"no",children:"Não"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ge,{value:l.hasActiveWallet,onValueChange:a=>{S({...l,hasActiveWallet:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Carteira?"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todos"}),e.jsx(f,{value:"yes",children:"Sim"}),e.jsx(f,{value:"no",children:"Não"})]})]}),e.jsxs(ge,{value:l.hasFinancialActions,onValueChange:a=>{S({...l,hasFinancialActions:a}),C&&y(!0)},children:[e.jsx(je,{className:"h-8 text-sm",children:e.jsx(ve,{placeholder:"Ações financeiras?"})}),e.jsxs(fe,{children:[e.jsx(f,{value:"all",children:"Todos"}),e.jsx(f,{value:"yes",children:"Sim"}),e.jsx(f,{value:"no",children:"Não"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(i,{placeholder:"Saldo Mínimo",type:"number",value:l.minBalance,onChange:a=>{S({...l,minBalance:a.target.value}),C&&y(!0)},className:"h-8 text-sm"}),e.jsx(i,{placeholder:"Saldo Máximo",type:"number",value:l.maxBalance,onChange:a=>{S({...l,maxBalance:a.target.value}),C&&y(!0)},className:"h-8 text-sm"})]})]})]})]})})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex flex-col gap-4 p-6 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 rounded-b-2xl",children:[e.jsxs("div",{className:"space-y-3 pb-2",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800/30 hover:bg-blue-100 dark:hover:bg-blue-950/30 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:a=>Oe(a.target.checked),className:"rounded border-blue-300 dark:border-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Salvar este filtro como favorito"})]}),O&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 block mb-2",children:"Nome do Filtro *"}),e.jsx(i,{placeholder:ws?"Ex: Nomads Ativos (Cópia)":"Ex: Nomads Ativos com Pontuaç����o Alta",value:ls,onChange:a=>me(a.target.value),className:"h-8 text-sm rounded-lg bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(o,{onClick:()=>{L&&!window.confirm("Você tem alterações não salvas. Deseja descartar?")||($e(!1),xe(null),he(!1),y(!1),Oe(!1),me(""),Re(!1))},variant:"outline",size:"sm",className:"px-4 py-2 text-sm rounded-lg",children:"Cancelar"}),e.jsx(o,{onClick:()=>{if(O){if(!ls.trim()){alert("Por favor, digite um nome para o filtro");return}if(ws||!C)Se([...Ge,{id:Date.now().toString(),name:ls,filters:{...l}}]);else{const a=Ge.map(r=>r.id===C?{...r,filters:{...l}}:r);Se(a)}Oe(!1),me(""),Re(!1),y(!1)}$e(!1)},size:"sm",className:"px-4 py-2 text-sm rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"Aplicar Filtros"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200/60 dark:border-slate-700/60",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200/60 dark:border-slate-700/60 bg-slate-50/50 dark:bg-slate-900/20",children:[e.jsx("th",{className:"text-left px-4 py-2 font-semibold text-slate-700 dark:text-slate-300",children:"Usuário"}),e.jsx("th",{className:"text-left px-4 py-2 font-semibold text-slate-700 dark:text-slate-300",children:"Contato"}),e.jsx("th",{className:"text-left px-4 py-2 font-semibold text-slate-700 dark:text-slate-300",children:"Tipo / Função"}),e.jsx("th",{className:"text-left px-4 py-2 font-semibold text-slate-700 dark:text-slate-300",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-2 font-semibold text-slate-700 dark:text-slate-300",children:"Último Acesso"}),e.jsx("th",{className:"text-right px-4 py-2 font-semibold text-slate-700 dark:text-slate-300",children:"Ações"})]})}),e.jsx("tbody",{children:Gs.map(a=>{const r=ns(a.account_type,a.role),j=a.id!==Te&&!(a.is_admin&&a.role==="admin");return e.jsxs("tr",{className:"border-b border-slate-200/40 dark:border-slate-700/40 hover:bg-slate-50/50 dark:hover:bg-slate-900/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ga,{className:"h-7 w-7",children:e.jsx(ja,{className:`text-xs font-semibold ${a.account_type==="company"||a.account_type==="empresas"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":a.account_type==="agency"||a.account_type==="agencias"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:a.name.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2)})}),e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 scale-75",children:He(a.online_status)})}),e.jsxs(we,{className:"text-xs",children:[a.online_status==="online"&&"Online agora",a.online_status==="offline"&&"Offline",a.online_status==="busy"&&"Ocupado",a.online_status==="away"&&"Ausente",a.last_login&&e.jsxs("div",{children:["Última atividade: ",new Date(a.last_login).toLocaleDateString("pt-BR")," às"," ",new Date(a.last_login).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]})})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-xs text-slate-900 dark:text-slate-100 truncate",children:a.name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:a.email})]})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>ya(a.phone),className:"h-7 w-7 p-0 hover:bg-blue-100 hover:text-blue-700 dark:hover:bg-blue-900/30 dark:hover:text-blue-300 rounded",children:e.jsx(Gl,{className:"h-4 w-4"})})}),e.jsx(we,{className:"text-xs",children:"Ligar"})]})}),e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>wa(a.phone),className:"h-7 w-7 p-0 hover:bg-green-100 hover:text-green-700 dark:hover:bg-green-900/30 dark:hover:text-green-300 rounded",children:e.jsx(ql,{className:"h-4 w-4"})})}),e.jsx(we,{className:"text-xs",children:"WhatsApp"})]})})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{className:`text-xs px-2 py-0.5 ${r.color}`,children:r.label}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:_e(a.role)})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(k,{className:a.is_active?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 text-xs px-2 py-0.5":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 text-xs px-2 py-0.5",children:a.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:a.last_login?new Date(a.last_login).toLocaleDateString("pt-BR"):"Nunca"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.last_login?new Date(a.last_login).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):""})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Cs(a,"view"),className:"h-7 w-7 p-0 hover:bg-blue-100 hover:text-blue-700 dark:hover:bg-blue-900/30 dark:hover:text-blue-300 rounded",children:e.jsx(xt,{className:"h-4 w-4"})})}),e.jsx(we,{className:"text-xs",children:"Ver Detalhes"})]})}),e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Cs(a,"block"),className:`h-7 w-7 p-0 rounded ${a.is_active?"hover:bg-red-100 hover:text-red-700 dark:hover:bg-red-900/30 dark:hover:text-red-300":"hover:bg-green-100 hover:text-green-700 dark:hover:bg-green-900/30 dark:hover:text-green-300"}`,children:a.is_active?e.jsx(Zl,{className:"h-4 w-4"}):e.jsx(zs,{className:"h-4 w-4"})})}),e.jsx(we,{className:"text-xs",children:a.is_active?"Bloquear":"Desbloquear"})]})}),e.jsx(Me,{children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Cs(a,"delete"),disabled:!j,className:`h-7 w-7 p-0 rounded ${j?"hover:bg-red-100 hover:text-red-700 dark:hover:bg-red-900/30 dark:hover:text-red-300":"opacity-40 cursor-not-allowed"}`,children:e.jsx(vs,{className:"h-4 w-4"})})}),e.jsx(we,{className:"text-xs",children:j?"Deletar usuário":"Não pode deletar este usuário"})]})})]})})]},a.id)})})]})}),Gs.length===0&&e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx(at,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-xs",children:"Nenhum usuário encontrado"})]}),J.length>0&&e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200/60 dark:border-slate-700/60 pt-3 pb-2",children:[e.jsx(lt,{value:qe.toString(),onValueChange:a=>{$s(Number(a)),de(1)},variant:"bottom"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>de(Math.max(1,U-1)),disabled:U===1,className:"h-7 w-7 p-0",children:e.jsx(ua,{className:"h-3.5 w-3.5"})}),e.jsx("div",{className:"flex items-center gap-1",children:qs().map((a,r)=>e.jsx("div",{children:a==="..."?e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 px-2",children:"..."}):e.jsx(o,{onClick:()=>de(Number(a)),variant:a===U?"default":"outline",size:"sm",className:`h-7 w-7 p-0 text-xs font-medium ${a===U?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600 dark:border-blue-600":"text-slate-700 dark:text-slate-300"}`,children:a})},r))}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>de(Math.min(ue,U+1)),disabled:U===ue,className:"h-7 w-7 p-0",children:e.jsx(pa,{className:"h-3.5 w-3.5"})})]})]})]})})}),ae&&e.jsx(hi,{open:ae,onClose:()=>{Ce(!1),I(null)},user:N}),e.jsx(ui,{open:Bs,onClose:()=>rs(!1),onUserCreated:a=>{console.log("[v0] Novo usuário criado:",a),W([...x,a]),se([...J,a]),rs(!1)}}),ne&&N&&e.jsx(M,{open:ne,onOpenChange:b,children:e.jsxs(V,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Confirmar Mudança de Status"}),e.jsxs(Z,{children:["Você tem certeza de que deseja mudar o status do usuário ",N.name,"?"]})]}),e.jsxs(tt,{children:[e.jsx(G,{children:"Cancelar"}),e.jsx(ee,{onClick:()=>Ws("Desconhecido"),children:"Confirmar"})]})]})}),F&&N&&e.jsx(M,{open:F,onOpenChange:T,children:e.jsxs(V,{className:"max-w-md",children:[e.jsx(B,{children:e.jsxs($,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(vs,{className:"h-5 w-5"}),"Excluir Usuário"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2 bg-red-50/50 dark:bg-red-950/20 border border-red-200/50 dark:border-red-900/30 rounded-lg p-3",children:[e.jsx(ha,{className:"h-4 w-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-700 dark:text-red-300",children:["Tem certeza que deseja excluir este usuário? Esta ação é ",e.jsx("strong",{children:"irreversível"}),"."]})]}),e.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900/20 border border-slate-200/50 dark:border-slate-700/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:N.name}),e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:N.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1",children:["Motivo da Exclusão",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(jt,{placeholder:"Descreva o motivo da exclusão para fins de auditoria (mínimo 10 caracteres)",value:E,onChange:a=>{H(a.target.value),q&&le("")},disabled:n,className:"text-xs resize-none focus-visible:ring-red-500",rows:4}),q&&e.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx(ha,{className:"h-3 w-3"}),q]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Caracteres: ",E.length,"/10 (mínimo)"]})]})]}),e.jsxs(tt,{className:"gap-2 pt-4",children:[e.jsx(G,{disabled:n,className:"h-8",children:"Cancelar"}),e.jsx(ee,{onClick:Na,disabled:n||!E.trim(),className:"bg-red-600 hover:bg-red-700 h-8 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-3 w-3 mr-1.5 animate-spin"}),"Excluindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-3 w-3 mr-1.5"}),"Excluir Definitivamente"]})})]})]})})]})}export{$i as default};
