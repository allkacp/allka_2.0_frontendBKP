import{r as o,j as e,aU as B,ag as I,E as F,H as A,I as L,J as M,K as r,C as N,g as v,l as f,B as x,f as k,az as $,D as U,v as E,w as V,x as Z,ae as z,a2 as _,m as d,ap as m,p as H,ah as J,a9 as X,ao as w,aw as O}from"./index-D2dOrPZ8.js";import{P as G}from"./progress-BnPXSgzQ.js";import{F as K}from"./funnel-D8IEwOH8.js";import{R as Q}from"./repeat-9aPkItj1.js";const W=[{id:1,project_id:1,name:"Design Homepage",status:"completed",assignee:"João Silva",due_date:"2024-01-20"},{id:2,project_id:1,name:"Develop Frontend",status:"in_progress",assignee:"Maria Santos",due_date:"2024-02-15"},{id:3,project_id:1,name:"Backend Integration",status:"in_progress",assignee:"Pedro Costa",due_date:"2024-02-28"},{id:4,project_id:1,name:"Testing & QA",status:"pending",assignee:"Ana Lima",due_date:"2024-03-10"},{id:5,project_id:1,name:"Deploy to Production",status:"pending",assignee:"Carlos Souza",due_date:"2024-03-15"},{id:6,project_id:2,name:"UI/UX Design",status:"completed",assignee:"João Silva",due_date:"2023-11-15"},{id:7,project_id:2,name:"Mobile Development",status:"completed",assignee:"Maria Santos",due_date:"2023-12-20"},{id:8,project_id:2,name:"App Store Submission",status:"completed",assignee:"Pedro Costa",due_date:"2024-01-30"},{id:9,project_id:3,name:"Brand Research",status:"pending",assignee:"Ana Lima",due_date:"2024-02-10"},{id:10,project_id:3,name:"Logo Design",status:"pending",assignee:"Carlos Souza",due_date:"2024-02-20"}],S=[{id:1,name:"Website Redesign - TechCorp",client:"TechCorp Solutions",status:"active",value:15e3,commission:2250,start_date:"2024-01-15",end_date:"2024-03-15",progress:65,project_type:"monthly",description:"Complete redesign of corporate website with modern UI/UX and responsive design."},{id:2,name:"Mobile App Development",client:"StartupXYZ",status:"completed",value:25e3,commission:3750,start_date:"2023-11-01",end_date:"2024-01-30",progress:100,project_type:"one-time",description:"Native mobile application for iOS and Android with real-time features."},{id:3,name:"Brand Identity Package",client:"Fashion Brand Co",status:"pending",value:8e3,commission:1200,start_date:"2024-02-01",end_date:"2024-04-01",progress:0,project_type:"both",description:"Complete brand identity including logo, color palette, and brand guidelines."}],Y=[{id:1,name:"Digital Creators Hub",status:"active",total_spent:45e3,mrr:3500,projects_count:12,last_access:"2024-01-25T10:00:00Z",join_date:"2023-06-15"},{id:2,name:"Creative Solutions Ltd",status:"active",total_spent:32e3,mrr:2800,projects_count:8,last_access:"2024-01-24T15:30:00Z",join_date:"2023-08-20"},{id:3,name:"Marketing Pro Agency",status:"overdue",total_spent:18e3,mrr:1500,projects_count:5,last_access:"2024-01-10T09:00:00Z",join_date:"2023-10-05"}];function le({agency:p,showLedAgencies:a=!1}){const[u,C]=o.useState(""),[n,y]=o.useState("all"),[t,c]=o.useState(null);if(console.log("[v0] AgencyProjects rendered",{showLedAgencies:a,agencyId:p.id,projectsCount:S.length}),a&&!p.is_partner)return console.log("[v0] Not showing led agencies - agency is not a partner"),null;const i=(a?Y:S).filter(s=>{const T=s.name.toLowerCase().includes(u.toLowerCase()),R=n==="all"||s.status===n;return T&&R}),l=t?W.filter(s=>s.project_id===t.id):[],D=l.filter(s=>s.status==="completed").length;console.log("[v0] Filtered data count:",i.length);const h=s=>{switch(s){case"active":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"completed":return"bg-blue-100 text-blue-700 border-blue-200";case"pending":return"bg-amber-100 text-amber-700 border-amber-200";case"overdue":return"bg-rose-100 text-rose-700 border-rose-200";case"in_progress":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},j=s=>{switch(s){case"active":return"Ativo";case"completed":return"Concluído";case"pending":return"Pendente";case"overdue":return"Inadimplente";case"in_progress":return"Em Andamento";default:return s}},g=s=>{switch(s){case"monthly":return e.jsx(Q,{className:"h-4 w-4 text-blue-500"});case"one-time":return e.jsx(X,{className:"h-4 w-4 text-purple-500"});case"both":return e.jsx(d,{className:"h-4 w-4 text-emerald-500"});default:return e.jsx(d,{className:"h-4 w-4 text-slate-500"})}},b=s=>{switch(s){case"monthly":return"Mensal";case"one-time":return"Avulso";case"both":return"Mensal + Avulso";default:return"Não definido"}},P=s=>{switch(s){case"completed":return e.jsx(m,{className:"h-4 w-4 text-emerald-500"});case"in_progress":return e.jsx(w,{className:"h-4 w-4 text-blue-500"});case"pending":return e.jsx(O,{className:"h-4 w-4 text-amber-500"});default:return e.jsx(w,{className:"h-4 w-4 text-slate-500"})}};return e.jsxs("div",{className:"space-y-6 px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(I,{placeholder:`Buscar ${a?"agências":"projetos"}...`,value:u,onChange:s=>C(s.target.value),className:"pl-10 border-slate-300 dark:border-slate-700"})]}),e.jsxs(F,{value:n,onValueChange:y,children:[e.jsxs(A,{className:"w-full sm:w-48 border-slate-300 dark:border-slate-700",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),e.jsx(L,{placeholder:"Status"})]}),e.jsxs(M,{children:[e.jsx(r,{value:"all",children:"Todos os Status"}),e.jsx(r,{value:"active",children:"Ativo"}),e.jsx(r,{value:"completed",children:"Concluído"}),e.jsx(r,{value:"pending",children:"Pendente"}),a&&e.jsx(r,{value:"overdue",children:"Inadimplente"})]})]})]}),e.jsx("div",{className:"grid gap-3 w-full",children:i.map(s=>e.jsx(N,{className:"hover:shadow-lg transition-all border-slate-200 dark:border-slate-800 hover:border-blue-300 dark:hover:border-blue-700 w-full",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap sm:flex-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg flex-shrink-0 shadow-md",children:a?e.jsx(f,{className:"h-6 w-6"}):s.name.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:s.name}),!a&&e.jsxs(x,{variant:"outline",className:"gap-1 text-xs flex-shrink-0",children:[g(s.project_type),e.jsx("span",{className:"hidden sm:inline",children:b(s.project_type)})]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:a?`Membro desde ${new Date(s.join_date).toLocaleDateString()}`:`Cliente: ${s.client}`})]})]}),e.jsx("div",{className:"hidden md:flex items-center gap-6 flex-shrink-0",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Gasto"}),e.jsxs("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:["R$ ",s.total_spent.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"MRR"}),e.jsxs("div",{className:"font-semibold text-emerald-600",children:["R$ ",s.mrr.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Projetos"}),e.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:s.projects_count})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Valor"}),e.jsxs("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:["R$ ",s.value.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Comissão"}),e.jsxs("div",{className:"font-semibold text-emerald-600",children:["R$ ",s.commission.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Progresso"}),e.jsxs("div",{className:"font-semibold text-blue-600",children:[s.progress,"%"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(x,{className:h(s.status),children:j(s.status)}),e.jsxs(k,{variant:"outline",size:"sm",className:"gap-1 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 bg-transparent",onClick:()=>!a&&c(s),children:[e.jsx($,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Ver"})]})]})]})})},s.id))}),i.length===0&&e.jsx(N,{className:"border-slate-200 dark:border-slate-800",children:e.jsx(v,{className:"text-center py-12",children:e.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:a?"Nenhuma agência liderada encontrada":"Nenhum projeto encontrado"})})}),e.jsx(U,{open:t!==null,onOpenChange:()=>c(null),children:e.jsxs(E,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(V,{children:[e.jsxs(Z,{className:"text-2xl flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:t?.name.charAt(0)}),t?.name]}),e.jsx(z,{children:t?.description})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800",children:[e.jsx(f,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Cliente"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t?.client})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"p-1.5 rounded bg-slate-200 dark:bg-slate-800",children:t&&g(t.project_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tipo"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t&&b(t.project_type)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800",children:[e.jsx(_,{className:"h-5 w-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Valor do Projeto"}),e.jsxs("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:["R$ ",t?.value.toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800",children:[e.jsx(_,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Comissão"}),e.jsxs("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:["R$ ",t?.commission.toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800",children:[e.jsx(d,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Data de Início"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t&&new Date(t.start_date).toLocaleDateString("pt-BR")})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800",children:[e.jsx(d,{className:"h-5 w-5 text-amber-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Data de Término"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t&&new Date(t.end_date).toLocaleDateString("pt-BR")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Progresso do Projeto"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[t?.progress,"%"]})]}),e.jsx(G,{value:t?.progress||0,className:"h-2"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[D," de ",l.length," tarefas concluídas"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-blue-500"}),"Tarefas do Projeto (",l.length,")"]}),l.length>0?e.jsx("div",{className:"space-y-2",children:l.map(s=>e.jsx("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"mt-0.5",children:P(s.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-slate-100 mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3.5 w-3.5"}),s.assignee]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(d,{className:"h-3.5 w-3.5"}),new Date(s.due_date).toLocaleDateString("pt-BR")]})]})]})]}),e.jsx(x,{className:h(s.status),children:j(s.status)})]})},s.id))}):e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx(m,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhuma tarefa cadastrada"})]})]})]}),e.jsx(J,{children:e.jsx(k,{variant:"outline",onClick:()=>c(null),children:"Fechar"})})]})})]})}export{le as A};
